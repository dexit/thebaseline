!function(c){c(window).on("elementor/frontend/init",function(){var e=elementorModules.frontend.handlers.Base.extend({getDefaultSettings:function(){return{selectors:{chartElem:".premium-chart-container",chartCanvas:".premium-chart-canvas"}}},getDefaultElements:function(){var e=this.getSettings("selectors");return{$chartElem:this.$element.find(e.chartElem),$chartCanvas:this.$element.find(e.chartCanvas)}},bindEvents:function(){var e=this,t=this.elements.$chartElem.closest(".premium-tabs-content-section, .elementor-tab-content"),a=this.elements.$chartElem.closest(".premium-tabs").attr("id"),n=this.elements.$chartElem.closest(".premium-hscroll-temp");if(t.length||n.length)if(n.length){var o=!1,i=n.outerWidth();c(window).on("scroll",function(){!o&&c(window).scrollTop()>=n.data("scroll-offset")-i/2&&(e.run(),o=!0)})}else{var r=t.index();if(setTimeout(function(){t.is(":visible")&&e.run()},300),c(document).on("click","#"+a+" li[data-list-index='"+r+"']",function(){e.elements.$chartElem.hasClass("chart-rendered")||e.run()}),t.hasClass("elementor-tab-content")){var s=t.attr("id").replace("elementor-tab-content-","");(o=!1)||(o=!0,c(document).on("click","#elementor-tab-title-"+s,function(){setTimeout(function(){e.elements.$chartElem.hasClass("chart-rendered")||(console.log("render"),e.run())},300)}))}}else this.run()},chartInstance:null,columnsData:null,run:function(){var e=this.getElementSettings(),t=this.elements.$chartElem;if(t.addClass("chart-rendered"),this.columnsData=t.data("chart"),t.closest(".premium-modal-box-modal").length||"load"===e.render_event)this.getChartData();else{var a=this;new Waypoint({element:this.elements.$chartCanvas,offset:Waypoint.viewportHeight()-250,triggerOnce:!0,handler:function(){a.getChartData(),this.destroy()}})}},getSingleOptions:function(){var a=this.getElementSettings();return{scale:{ticks:{beginAtZero:a.y_axis_begin,stepSize:a.step_size,suggestedMax:a.y_axis_max,callback:function(e){var t=a.format_locale||!1;return e.toLocaleString(t)}}}}},getMultiOptions:function(){var a=this.getElementSettings(),e=a.type;return{scales:{xAxes:[{barPercentage:"bar"===e&&a.x_column_width.size?a.x_column_width.size:.9,display:"pie"!==e&&"doughnut"!==e,gridLines:{display:a.x_axis_grid,color:a.x_axis_grid_color,lineWidth:a.x_axis_grid_width.size,drawBorder:!0},scaleLabel:{display:a.x_axis_label_switch,labelString:a.x_axis_label,fontColor:a.x_axis_label_color,fontSize:a.x_axis_label_size},ticks:{fontSize:a.x_axis_labels_size||12,fontColor:a.x_axis_labels_color||"#54595f",stepSize:a.step_size,maxRotation:a.x_axis_label_rotation||0,minRotation:a.x_axis_label_rotation||0,beginAtZero:a.x_axis_begin,callback:function(e){var t=a.format_locale||!1;return e.toLocaleString(t)}}}],yAxes:[{display:"pie"!==e&&"doughnut"!==e,type:"horizontalBar"!==e?a.data_type:"category",gridLines:{display:a.y_axis_grid,color:a.y_axis_grid_color,lineWidth:a.y_axis_grid_width.size},scaleLabel:{display:a.y_axis_label_switch,labelString:a.y_axis_label,fontColor:a.y_axis_label_color,fontSize:a.y_axis_label_size},ticks:{suggestedMin:a.y_axis_min,suggestedMax:a.y_axis_max,fontSize:a.y_axis_labels_size||12,fontColor:a.y_axis_labels_color||"#54595f",beginAtZero:a.y_axis_begin,stepSize:a.step_size,callback:function(e){var t=a.format_locale||!1;return e.toLocaleString(t)}}}]}}},getGlobalOptions:function(d){var l=this,u=this.getElementSettings(),c=u.type,e=elementorFrontend.getCurrentDeviceMode(),t=u.value_on_chart,a=("pie"!==c&&"doughnut"!==c||!t)&&["mousemove","mouseout","click","touchstart","touchmove"];return u.legPos=u.legend_position,"desktop"!==e&&(u.legend_hide&&(u.legend_display=!1),u.legPos=u["legend_position_"+e]),{maintainAspectRatio:!1,layout:{padding:{top:"polarArea"===c?6:0}},events:a,animation:{duration:u.duration||500,easing:u.start_animation,onComplete:function(){a||(this.defaultFontSize=16,d.font='15px "Helvetica Neue", "Helvetica", "Arial", sans-serif',d.fillStyle="#000",d.textAlign="center",d.textBaseline="bottom",this.data.datasets.forEach(function(e){for(var t=0;t<e.data.length;t++){var a=e._meta[Object.keys(e._meta)[0]].data[t]._model,n=e._meta[Object.keys(e._meta)[0]].total,o=a.innerRadius+(a.outerRadius-a.innerRadius)/2,i=a.startAngle,r=i+(a.endAngle-i)/2,s=o*Math.cos(r),l=o*Math.sin(r);d.fillStyle=u.y_axis_labels_color;var c=String(Math.round(e.data[t]/n*100))+"%";d.fillText(c,a.x+s,a.y+l+15)}}))}},tooltips:{enabled:u.tool_tips,mode:u.tool_tips_mode,callbacks:{label:function(e,t){var a="";"pie"!=c&&"doughnut"!=c&&"polarArea"!=c||(a=t.labels[e.index]+": ");var n=t.datasets[e.datasetIndex],o=n.data.reduce(function(e,t){return parseFloat(e)+parseFloat(t)}),i=n.data[e.index];if(!u.tool_tips_percent){var r=u.format_locale||!1;i=parseFloat(i).toLocaleString(r)}var s=(i/o*100).toPrecision(3);return l.$element.hasClass("extend-tooltips")?[a,u.tool_tips_percent?s+"%":i]:a+(u.tool_tips_percent?s+"%":i)}}},legend:{display:u.legend_display,position:u.legPos,reverse:u.legend_reverse,labels:{usePointStyle:u.legend_circle,boxWidth:parseInt(u.legend_item_width),fontColor:u.legend_text_color||"#54595f",fontSize:parseInt(u.legend_text_size)}}}},renderChart:function(){var e=this.getID(),n=document.getElementById("premium-chart-canvas-"+e).getContext("2d"),t=this.getGlobalOptions(n),o=this.getElementSettings(),a=this.columnsData,i=o.x_axis_labels||"",r=o.type,s={labels:"custom"===o.data_source?i.split(","):[],datasets:[]};if(this.chartInstance=new Chart(n,{type:r,data:s,options:Object.assign(t,"radar"!==r&&"polarArea"!==r?this.getMultiOptions():this.getSingleOptions())}),"custom"===o.data_source){var l=this;a.forEach(function(e){if("pie"!==r&&"doughnut"!==r&&"polarArea"!==r&&"object"==typeof e.backgroundColor&&"empty"!==e.backgroundColor[e.backgroundColor.length-1]){var t=n.createLinearGradient(0,0,0,600),a=e.backgroundColor[1]?e.backgroundColor[1]:e.backgroundColor[0];t.addColorStop(0,e.backgroundColor[0]),t.addColorStop(1,a),e.backgroundColor=t,e.hoverBackgroundColor=t}s.datasets.push(e),l.chartInstance.update()}),c("#premium-chart-canvas-"+e).on("click",function(e){var t=l.chartInstance.getElementAtEvent(e);if(t[0]){var a=l.chartInstance.data.datasets[t[0]._datasetIndex].links[t[0]._index];null!=a&&""!=a&&window.open(a,o.y_axis_urls_target?"_blank":"_top")}})}},getChartData:function(){var e=this.getElementSettings("data_source"),t=this.columnsData,a=this;if("custom"===e)this.renderChart();else{var n=this.elements.$chartElem;n.append('<div class="premium-loading-feed"><div class="premium-loader"></div></div>'),t.url&&c.ajax({url:t.url,type:"GET",success:function(e){n.find(".premium-loading-feed").remove(),a.renderCSVChart(e)},error:function(e){console.log(e)}})}},renderCSVChart:function(e){var t=this.getID(),a=document.getElementById("premium-chart-canvas-"+t).getContext("2d"),n=this,o=e.split(/\r?\n|\r/),i=this.columnsData,r=o.shift().split(i.separator),s=this.getGlobalOptions(a),l=this.getElementSettings().type,c={labels:r,datasets:[]};this.chartInstance=new Chart(a,{type:l,data:c,options:Object.assign(s,"radar"!==l&&"polarArea"!==l?this.getMultiOptions():this.getSingleOptions())}),o.forEach(function(e,t){if(0!==e.length){var a={};a.data=e.split(i.separator),i.props[t]&&(a.borderColor=i.props[t].borderColor,a.borderWidth=i.props[t].borderWidth,a.backgroundColor=i.props[t].backgroundColor,a.hoverBackgroundColor=i.props[t].hoverBackgroundColor,a.label=i.props[t].title),c.datasets.push(a),n.chartInstance.update()}})}});elementorFrontend.elementsHandler.attachHandler("premium-chart",e)})}(jQuery);