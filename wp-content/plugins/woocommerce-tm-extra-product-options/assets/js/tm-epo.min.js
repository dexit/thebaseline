!function(I,F,Bt){"use strict";var b,o,f,a,Nt={},Ht=I.TMEPOJS,e=I.wp,i=I.TMEPOQTRANSLATEXJS,_=I.noUiSlider,k=I.ClipboardEvent,C=I.DataTransfer,P=[],c=[],g=!1,v=!1,A=Bt("body"),Lt=Bt(I),E=Bt(F),q=Bt(I),D=I.tcmexp,B=I._,j=!1,r=Bt.fn.val;function u(t,i){t.toArray().forEach(function(t){(t=Bt(t)).find(":input").prop("disabled",function(t,e){var a=Bt(this).data("tc-state");return void 0===a?(Bt(this).data("tc-state",e),i):!1===a?i:a})})}function Mt(t,e){var a,i,o,r,n,c=0;return e&&(a=e.attr("data-taxable"),i=e.attr("data-tax-rate"),o=e.attr("data-prices-include-tax")||Ht.prices_include_tax,r=e.attr("data-tax-display-mode"),void 0!==(n=void 0!==e.data("current_variation")?e.data("current_variation"):n))&&(a=(n=e.data("current_variation")).tc_is_taxable,i=n.tc_tax_rate),a&&(i=parseFloat(i/100),"1"===o?c="incl"===r?(t=parseFloat(t))-t/(1+i):t*i:"incl"===r&&(c=t-t/(1+i)),c=Bt.epoAPI.math.toFloat(c)),c}function M(t,e,a,i,o,r,n){var c,l,d,s,p,m,_,f,u;return Number.isFinite(parseFloat(t))||(t=0),t*=1e4,e&&(c=e.attr("data-taxable"),l=e.attr("data-tax-rate"),d=e.attr("data-prices-include-tax")||Ht.prices_include_tax,s=e.attr("data-is-vat-exempt"),p=e.attr("data-non-base-location-prices"),m=e.attr("data-taxes-of-one"),_=e.attr("data-base-taxes-of-one"),f=e.attr("data-modded-taxes-of-one"),void 0!==e.data("current_variation")?u=e.data("current_variation"):void 0!==o&&(u=o),void 0!==u&&(c=(u=e.data("current_variation")).tc_is_taxable,l=u.tc_tax_rate,p=u.tc_non_base_location_prices,m=u.tc_taxes_of_one,_=u.tc_base_taxes_of_one,f=u.tc_modded_taxes_of_one),a&&a.data("tax-obj")&&("no"===(l=a.data("tax-obj")).has_fee?c=!1:"yes"===l.has_fee&&(c=!0),_=m=(l=l.tax_rate)/100),c)&&("1"!==d||i?(a||void 0===u||n)&&(t=parseFloat(t)+parseFloat(t)*m):"1"===s?t="1"===p?parseFloat(t)-m*t:parseFloat(t)-_*t:"1"===p&&(t=parseFloat(t)-_*t+f*t)),t/=1e4}function R(t,e,a,i,o,r,n){var c,l,d,s,p,m,_;return Number.isFinite(parseFloat(t))||(t=0),t*=1e4,e&&(_=e.attr("data-tax-display-mode"),c=e.attr("data-taxable"),l=e.attr("data-tax-rate"),d=e.attr("data-taxes-of-one"),s=e.attr("data-base-taxes-of-one"),p=e.attr("data-prices-include-tax"),void 0!==e.data("current_variation")?m=e.data("current_variation"):void 0!==o&&(m=o),void 0!==m&&(c=m.tc_is_taxable,l=m.tc_tax_rate,d=m.tc_taxes_of_one,s=m.tc_base_taxes_of_one),a&&a.data("tax-obj")&&("no"===(l=a.data("tax-obj")).has_fee?c=!1:"yes"===l.has_fee&&(c=!0),s=(l=l.tax_rate)/100),c)&&("1"===p||i)&&"incl"!==_&&(a||void 0===m||i||n)&&(s===d?t=parseFloat(t)-parseFloat(d*t):t*=1-parseFloat(s)),t/=1e4}function Rt(t,e,a,i,o,r,n){return Number.isFinite(parseFloat(t))||(t=0),t=e?("incl"===(e.attr("data-tax-display-mode")||Ht.tax_display_mode)?M:R)(t,e,a,o,r,0,n):t}function Ut(t,e){e=Bt.extend({symbol:"",format:"",decimal:Nt.localDecimalSeparator,thousand:Nt.localThousandSeparator,precision:Ht.currency_format_num_decimals},e=e||{});return"yes"===Ht.tm_epo_trim_zeros&&"0"!==(t%1).toString()==!1&&(e.precision=0),Bt.epoAPI.applyFilter("tc_formatPrice",Bt.epoAPI.math.format(t,e),e,t)}function l(t,e,a){return e+Ut(t,{symbol:Ht.currency_format_symbol,format:Ht.currency_format})+a}function Qt(t,e,a,i,o,r){var n="",c=Ht.option_plus_sign+" ";return a||(t=Rt(t,e,o)),a=Math.abs(t),"minus"===Ht.tm_epo_global_options_price_sign&&(c=""),l(a,c=t<0?Ht.option_minus_sign+" ":c,n=void 0===(n=e&&i?e.attr("data-tax-string"):n)?"":n)}function Jt(t){return 0<t.find("input.variation_id").length?"input.variation_id":"input.product-variation-id"}function Vt(t){var e=t.find(Nt.qtySelector).last();return 0===e.length&&(e=t.find(Nt.associateQtySelector).last()),e=Bt.epoAPI.applyFilter("tc_getQtyElement",e,t)}function d(t,e,a){P[P.length]={name:t,selector:e,func:a}}function S(a,i,o){var r,n=!0,c=!1;return a=Bt(a),(r=a.filter(".tc-epo-field-product")).length&&void 0===r.data("islogicinit")&&(c=!0),a.each(function(t,e){!n&&a.has(".tc-epo-field-product").length?(c||r.is(".tcdisabled"))&&s(e,i,o):n=s(e,i,o)&&n}),n}function s(t,e,a){var i,o,r,n,c,l;return(t=Bt(t)).is(".cpf-element")?t=(i=t).find(".tmcp-field, .tmcp-fee-field"):i=t.closest(".cpf-element"),l=(c=i.closest(".cpf-section")).closest(".tm-extra-product-options-field"),a=a?t.closest(".tmcp-ul-wrap"):i,t.is(".tc-epo-field-product")&&void 0===t.data("islogicinit")&&t.data("islogicinit",1),(o=!t.is(".tc-epo-field-product")&&i.closest(".cpf-type-product")).length&&((n=o.find(Nt.associateQtySelector)).length&&(0<Bt.epoAPI.math.toFloat(n.val())?(t.removeClass("ignore"),n.removeClass("ignore")):(t.addClass("ignore"),n.addClass("ignore"))),n=o.data("isactive"),r=(o=o.closest(".cpf-section")).data("isactive")),!1!==n&&!1!==r&&!1!==i.data("isactive")&&!1!==c.data("isactive")?(o=t.first(),t.prop("disabled",!1),void 0!==t.data("tc-state")&&t.data("tc-state",!1),"yes"!==Ht.tm_epo_show_only_active_quantities?o.is(":radio, .cpf-type-radio")||o.is(":checkbox, .cpf-type-checkbox")?(t.filter(":checked").closest(".tmcp-field-wrap").find(".tm-qty").prop("disabled",!1),t.not(":checked").closest(".tmcp-field-wrap").find(".tm-qty").prop("disabled",!0)):(o.is("select, .cpf-type-select, .cpf-type-selectmultiple"),o.val()?a.find(".tm-qty").prop("disabled",!1):a.find(".tm-qty").prop("disabled",!0)):e||i.find(".tm-quantity").trigger("showhide.cpfcustom"),o.is(".cpf-element")||(t.removeClass("tcdisabled").addClass("tcenabled"),t.is(".tmcp-upload")&&t.next(".tmcp-upload-hidden").length&&t.next(".tmcp-upload-hidden").removeClass("tcdisabled").addClass("tcenabled").prop("disabled",!1)),i.removeClass("tc-container-disabled").addClass("tc-container-enabled"),t.trigger({type:"tm-field-is-active",field:t,value:!0}),c.removeClass("section-disabled"),l.removeClass("tc-hidden"),!0):(t.is(".cpf-element")||(t.prop("disabled",!0).removeClass("tcenabled").addClass("tcdisabled"),void 0!==t.data("tc-state")&&t.data("tc-state",!0),i.find(".tm-qty").prop("disabled",!0),t.is(".tmcp-upload")&&t.next(".tmcp-upload-hidden").length&&t.next(".tmcp-upload-hidden").removeClass("tcenabled").addClass("tcdisabled").prop("disabled",!0)),i.removeClass("tc-container-enabled").addClass("tc-container-disabled"),t.trigger({type:"tm-field-is-active",field:t,value:!1}),c.find(".cpf-element").length===c.find(".cpf-element.tc-container-disabled").length&&(c.addClass("section-disabled"),0===l.children(".cpf-section").filter(function(){return!Bt(this).hasClass("section-disabled")}).length)&&l.addClass("tc-hidden"),!1)}function x(t,e,a){if(null!==t&&null!==e)switch(t=encodeURIComponent(t),e=Bt.qtranxj_split?encodeURIComponent(Bt.qtranxj_split(decodeURIComponent(e))[i.language]):encodeURIComponent(decodeURIComponent(e)),t=t?t.toLowerCase():"",e=e?e.toLowerCase():"",t=t.toString(),e=e.toString(),a){case"is":return null!==t&&t===e;case"isnot":return null!==t&&t!==e;case"isempty":return!("undefined"!==t&&void 0!==t&&""!==t);case"isnotempty":return"undefined"!==t&&void 0!==t&&""!==t;case"startswith":return t.startsWith(e);case"endswith":return t.endsWith(e);case"greaterthan":return parseFloat(t)>parseFloat(e);case"lessthan":return parseFloat(t)<parseFloat(e);case"greaterthanequal":return parseFloat(t)>=parseFloat(e);case"lessthanequal":return parseFloat(t)<=parseFloat(e)}return!1}function U(t){var a,i,e=Bt(t.element),o=t.operator,r=t.value,n=!1,c="";if(e.length){if(e.is(".cpf-section")){var l,d,t=e,s=o,p=!0,m=t.find(".cpf-element"),_=!1;if(t.is(".tc-hidden")){if("isnotempty"===s)return;if("isempty"===s)return 1}return Bt(m).each(function(t,e){var a,i="";if((e=Bt(e)).is(".cpf-type-product")&&(i=":not(.tc-extra-product-options-inline .tm-epo-field)"),S(e))if(0<(a=e.attr("class").split(" ").map(function(t){return-1!==t.indexOf("cpf-type-",0)?t:null}).filter(function(t){return null!=t?t:null})).length){switch("cpf-type-product"===(a=a[0])&&(_=!0,a=e.is(".cpf-type-product-mode-product")||e.is(".cpf-type-product-checkbox")||e.is(".cpf-type-product-thumbnailmultiple")?"cpf-type-checkbox":e.is(".cpf-type-product-dropdown")?"cpf-type-select":"cpf-type-radio"),a){case"cpf-type-radio":d=e.find("input.tm-epo-field.tmcp-radio:checked"+i),"isnotempty"===s?(p=p&&0<d.length,0<d.length&&(l=d.length)):"isempty"===s&&(p=p&&0===d.length);break;case"cpf-type-checkbox":d=e.find("input.tm-epo-field.tmcp-checkbox:checked"+i),"isnotempty"===s?(p=p&&0<d.length,0<d.length&&(l=d.length)):"isempty"===s&&(p=p&&0===d.length);break;case"cpf-type-select":(l=e.find("select.tm-epo-field.tmcp-select"+i).val())&&!_&&(l=l.slice(0,l.lastIndexOf("_")));break;case"cpf-type-selectmultiple":(l=e.find("select.tm-epo-field.tmcp-selectmultiple"+i).val())&&!_&&l.forEach(function(t,e){l[e]=t.slice(0,t.lastIndexOf("_"))});break;default:l=e.find(".tm-epo-field"+i).val()}p=Array.isArray(l)?p&&l.some(function(t){return x(t,"",s)}):p&&x(l,"",s)}else p=p&&!1}),p}if(e.is(".cpf-type-product")&&(c=":not(.tc-extra-product-options-inline .tm-epo-field)"),0<(t=e.attr("class").split(" ").map(function(t){return-1!==t.indexOf("cpf-type-",0)?t:null}).filter(function(t){return null!=t?t:null})).length){switch("cpf-type-product"===(t=t[0])&&(n=!0,t=e.is(".cpf-type-product-mode-product")||e.is(".cpf-type-product-checkbox")||e.is(".cpf-type-product-thumbnailmultiple")?"cpf-type-checkbox":e.is(".cpf-type-product-dropdown")?"cpf-type-select":"cpf-type-radio"),t){case"cpf-type-radio":if(u=e.find("input.tm-epo-field.tmcp-radio:checked"+c),"is"===o||"isnot"===o){if(0===u.length&&"is"===o)return;if(0===u.length&&"isnot"===o)return 1;(a=e.find("input.tm-epo-field.tmcp-radio:checked"+c).val())&&!n&&(a=a.slice(0,a.lastIndexOf("_")))}if("isnotempty"===o)return 0<u.length;if("isempty"===o)return 0===u.length;break;case"cpf-type-checkbox":if(u=e.find("input.tm-epo-field.tmcp-checkbox:checked"+c),"is"===o||"isnot"===o)return(0!==u.length||"is"!==o)&&(0===u.length&&"isnot"===o||(i=!1,u.each(function(t,e){if(x(a=(a=Bt(e).val())&&!n?a.slice(0,a.lastIndexOf("_")):a,r,o))i=!0;else if("isnot"===o)return i=!1}),i));if("isnotempty"===o)return 0<u.length;if("isempty"===o)return 0===u.length;break;case"cpf-type-select":(a=e.find("select.tm-epo-field.tmcp-select"+c).val())&&!n&&(a=a.slice(0,a.lastIndexOf("_")));break;case"cpf-type-selectmultiple":(a=e.find("select.tm-epo-field.tmcp-selectmultiple"+c).val())&&!n&&a.forEach(function(t,e){a[e]=t.slice(0,t.lastIndexOf("_"))});break;case"cpf-type-variations":var f,u=e,g=r,h=o,v=Bt(u),y=v.attr("data-epo_id"),b=v.attr("data-product_id"),w=Bt(".variations_form[data-epo_id='"+y+"'][data-product_id='"+b+"']"),w=Bt.epoAPI.applyFilter("tm_variation_check_match_variationsForm",w,y,b,v);if(0!==w.length)switch(0===(y=w.find("input[name^='variation_id']")).length&&0===(y=w.find("input.variation_id")).length&&(y=w.closest(".tc-epo-element-product-li-container").find(".product-variation-id")),null!==u&&null!==g&&void 0!==u&&void 0!==g&&!1!==u&&!1!==g&&(g=g?parseInt(g,10):-1),f=parseInt(y.val(),10),Number.isFinite(f)||(f=0),Number.isFinite(g)||(g=0),h){case"is":return""!==f&&f===g;case"isnot":return""!==f&&f!==g;case"isempty":return""===f||0===f;case"isnotempty":return""!==f&&0!==f;case"startswith":return f.toString().startsWith(g);case"endswith":return f.toString().endsWith(g);case"greaterthan":return parseFloat(f)>parseFloat(g);case"lessthan":return parseFloat(f)<parseFloat(g);case"greaterthanequal":return parseFloat(f)>=parseFloat(g);case"lessthanequal":return parseFloat(f)<=parseFloat(g)}return;default:a=e.find(".tm-epo-field"+c).val()}return Array.isArray(a)?a.some(function(t){return x(t,r,o)}):x(a,r,o)}}}function n(t,n){t.each(function(){var a=Bt(this),t=a.data("matches"),e=a.data("toggle"),i=a.data("fields"),o=[],r=!1;switch(e){case"show":r=!1;break;case"hide":r=!0}Bt.each(i,function(i,t){Array.isArray(t)&&(o[i]=0,Bt.each(t,function(t,e){var a=!0;(a="cpflogic"===n?S(Bt(e.element)):a)&&U(e)&&(o[i]=parseInt(o[i],10)+1)}))}),Bt.each(t,function(t,e){t=parseInt(o[t],10);if(e=parseInt(e,10),0<t&&e===t)return r=!r,!1}),r?("cpflogic"!==n||a.data("did_initial_activation")||c.push(function(){var t=a.find(".tm-epo-field.tcenabled");t.each(function(t,e){(e=Bt(e)).data("initial_activation")||a.closest(".cpf-section").is(".tc-hidden")||!S(e)||(e.trigger("tc_element_epo_rules"),e.data("initial_activation",1))}),(a.is(".cpf-element")&&t.length||a.is(".cpf-section"))&&a.data("did_initial_activation",1)}),a.removeClass("tc-hidden")):a.addClass("tc-hidden"),a.data("isactive",r),a.trigger("tc-logic")})}function T(t){var e,a=[];Bt(t).length||(t="body"),(e=(t=Bt(t)).find(".iscpfdependson")).each(function(t,e){Bt(e).each(function(t,e){n(Bt(e))})}),e.each(function(t,e){Bt(e).each(function(t,e){n(Bt(e),"cpflogic")})}),e.each(function(t,e){Bt(e).each(function(t,e){(e=(e=Bt(e)).is(".cpf-section")?e.find(".cpf-element"):e).each(function(t,e){S(Bt(e).find(".tm-epo-field"))})})}),c.forEach(function(t){t()}),c=[],Bt().selectric&&Bt(".tm-extra-product-options select").selectric("refresh"),setTimeout(function(){Bt(".tm-owl-slider").each(function(){Bt(this).trigger("refresh.owl.carousel")})},200),t.find(".tm-product-image:checked,select.tm-product-image").each(function(){var t=Bt(this);S(t)&&""!==t.val()&&a.push(t)}),a.length&&a[a.length-1].trigger("tm_trigger_product_image"),Lt.trigger("cpflogicrun"),Lt.trigger("tmlazy"),Lt.trigger("cpflogicdone")}function y(t){return"object"==typeof t&&"toggle"in t&&"rules"in t&&0<t.rules.length}function w(t){return t.what&&("all"===t.what?t.rules=[t.rules]:"any"===t.what&&(t.rules=t.rules.reduce(function(t,e){return t.push([e]),t},[])),delete t.what),t}function Q(t){var a,i,o,r,n,c,l,d,s,p,m=Bt(t),t=m.find(".cpf-section"),_=!m.is(".cpf-section")&&t;m.each(function(t,e){(Bt(e).is(".cpf-section")?Bt(e):Bt(e).find(".cpf-section")).filter('[data-haslogic="1"]').each(function(t,e){a=Bt(e),i=w(a.data("logic")),o=parseInt(a.data("haslogic"),10),r=[],p=a.parent().closest(".cpf-type-product"),1===o&&y(i)&&(Bt.each(i.rules,function(a,t){t&&Array.isArray(t)&&(r[a]=[],Bt.each(t,function(t,e){s=e.section,n=e.element,c=e.operator,l=e.value,s=_?p.length?(d=p.find(".cpf-section").filter("[data-uniqid='"+s+"']"),n!==s?d.find(".cpf-element").eq(n):d):(d=_.filter("[data-uniqid='"+s+"']"),n!==s?d.find(".cpf-element:not(.cpf-element .cpf-element)").eq(n):d):n!==s?m.find(".cpf-element").eq(n):d,r[a].push({element:s,operator:c,value:l})}))}),a.data("iscpfdependson")?a.cpfdependson(a.data("cpfdependson-fields"),i.toggle,!0):(a.data("cpfdependson-fields",r),a.cpfdependson(r,i.toggle)))})})}function J(t){var a,o,r,n,c,l,d,s,p,m=Bt(t),t=m.find(".cpf-section").not(".cpf-type-product .cpf-section"),_=!m.is(".cpf-section")&&t;m.find('.cpf-element[data-haslogic="1"]').each(function(t,e){var i=[];a=Bt(e),o=w(a.data("logic")),r=parseInt(a.data("haslogic"),10),p=a.parent().closest(".cpf-type-product"),1===r&&y(o)&&(Bt.each(o.rules,function(a,t){t&&Array.isArray(t)&&(i[a]=[],Bt.each(t,function(t,e){s=e.section,n=e.element,c=e.operator,l=e.value,s=_?p.length?(d=p.find(".cpf-section").filter("[data-uniqid='"+s+"']"),n!==s?d.find(".cpf-element").eq(n):d):(d=_.filter("[data-uniqid='"+s+"']"),n!==s?d.find(".cpf-element:not(.cpf-element .cpf-element)").eq(n):d):n!==s?m.find(".cpf-element").eq(n):d,i[a].push({element:s,operator:c,value:l})}))}),a.data("iscpfdependson")?a.cpfdependson(a.data("cpfdependson-fields"),o.toggle,!0):(a.data("cpfdependson-fields",i),a.cpfdependson(i,o.toggle)))})}function $(t,e,a){var i,o,r;return t=e&&(i=e.attr("data-taxable"),o=e.attr("data-tax-rate"),r=e.attr("data-tax-display-mode"),e=e.attr("data-prices-include-tax"),a||i&&"incl"===r&&"1"!==e)?parseFloat(t)/(1+o/100):t}function p(t,e,a){var i,o,r;return t=e&&(i=e.attr("data-taxable"),o=e.attr("data-tax-rate"),r=e.attr("data-tax-display-mode"),e=e.attr("data-prices-include-tax"),a||i&&"incl"!==r&&"1"===e)?parseFloat(t)*(1+o/100):t}function Z(t,e,a){var i,o,r;if(e&&(i=e.attr("data-taxable"),o=e.attr("data-tax-display-mode"),r=e.attr("data-prices-include-tax"),i)){if(a&&a.tc_tax_rate&&"0"===String(a.tc_tax_rate))return t;"1"===r?"incl"===o?a.tc_base_taxes_of_one!==a.tc_modded_taxes_of_one&&(t=parseFloat((1-a.tc_taxes_of_one)*t*(1/(1-a.tc_base_taxes_of_one)))):t=p(t,e):"1"!==r&&"incl"===o&&(t=$(t,e))}return t}function $t(t,e,a,i,o){var r="",n="";return a||(t=Rt(t,e,o,0,!0)),a=Math.abs(t),e&&i&&(r=e.attr("data-tax-string")),l(a,n=t<0?Ht.minus_sign+" ":n,r=void 0===r?"":r)}function Zt(t,e,a,i){return"excl"===i.attr("data-tax-display-mode")?(a[t]=a[t].replace(/{price_excluding_tax}/g,$t(a[e],i,!0,!1)),a[t]=a[t].replace(/{price_including_tax}/g,$t(p(a[e],i,!0),i,!0,!1))):(a[t]=a[t].replace(/{price_including_tax}/g,$t(a[e],i,!0,!1)),a[t]=a[t].replace(/{price_excluding_tax}/g,$t($(a[e],i,!0),i,!0,!1))),a}function Yt(t,e,a,i,o){N(t,e,a,i,o,!0)}function N(t,e,a,i,o,r){var n,c,l,t=Bt(t);0!==t.length&&(n=t.closest(".tmcp-field-wrap"),l=t.closest(".tc-price-wrap"),c=n.find(".tm-epo-field"),r||"1"!==c.attr("data-no-price-change")||!c.data("price-changed"))&&(e=Bt.epoAPI.applyFilter("tc_adjust_update_price_price",e),a=Bt.epoAPI.applyFilter("tc_adjust_update_price_formated_price",a,e),i=Bt.epoAPI.applyFilter("tc_adjust_update_price_original_price",i),o=Bt.epoAPI.applyFilter("tc_adjust_update_price_original_formated_price",o,i),Number.isFinite(parseFloat(i))||(i=0),Number.isFinite(parseFloat(e))||(e=0),n=n.find(".before-amount,.after-amount"),a={price:a,original_price:o},("yes"!==Ht.tm_epo_auto_hide_price_if_zero||!1!==Bt.tmempty(e))&&"yes"===Ht.tm_epo_auto_hide_price_if_zero||!0===Bt.tmempty(e)&&"1"===c.attr("data-no-price")||!r&&0<c.length&&("1"===c.attr("data-no-price")||"variable"===c.attr("data-type")&&!c.data("price"))?(l.addClass("tm-hidden"),t.addClass("tm-hidden"),t.empty(),n.addClass("tm-hidden")):(i&&void 0!==i&&parseFloat(i)!==parseFloat(e)?t.html(Bt.epoAPI.template.html(Nt.templateEngine.sale_price,{price:a})):t.html(Bt.epoAPI.template.html(Nt.templateEngine.price,{price:a})),l.removeClass("tm-hidden"),t.removeClass("tm-hidden"),n.removeClass("tm-hidden")))}function m(i,l,t){var e,a,d=[],s=(e=i,a={},(e=(t=t).thisForm?t.thisForm:e).find(".variations select, .tc-epo-variable-product-selector").each(function(){var t=void 0!==Bt(this).data("attribute_name")?Bt(this).data("attribute_name"):Bt(this).attr("name"),e=Bt(this).val();a[t]=e}),a),o=!0,t=i.find(Jt(i)).val();("0"!==t&&""!==t||0<i.find(".cpf-type-variations").find(".tm-epo-variation-element:checked").length||i.find(".cpf-type-variations").find('.tm-epo-variation-element option[value!=""]:selected'))&&(i.find(".cpf-type-variations").each(function(r,t){var n,c,t=Bt(t).find(".tm-epo-variation-element"),a=!1;d[r]=!0,t.is("select")?(n=Bt.epoAPI.dom.id(t.attr("data-tm-for-variation")),(c=t.val())&&(d[r]=!1),t.children("option").each(function(t,e){a=!1,i.find("[data-attribute_name='attribute_"+n+"']").children("option").each(function(){if(Bt(this).attr("value")===Bt(e).attr("value"))return!(a=!0)}),a?Bt(e).prop("disabled",!1).show():Bt(e).prop("disabled",!0).hide()})):t.each(function(t,e){var e=Bt(e),a=e.closest("li"),i=a.find(".tm-epo-variation-element"),o=Bt.extend(!0,{},s);n=e.attr("data-tm-for-variation"),c=e.val(),e.is(":checked")&&(d[r]=!1),o["attribute_"+n]=c,(o=(o=Bt.fn.tm_find_matching_variations(l,o).shift())&&"is_in_stock"in o&&o.is_in_stock)?(e.prop("disabled",!1).removeClass("tm-disabled"),a.removeClass("pointereventsoff tm-attribute-disabled").fadeTo("fast",1,function(){Bt(this).css("opacity","")}),i.prop("disabled",!1),i.removeAttr("data-tm-disabled")):(i.is(":checked")||o?a.removeClass("pointereventsoff"):a.addClass("pointereventsoff"),e.attr("disabled","disabled").addClass("tm-disabled"),i.attr("disabled","disabled"),i.attr("data-tm-disabled","disabled"),a.addClass("tm-attribute-disabled").fadeTo("fast",.5))})}),d)&&(d.shift(),Bt.each(d,function(t,e){if(!1===e)return o=!1}),o)&&i.find(".cpf-type-variations").first().each(function(t,e){var a,i,e=Bt(e).find(".tm-epo-variation-element");e.is("select")||e.each(function(t,e){e=Bt(e),a=e.closest("li"),i=a.find(".tm-epo-variation-element"),e.prop("disabled",!1).removeClass("tm-disabled"),a.removeClass("tm-attribute-disabled").stop().css("opacity",""),i.prop("disabled",!1),i.removeAttr("data-tm-disabled")})})}function W(e,a){var t=e.data("product_variations"),i=parseInt(e.data("product_id"),10),o=e.data("globalVariationObject")||!1;!(i=i||e.data("tc_product_id"))&&e.is(Nt.compositeSelector)&&(i=e.find(".component_options").data("options_data")[0].option_id,t=t||e.find(".details.component_data").data("product_variations")),a.is_associated||!(t=!(t=!t&&I.product_variations&&I.product_variations.product_id?I.product_variations.product_id:t)&&I.product_variations?I.product_variations:t)&&I["product_variations_"+i]&&(t=I["product_variations_"+i]),t?m(e,t,a):o?m(e,o.variations,a):Bt.post(Ht.ajax_url,{action:"woocommerce_tm_get_variations_array",post_id:i},function(t){o=t,e.data("globalVariationObject",t),m(e,o.variations,a)},"json")}function X(t,e){var a,i,o,r;"no"!==Ht.tm_epo_global_move_out_of_stock&&((r=(r=t.find(".woocommerce-variation-availability").last()).length?r:t.find(".stock").last()).length?(e.find(".tm-stock").remove(),t=e,void 0!==(a=r.prop("outerHTML"))&&(o=(i=(t=Bt(t)).find(".tm-epo-variation-element").first()).closest(".tm-epo-variation-section"),i.length?(o.find(".tm-stock").remove(),o.append('<div class="tm-stock">'+a+"</div>")):(t.find(".tm-stock").remove(),t.find(".variations").after('<div class="tm-stock">'+a+"</div>")),1)&&r.remove()):e.find(".tm-stock").remove())}function G(t,e,a,i){return a=a||"form",t=t,i=i,o="",(t=0===(t=(e=(e=e)||t).find(Nt.addToCartSelector+(o=i?o+"[value='"+i+"']":o))).length?e.find(Nt.tcAddToCartSelector+o):t).last().closest(a);var o}function V(t,e,a,i){return G(t,e,a,i)}function Wt(t){var e=Bt.epoAPI.applyFilter("tcGetNativePricesBlockSelector",".single_variation .price",t);return Bt(t).find(e).not(".tc-price")}function Kt(t,e){var a,i,o=e.showHideCart;void 0===o||"yes"!==Ht.tm_epo_hide_add_cart_button&&"yes"!==Ht.tm_epo_hide_all_add_cart_button&&"yes"!==Ht.tm_epo_hide_required_add_cart_button||(a=t.find(Nt.addToCartButtonSelector).first(),i=t.find(Nt.qtySelector).first(),o?(a.removeClass("tc-hide-add-to-cart-button"),i.removeClass("tc-hide-add-to-cart-button")):(a.addClass("tc-hide-add-to-cart-button"),i.addClass("tc-hide-add-to-cart-button")),Lt.trigger("epoShowHideCart",{main_product:t,currentEpoObject:e,showHideCart:o,button:a,qty:i}))}function te(t,e,a){var i,o,r=!0,n=!0,c=Bt.tcepo.oneOptionIsSelected[e],l="object"==typeof a?(l=a.has_epo,i=a.this_epo_container,l&&(i.find(".tmcp-fee-field").length||i.find(".tmcp-field").not(".cpf-type-variations .tmcp-field").length)):a;return t.showHideCart=void 0,t.showHideTotal=void 0,!l||"yes"!==Ht.tm_epo_hide_add_cart_button&&"yes"!==Ht.tm_epo_hide_all_add_cart_button&&"yes"!==Ht.tm_epo_hide_required_add_cart_button&&"yes"!==Ht.tm_epo_hide_totals_until_any&&"yes"!==Ht.tm_epo_hide_totals_until_all_required&&"yes"!==Ht.tm_epo_hide_totals_until_all||("yes"===Ht.tm_epo_hide_add_cart_button&&(r=c),"yes"===Ht.tm_epo_hide_totals_until_any&&(n=c),"yes"!==Ht.tm_epo_hide_required_add_cart_button&&"yes"!==Ht.tm_epo_hide_totals_until_all_required||(o=t.this_epo_container.find(".cpf-element").not(".cpf-type-variations").filter(".tc-container-enabled.tc-is-required").toArray().every(function(t){var e,a,i="",o=!1;if((t=Bt(t)).is(".cpf-type-product")&&(i=":not(.tc-extra-product-options-inline .tm-epo-field)"),0<(e=t.attr("class").split(" ").map(function(t){return-1!==t.indexOf("cpf-type-",0)?t:null}).filter(function(t){return null!=t?t:null})).length){switch("cpf-type-product"===(e=e[0])&&(o=!0,e=t.is(".cpf-type-product-mode-product")||t.is(".cpf-type-product-checkbox")||t.is(".cpf-type-product-thumbnailmultiple")?"cpf-type-checkbox":t.is(".cpf-type-product-dropdown")?"cpf-type-select":"cpf-type-radio"),e){case"cpf-type-radio":return 0<t.find("input.tm-epo-field.tmcp-radio:checked"+i).length;case"cpf-type-checkbox":return 0<t.find("input.tm-epo-field.tmcp-checkbox:checked"+i).length;case"cpf-type-select":(a=t.find("select.tm-epo-field.tmcp-select"+i).val())&&!o&&(a=a.slice(0,a.lastIndexOf("_")));break;case"cpf-type-selectmultiple":(a=t.find("select.tm-epo-field.tmcp-selectmultiple"+i).val())&&!o&&a.forEach(function(t,e){a[e]=t.slice(0,t.lastIndexOf("_"))});break;default:a=t.find(".tm-epo-field"+i).val()}return Array.isArray(a)?a.some(function(t){return""!==t}):""!==a}return!1}),"yes"===Ht.tm_epo_hide_required_add_cart_button&&(r=o),"yes"===Ht.tm_epo_hide_totals_until_all_required&&(n=o)),"yes"!==Ht.tm_epo_hide_all_add_cart_button&&"yes"!==Ht.tm_epo_hide_totals_until_all||(o=t.this_epo_container.find(".cpf-element").not(".cpf-type-variations").filter(".tc-container-enabled").toArray().every(function(t){var e,a,i="",o=!1;if((t=Bt(t)).is(".cpf-type-product")&&(i=":not(.tc-extra-product-options-inline .tm-epo-field)"),0<(e=t.attr("class").split(" ").map(function(t){return-1!==t.indexOf("cpf-type-",0)?t:null}).filter(function(t){return null!=t?t:null})).length){switch("cpf-type-product"===(e=e[0])&&(o=!0,e=t.is(".cpf-type-product-mode-product")||t.is(".cpf-type-product-checkbox")||t.is(".cpf-type-product-thumbnailmultiple")?"cpf-type-checkbox":t.is(".cpf-type-product-dropdown")?"cpf-type-select":"cpf-type-radio"),e){case"cpf-type-radio":return 0<t.find("input.tm-epo-field.tmcp-radio:checked"+i).length;case"cpf-type-checkbox":return 0<t.find("input.tm-epo-field.tmcp-checkbox:checked"+i).length;case"cpf-type-select":(a=t.find("select.tm-epo-field.tmcp-select"+i).val())&&!o&&(a=a.slice(0,a.lastIndexOf("_")));break;case"cpf-type-selectmultiple":(a=t.find("select.tm-epo-field.tmcp-selectmultiple"+i).val())&&!o&&a.forEach(function(t,e){a[e]=t.slice(0,t.lastIndexOf("_"))});break;default:a=t.find(".tm-epo-field"+i).val()}return Array.isArray(a)?a.some(function(t){return""!==t}):""!==a}return!1}),"yes"===Ht.tm_epo_hide_all_add_cart_button&&(r=o),"yes"===Ht.tm_epo_hide_totals_until_all&&(n=o)),t.showHideCart=r,t.showHideTotal=n,Bt.tcepo.showHideTotal[e]=n),t}function Y(t,e){var a,i,o,r=Bt.tcepo.errorObject[e]||t;r&&("yes"!==Ht.tm_epo_disable_error_scroll&&(o=(a=r.closest(".cpf-section")).find(".tm-section-link"),i=r.closest(".cpf-element"),a.find(".tm-toggle").length&&a.find(".tm-toggle").trigger("openwrap.tmtoggle"),void 0===I.tc_validation_offset&&(I.tc_validation_offset=-100),a.is(".section_popup")?(q.tcScrollTo(o,300,I.tc_validation_offset),o.trigger("click.tmsectionpoplink")):a.is(".tm-owl-slider-section")?(o=r.closest(".owl-item").index(),a.find(".tcowl-carousel").trigger("to.owl.carousel",[o,100]),setTimeout(function(){a.find(".tcowl-carousel").trigger("refresh.owl.carousel"),0<i.length&&q.tcScrollTo(i,300,I.tc_validation_offset)},200)):0<i.length&&q.tcScrollTo(i,300,I.tc_validation_offset)),t||(Bt.tcepo.errorObject[e]=!1))}function K(t,e){var a,i=parseInt(t.attr("data-limit"),10),o=!1;return!(0<i&&(o=0,t.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){a=Bt(this),a=a.closest("li.tmcp-field-wrap").find("input.tm-qty"),o=0<a.length?((a=parseInt(a.val(),10))<=0&&(a=1),parseInt(o,10)+a):parseInt(o,10)+1}),i<o)&&(e&&t.prop("checked","").trigger("change"),1))}function tt(t,e){var a,i=parseInt(t.attr("data-exactlimit"),10),o=!1;return!(0<i&&(o=0,t.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){a=Bt(this),a=a.closest("li.tmcp-field-wrap").find("input.tm-qty"),o=0<a.length?((a=parseInt(a.val(),10))<=0&&(a=1),parseInt(o,10)+a):parseInt(o,10)+1}),i<o)&&(e&&t.prop("checked","").trigger("change"),1))}function et(d,s,p){Bt.tcepo.formSubmitEvents[p][Bt.tcepo.formSubmitEvents[p].length]={trigger:function(){return t=s,e=p,l=!(c=!0),d.each(function(){n=Bt(this),(r=n.find("[type='checkbox'][data-limit]")).length&&S(r)&&(r=parseInt(r.attr("data-limit"),10),a=0,n.find("input.tm-epo-field[type='checkbox']:checked").each(function(){i=Bt(this),i=i.closest("li.tmcp-field-wrap").find("input.tm-qty"),a=0<i.length?((i=parseInt(i.val(),10))<=0&&(i=1),parseInt(a,10)+i):parseInt(a,10)+1}),o=n.closest(".cpf-element"),o=o.find("div.tm-error-min"),r<a?(c=!1,l=n,r=(1===r?Ht.tm_epo_global_validator_messages.epolimitsingle:Ht.tm_epo_global_validator_messages.epolimit).replace("{0}",r),o.length&&o.remove(),"before"===Ht.tm_epo_global_error_label_placement?n.closest(".tc-element-container").before('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+r+"</div>"):n.closest(".tc-element-container").after('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+r+"</div>"),t.find(Nt.addToCartButtonSelector).first().removeClass("disabled loading fpd-disabled").prop("disabled",!1)):o.remove())}),l&&(Bt.tcepo.errorObject[e]=l),c;var t,e,a,i,o,r,n,c,l},on_true:function(){return!0},on_false:function(){return Y(Bt(d).find(".tm-epo-field").first(),p),!0}}}function at(d,s,p){Bt.tcepo.formSubmitEvents[p][Bt.tcepo.formSubmitEvents[p].length]={trigger:function(){return t=s,e=p,l=!(c=!0),d.each(function(){n=Bt(this),(r=n.find("[type='checkbox'][data-exactlimit]")).length&&S(r)&&(r=parseInt(r.attr("data-exactlimit"),10),a=0,n.find("input.tm-epo-field[type='checkbox']:checked").each(function(){i=Bt(this),i=i.closest("li.tmcp-field-wrap").find("input.tm-qty"),a=0<i.length?((i=parseInt(i.val(),10))<=0&&(i=1),parseInt(a,10)+i):parseInt(a,10)+1}),o=n.closest(".cpf-element"),o=o.find("div.tm-error-min"),r!==a?(c=!1,l=n,r=(1===r?Ht.tm_epo_global_validator_messages.epoexactsingle:Ht.tm_epo_global_validator_messages.epoexact).replace("{0}",r),o.length&&o.remove(),"before"===Ht.tm_epo_global_error_label_placement?n.closest(".tc-element-container").before('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+r+"</div>"):n.closest(".tc-element-container").after('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+r+"</div>"),t.find(Nt.addToCartButtonSelector).first().removeClass("disabled loading fpd-disabled").prop("disabled",!1)):o.remove())}),l&&(Bt.tcepo.errorObject[e]=l),c;var t,e,a,i,o,r,n,c,l},on_true:function(){return!0},on_false:function(){return Y(Bt(d).find(".tm-epo-field").first(),p),!0}}}function it(l,d){Bt.tcepo.formSubmitEvents[d][Bt.tcepo.formSubmitEvents[d].length]={trigger:function(){return t=d,c=!(n=!0),l.each(function(){var t;(t=(r=Bt(this)).find("[type='checkbox'][data-minimumlimit]")).length&&S(t)&&(o=parseInt(t.attr("data-minimumlimit"),10),e=0,r.find("input.tm-epo-field[type='checkbox']:checked").each(function(){a=Bt(this),a=a.closest("li.tmcp-field-wrap").find("input.tm-qty"),e=0<a.length?((a=parseInt(a.val(),10))<=0&&(a=1),parseInt(e,10)+a):parseInt(e,10)+1}),i=r.closest(".cpf-element"),i=i.find("div.tm-error-min"),e<o?(n=!1,c=r,o=(1===o?Ht.tm_epo_global_validator_messages.epominsingle:Ht.tm_epo_global_validator_messages.epomin).replace("{0}",o),i.length&&i.remove(),"before"===Ht.tm_epo_global_error_label_placement?r.closest(".tc-element-container").before('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+o+"</div>"):r.closest(".tc-element-container").after('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+o+"</div>")):i.remove())}),c&&(Bt.tcepo.errorObject[t]=c),n;var t,e,a,i,o,r,n,c},on_true:function(){return!0},on_false:function(){return Y(!1,d),!0}}}function ot(t){return null!==t&&("object"==typeof t&&(t=t[0]),Number.isFinite(parseFloat(t)))?t:0}function H(t,e,a,i){return t=ot(t),t=a?Bt.epoAPI.applyFilter("tc_apply_dpd",t,e,a,i):t}function ee(t,e){var a=0;return 0<t.length&&(a=t.data("regular-price")),a=Bt.epoAPI.applyFilter("tc_calculate_product_regular_price",a,t),(!e||!1!==a)&&(a=parseFloat(a),Number.isFinite(a)?a:0)}function ae(t,e){var a=0;return 0<t.length&&(a=t.data("price")),a=Bt.epoAPI.applyFilter("tc_calculate_product_price",a,t),(!e||!1!==a)&&(a=parseFloat(a),Number.isFinite(a)?a:0)}function rt(e,a,i,o,t,r,n){var c,l,d,s,p,m,_=e.toString(),f=0,e=0,u=a.closest(".cpf-element").attr("data-uniqid"),g=a.closest(".tmcp-ul-wrap"),h=i.this_epo_totals_container.data("totalsHolder_tc_totals_ob"),v=g.find(".tmcp-field, .tmcp-fee-field, .tmcp-sub-fee-field").filter(":checked").index(a),y=g.find(".tmcp-field, .tmcp-fee-field, .tmcp-sub-fee-field").index(a),b=i.is_associated?i.this_epo_container:i.this_epo_container.not(Nt.epoSelector+" "+Nt.associatedEpoSelector),w=Bt.epoAPI.util.parseJSON(Ht.tm_epo_math)||{};-1===v&&a.is(".tmcp-checkbox, .tmcp-radio"),-1!==y||a.is(".tmcp-checkbox, .tmcp-radio")||(y=0),a.is(".tcdisabled")||o||a.data("addedtcEpoBeforeOptionPriceCalculation")||(Lt.on("tcEpoBeforeOptionPriceCalculation.math"+u,function(){Xt(i,a,void 0,void 0,void 0,!0)}),Lt.on("tcEpoAfterOptionPriceCalculation.math"+u,function(){a.data("fetchOptionPrices",!1),a.data("fetchOptionPrices-forced",!1),a.data("fetchOptionPrices-fee",!1),a.data("fetchOptionPrices-fee-forced",!1),a.data("fetchOptionPrices-sub-fee",!1),a.data("fetchOptionPrices-sub-fee-forced",!1)}),a.data("addedtcEpoBeforeOptionPriceCalculation",1)),a.is(".tmcp-field")?a.data("fetchOptionPrices")?(p=a.data("fetchOptionPrices"),m=a.data("fetchOptionPrices-forced")):(p=Gt(i,g,".tmcp-field",0,0,[],!0),m=Gt(i,g,".tmcp-field",0,0,[],!0,!0),a.data("fetchOptionPrices",p),a.data("fetchOptionPrices-forced",m)):a.is(".tmcp-fee-field")?a.data("fetchOptionPrices-fee")?(p=a.data("fetchOptionPrices-fee"),m=a.data("fetchOptionPrices-fee-forced")):(p=Gt(i,g,".tmcp-fee-field",0,0,[],!0),m=Gt(i,g,".tmcp-fee-field",0,0,[],!0,!0),a.data("fetchOptionPrices-fee",p),a.data("fetchOptionPrices-fee-forced",m)):a.is(".tmcp-sub-fee-field")&&(a.data("fetchOptionPrices-sub-fee")?(p=a.data("fetchOptionPrices-sub-fee"),m=a.data("fetchOptionPrices-sub-fee-forced")):(p=Gt(i,g,".tmcp-sub-fee-field",0,0,[],!0),m=Gt(i,g,".tmcp-sub-fee-field",0,0,[],!0,!0),a.data("fetchOptionPrices-sub-fee",p),a.data("fetchOptionPrices-sub-fee-forced",m))),Object.keys(w).forEach(function(t){var e,a;""!==w[t].name&&""!==w[t].value&&(e=w[t].name,a=w[t].value,_=w[t].name.isNumeric()?_.replace("{"+e+"}",a):(e=new RegExp("{"+e+"}","g"),a.startsWith("{")?_.replace(e,a):_.replace(e,Bt.epoAPI.math.unformat(a.replace(",",".")))))}),v=void 0!==h?(_=_.replace(/{quantity}/g,Bt.epoAPI.math.unformat(h.qty)),t&&void 0!==h.original_product_price?Bt.epoAPI.math.unformat(h.original_product_price):Bt.epoAPI.math.unformat(h.product_price)):(_=_.replace(/{quantity}/g,0),0),v=Bt.epoAPI.math.toFloat(v),_=_.replace(/{product_price}/g,v),r=Bt.epoAPI.math.toFloat(r=r||0),_=(_=(_=(_=_.replace(/{options_total}/g,r)).replace(/{product_price_plus_options_total}/g,v+r)).replace(/{cumulative_total}/g,n)).replace(/{product_price_plus_cumulative_total}/g,v+n),(_=(_=void 0!==m.floatingBoxData&&void 0!==m.floatingBoxData[y]?(_="number"===m.floatingBoxData[y].input_type||"hidden"===m.floatingBoxData[y].input_type?_.replace(/{this.value}/g,Bt.epoAPI.math.toFloat(Bt.epoAPI.math.unformat(m.floatingBoxData[y].valueText))):_.replace(/{this.value}/g,Bt.epoAPI.math.toFloat(Bt.epoAPI.math.unformat(m.floatingBoxData[y].valueText,Nt.localDecimalSeparator))),_="number"===m.floatingBoxData[y].input_type||"hidden"===m.floatingBoxData[y].input_type?_.replace(/{this.rawvalue}/g,Bt.epoAPI.math.unformat(m.floatingBoxData[y].valueText)):_.replace(/{this.rawvalue}/g,Bt.epoAPI.math.unformat(m.floatingBoxData[y].valueText,Nt.localDecimalSeparator)),(_="number"===m.floatingBoxData[y].input_type||"hidden"===m.floatingBoxData[y].input_type?_.replace(/{this.text}/g,Bt.epoAPI.math.unformat(m.floatingBoxData[y].valueText)):_.replace(/{this.text}/g,Bt.epoAPI.math.unformat(m.floatingBoxData[y].valueText,Nt.localDecimalSeparator))).replace(/{this.value.length}/g,m.floatingBoxData[y].valueText.length)):_.replace(/{this.value}/g,0).replace(/{this.rawvalue}/g,"").replace(/{this.text}/g,"").replace(/{this.value.length}/g,0)).replace(/{this.count}/g,p.floatingBoxData.length).replace(/{this.count.quantity}/g,p.floatingBoxData.map(function(t){return t.quantity}).reduce(function(t,e){return Bt.epoAPI.math.toFloat(t)+Bt.epoAPI.math.toFloat(e)},0)).replace(/{this.quantity}/g,a.data("tm-quantity"))).match(/\{(\s)*?field\.([^}]*)}/)&&_.match(/\{(\s)*?field\.([^}]*)}/g).forEach(function(t){if(void 0!==(c=t.match(/\{(\s)*?field\.([^}]*)}/))[2]&&"string"==typeof c[2]&&-1!==(l=c[2].indexOf(".",c[2].indexOf(".")+1))&&(s=c[2].substring(0,l),d=c[2].substring(l+1),-1!==Bt.inArray(d,["price","value","value.length","rawvalue","text","text.length","quantity","count","count.quantity"]))){if((l=b.find("[data-uniqid='"+Bt.epoAPI.util.escapeSelector(s)+"']")).length){if(s=(s=l.find(".tmcp-field, .tmcp-fee-field, .tmcp-sub-fee-field")).first(),a.attr("id")!==s.attr("id")&&Xt(i,s,void 0,void 0,void 0,!0),a.is(".tcdisabled")||o||a.data("addedfieldtcEpoBeforeOptionPriceCalculation")||(Lt.on("tcEpoBeforeOptionPriceCalculation.math"+u,function(){Xt(i,a,void 0,void 0,void 0,!0),a.trigger("tm-math-select-change-html-all")}),a.data("addedfieldtcEpoBeforeOptionPriceCalculation",1)),f=0,l.is(".tc-container-enabled")){switch(s.is(".tmcp-field")?f=Gt(i,l,".tmcp-field",0,0,[],!0,void 0,void 0,!0):s.is(".tmcp-fee-field")?f=Gt(i,l,".tmcp-fee-field",0,0,[],!0,void 0,void 0,!0):s.is(".tmcp-sub-fee-field")&&(f=Gt(i,l,".tmcp-sub-fee-field",0,0,[],!0,void 0,void 0,!0)),d){case"price":f=f.total;break;case"value":case"text":case"rawvalue":f.floatingBoxData&&(f=f.floatingBoxData.map(function(t){return"number"===t.input_type||"hidden"===t.input_type?"text"===d||"rawvalue"===d?t.valueText:Bt.epoAPI.math.unformat(t.valueText):"text"===d||"rawvalue"===d?t.valueText:Bt.epoAPI.math.unformat(t.valueText,Nt.localInputDecimalSeparator)}).reduce(function(t,e){return"text"===d||"rawvalue"===d?t+e:Bt.epoAPI.math.toFloat(t)+Bt.epoAPI.math.toFloat(e)},"text"===d||"rawvalue"===d?"":0),"text"!==d&&"rawvalue"!==d||(""===f?f="''":f.toString().isNumeric()||(f="'"+f.replace("'","\\'")+"'")));break;case"value.length":case"text.length":f.floatingBoxData&&(f=f.floatingBoxData.map(function(t){return t.valueText}).reduce(function(t,e){return Bt.epoAPI.math.toFloat(t)+e.length},0));break;case"quantity":case"count.quantity":f.floatingBoxData&&(f=f.floatingBoxData.map(function(t){return t.quantity}).reduce(function(t,e){return Bt.epoAPI.math.toFloat(t)+Bt.epoAPI.math.toFloat(e)},0));break;case"count":f.floatingBoxData&&(f=f.floatingBoxData.length)}"text"!==d&&"rawvalue"!==d&&(f=Bt.epoAPI.math.toFloat(f),Number.isFinite(f)||(f=0))}}else f=0;s=new RegExp(c[0]),_="text"===d||"rawvalue"===d||Number.isFinite(f)?_.replace(s,f):_.replace(s,"'"+f.replace("'","\\'")+"'")}});try{e=D.evaluate(_)}catch(t){e=0}return e}function L(t){for(var e,a=new RegExp(/[\p{L}\d!@#$%^&*()_+=\{[\}\]|\\"':;?/>.<,-]+/,"gu"),i=0;null!==(e=a.exec(t));)e.index===a.lastIndex&&a.lastIndex++,i+=e.length;return i}function Xt(e,t,a,i,o,D,r,n){var c,l,d,s,p,m,_,f,u,g,h,v,y,b,w,x,F,k,C,I,P,A,E,q=Bt(t),t=q,S=q.is(".tmcp-range"),B=e.main_product,T=e.epoEventId,O=!0,j=0,z=0;q.data("associated_price_set")||(a?(c=a.cart,l=a.current_variation,d=a.bundleid,s=a.epoTotalsContainer,m=a.product_price,_=a.product_original_price,p=a.apply_dpd,O=a.per_product_pricing):(void 0!==(c=e.main_cart).data("per_product_pricing")&&(O=c.data("per_product_pricing")),a="input[name^='variation_id']",0<c.find("input.variation_id").length&&(a="input.variation_id"),l=c.find(a).val(),d=Bt.epoAPI.applyFilter("tc_get_bundleid",c.attr("data-product_id"),c,e),l=l||0,s=Bt.epoAPI.applyFilter("tc_get_totals_container",e.this_epo_totals_container,q,B,d),m=ae(s),_=ee(s),p=s.data("fields-price-rules")),m=Bt.epoAPI.applyFilter("tc_alter_product_price",m,q,c,s,d),_=Bt.epoAPI.applyFilter("tc_alter_product_original_price",_,q,c,s),!1!==m&&O&&(q.is("select")&&(t=q.find("option:selected")),(t=i?i:t).toArray().forEach(function(t){switch(t=Bt(t),E=Bt.epoAPI.util.parseJSON(t.attr("data-rules")),y=Bt.epoAPI.util.parseJSON(t.attr("data-rulestype")),void 0===(v=Bt.epoAPI.util.parseJSON(t.attr("data-original-rules")))&&(v=E),u="","object"==typeof E?(h=l in E?(g=E[l],v[l]):(k=Bt.epoAPI.util.parseJSON(q.closest(".tmcp-ul-wrap").attr("data-rules")),I=q.closest(".tmcp-ul-wrap").data("original-rules"),g="object"==typeof k&&l in k?k[l]:E[0],"object"==typeof I&&l in I?I[l]:v[0]),"object"==typeof y?u=l in y?y[l]:"object"==typeof(f=Bt.epoAPI.util.parseJSON(q.closest(".tmcp-ul-wrap").attr("data-rulestype")))&&l in f?f[l]:y[0]:"object"==typeof(y=Bt.epoAPI.util.parseJSON(q.closest(".tmcp-ul-wrap").attr("data-ulestype")))&&(u=l in y?y[l]:y[0])):(k=q.closest(".tmcp-ul-wrap"),E=Bt.epoAPI.util.parseJSON(k.attr("data-rules")),v=Bt.epoAPI.util.parseJSON(k.attr("data-original-rules")),"object"==typeof E&&(g=l in E?E[l]:E[0],h="object"==typeof v?l in v?v[l]:v[0]:g,"object"==typeof y?u=l in y?y[l]:"object"==typeof(f=Bt.epoAPI.util.parseJSON(k.attr("data-rulestype")))&&l in f?f[l]:y[0]:"object"==typeof(y=Bt.epoAPI.util.parseJSON(k.attr("data-rulestype")))&&(u=l in y?y[l]:y[0]))),"object"==typeof u&&(u=u[0]),q.is(".tmcp-fee-field")&&(-1!==Bt.inArray(u,["fee","stepfee","currentstepfee"])&&(u=""),p=0),void 0===o&&(q.is("select")?q.find("option"):t).removeClass("tm-epo-late-field").removeData("tm-price-for-late islate"),"math"!==u&&(g=ot(g),h=ot(h)),I=g,E=h,u){case"":g=H(P=g,s,p);break;case"math":g=rt(g,q,e,D,Bt.epoAPI.applyFilter("tc_use_undiscounted_price",void 0,q,c,s),r,n),g=H(P=g,s,p),h=rt(h,q,e,!0,!0,r,n);break;case"percent_cart_total":C=parseFloat(Ht.cart_total),Number.isFinite(C)||(C=0),P=g/100*C,g=H(g,s,p)/100*C,h=H(h,s,p)/100*C;break;case"percent":P=g/100*m,g=H(g,s,p)/100*m,h=h/100*_;break;case"percentcurrenttotal":Bt.tcepo.lateFieldsPrices[T].push({setter:t,price:g,original_price:h,bundleid:d,pricetype:u}),t.data("tm-price-for-late",g).data("tm-original-price-for-late",h).data("islate",1).addClass("tm-epo-late-field"),h=g=P=0;break;case"fixedcurrenttotal":g=H(g,s,p),Bt.tcepo.lateFieldsPrices[T].push({setter:t,price:g,original_price:h,bundleid:d,pricetype:u}),t.data("tm-price-for-late",g).data("tm-original-price-for-late",h).data("islate",1).addClass("tm-epo-late-field"),h=g=P=0;break;case"word":P=g*L(t.val()),g=H(g,s,p)*L(t.val()),h*=L(t.val());break;case"wordpercent":P=g/100*m*L(t.val()),g=H(g,s,p)/100*m*L(t.val()),h=h/100*_*L(t.val());break;case"wordnon":F=parseInt(t.attr("data-freechars"),10),Number.isFinite(F)||(F=0),x=L(t.val())-F,P=g*(x=x<0?0:x),g=H(g,s,p)*x,h*=x;break;case"wordpercentnon":F=parseInt(t.attr("data-freechars"),10),Number.isFinite(F)||(F=0),x=L(t.val())-F,P=g/100*m*(x=x<0?0:x),g=H(g,s,p)/100*m*x,h=h/100*_*x;break;case"char":P=g*t.val().length,g=H(g,s,p)*t.val().length,h*=t.val().length;break;case"charpercent":P=g/100*m*t.val().length,g=H(g,s,p)/100*m*t.val().length,h=h/100*_*t.val().length;break;case"charnospaces":P=g*t.val().replace(/\s/g,"").length,g=H(g,s,p)*t.val().replace(/\s/g,"").length,h*=t.val().replace(/\s/g,"").length;break;case"charnofirst":x=t.val().length-1,P=g*(x=x<0?0:x),g=H(g,s,p)*x,h*=x;break;case"charnon":F=parseInt(t.attr("data-freechars"),10),Number.isFinite(F)||(F=0),x=t.val().length-F,P=g*(x=x<0?0:x),g=H(g,s,p)*x,h*=x;break;case"charpercentnon":F=parseInt(t.attr("data-freechars"),10),Number.isFinite(F)||(F=0),x=t.val().length-F,P=g/100*m*(x=x<0?0:x),g=H(g,s,p)/100*m*x,h=h/100*_*x;break;case"charnonnospaces":F=parseInt(t.attr("data-freechars"),10),Number.isFinite(F)||(F=0),x=t.val().replace(/\s/g,"").length-F,P=g*(x=x<0?0:x),g=H(g,s,p)*x,h*=x;break;case"charpercentnonnospaces":F=parseInt(t.attr("data-freechars"),10),Number.isFinite(F)||(F=0),x=t.val().replace(/\s/g,"").length-F,P=g/100*m*(x=x<0?0:x),g=H(g,s,p)/100*m*x,h=h/100*_*x;break;case"charpercentnofirst":x=t.val().length-1,P=g/100*m*(x=x<0?0:x),g=H(g,s,p)/100*m*x,h=h/100*_*x;break;case"step":g=S?(P=g*t.val(),H(g,s,p)*t.val()):(P=g*Bt.epoAPI.math.toFloat(t.val()),H(g,s,p)*Bt.epoAPI.math.toFloat(t.val())),h*=Bt.epoAPI.math.toFloat(t.val());break;case"currentstep":h=S?(P=t.val(),g=H(t.val(),s,p),H(t.val(),s,p)):(P=Bt.epoAPI.math.toFloat(t.val()),g=H(Bt.epoAPI.math.toFloat(t.val()),s,p),H(Bt.epoAPI.math.toFloat(t.val()),s,p));break;case"intervalstep":S&&(C=parseFloat(Bt('.tm-range-picker[data-field-id="'+t.attr("id")+'"]').attr("data-min")),P=g*(t.val()-C),g=H(g,s,p)*(t.val()-C),h*=t.val()-C);break;case"row":P=g*((t.val().match(/(\r\n|\n|\r)/gm)||[]).length+1),g=H(g,s,p)*((t.val().match(/(\r\n|\n|\r)/gm)||[]).length+1),h*=(t.val().match(/(\r\n|\n|\r)/gm)||[]).length+1}v=g,I=P,E=A=y=h,q.data("tm-quantity")&&(P*=parseFloat(q.data("tm-quantity")),A*=parseFloat(q.data("tm-quantity")),I*=parseFloat(q.data("tm-quantity")),E*=parseFloat(q.data("tm-quantity")),g*=parseFloat(q.data("tm-quantity")),h*=parseFloat(q.data("tm-quantity")),v*=parseFloat(q.data("tm-quantity")),y*=parseFloat(q.data("tm-quantity"))),j+=parseFloat(g),z+=parseFloat(h),b=Qt(j,s,!1,!1,t),w=Qt(z,s,!1,!1,t),q.data("price_set",1),t.data("price_set",1),t.data("undiscounted_raw_price",I),t.data("undiscounted_raw_original_price",E),t.data("undiscounted_price",Rt(P,s,t)),t.data("undiscounted_original_price",Rt(A,s,t)),t.data("raw_price",v),t.data("raw_original_price",y),t.data("price",Rt(g,s,t)),t.data("original_price",Rt(h,s,t)),i||(q.is(".tc-epo-field-product")&&(E=!1,!q.is("select")&&(q.is(":checkbox")||q.is(":radio"))?q.is(":checked")&&(E=!0):""!==q.val()&&(E=!0),E||(b=t.data("price-html"),w="")),N(t.closest(".tmcp-field-wrap").find(".tc-price"),j,b,z,w),q.data("price-changed",1))})))}function ie(a,t){var e,i,o,r,n,c,l,d,s,p,m,_,f,u,g=!0,h=a.main_product,v=a.epoEventId,y=a.this_epo_container,b=a.this_epo_totals_container,t=t||h.find(".cart");t.length<=0||(Bt.tcepo.lateFieldsPrices[v]=[],t.toArray().forEach(function(t){if(t=Bt(t),_="input[name^='variation_id']",0<t.find("input.variation_id").length&&(_="input.variation_id"),void 0!==t.data("per_product_pricing")&&(g=t.data("per_product_pricing")),e=t.find(_).val(),_=Bt.epoAPI.applyFilter("tc_get_bundleid",t.attr("data-product_id"),t,a),e=e||0,i=Bt.epoAPI.applyFilter("tc_get_epo_container",y,t,h,_),o=Bt.epoAPI.applyFilter("tc_get_totals_container",b,t,h,_),r=o.data("fields-price-rules"),i.data("tm_rules_init_done")||(o.data("force-quantity")&&t.find(Nt.qtySelector).val(o.data("force-quantity")),i.toArray().forEach(function(t){Bt(t).closest(".tmcp-field-wrap").find(".tm-epo-field").data("tm-quantity",Bt(t).val())}),i.find(".tmcp-attributes, .tmcp-elements").toArray().forEach(function(t){t=Bt(t),n=Bt.epoAPI.util.parseJSON(t.attr("data-rules")),"object"!=typeof(c=Bt.epoAPI.util.parseJSON(t.attr("data-original-rules")))&&(c={0:"0"}),"object"==typeof(n="object"!=typeof n?{0:"0"}:n)&&(l=H(n[Bt.epoAPI.math.toFloat(e)],o,r),d=Qt(l,o),s=H(c[Bt.epoAPI.math.toFloat(e)],o,r),p=Qt(s,o),t.find(".tmcp-field, .tmcp-fee-field ").toArray().forEach(function(t){t=Bt(t),g?("1"===t.attr("data-no-price")&&(s=l=0),t.data("raw_price",l),t.data("raw_original_price",s),t.data("price",Rt(l,o,t)),t.data("original_price",Rt(s,o,t)),N(t.closest(".tmcp-field-wrap").find(".tc-price"),l,d,s,p)):(t.data("price",0),t.data("original_price",0),t.closest(".tmcp-field-wrap").find(".amount").empty())}))}),i.data("tm_rules_init_done",1)),!g)return!0;f=ae(o),m=ee(o),u={cart:t,current_variation:e,bundleid:_,epoTotalsContainer:o,product_price:f,product_original_price:m,apply_dpd:r,per_product_pricing:g},_=i.find(".tmcp-field,.tmcp-sub-fee-field,.tmcp-fee-field"),a.is_associated||(_=_.not(Nt.associatedEpoSelector+" .tmcp-field,"+Nt.associatedEpoSelector+" .tmcp-sub-fee-field,"+Nt.associatedEpoSelector+" .tmcp-fee-field")),f=_.filter(".tcenabled"),(!Bt.tcepo.initialActivation[v]||0===f.length&&0<_.length)&&(_.each(function(){S(Bt(this))}),Bt.tcepo.initialActivation[v]=!0),_.filter(".tcenabled").each(function(t,e){Xt(a,e,u)}),_.each(function(t,e){Bt(e).on("tc_element_epo_rules",function(){Xt(a,e,u)})})}))}function oe(e,t,a,i,o,r,n,c){var l,d,s,p,m,_,f,u,g,h,v,y,b=0,w=0,x=0,F=0,k=e.epoEventId,C=void 0!==c?c:e.this_epo_totals_container.data("fields-price-rules"),I=t,P=a;return Bt.tcepo.lateFieldsPrices[k].forEach(function(t){l=t.price,d=t.original_price,s=t.pricetype,p=t.setter,v=t.bundleid,y="percentcurrenttotal"===s?"_hidden":"_hiddenfixed",(_=p).is("option")&&(_=p.closest("select")),I=parseFloat(Bt.epoAPI.applyFilter("tc_alter_product_price",I,_,n,e.this_epo_totals_container,r)),P=parseFloat(Bt.epoAPI.applyFilter("tc_alter_original_product_price",P,_,n,e.this_epo_totals_container,r)),m=Bt.epoAPI.dom.id(_.attr("name")),f=Bt(".tc-totals-form.tm-totals-form-"+n.attr("data-cart-id")).attr("data-product-id"),h=Bt(".tc-totals-form.tm-totals-form-"+n.attr("data-cart-id")).attr("data-epo-id"),f=Bt(".tc-extra-product-options.tm-product-id-"+f+"[data-epo-id='"+h+"']").find("#"+m+y),v===r?("percentcurrenttotal"===s?(l=parseFloat(l)/100*(H(parseFloat(I),e.this_epo_totals_container,C)+parseFloat(i)),d=parseFloat(d)/100*(parseFloat(P)+parseFloat(o))):"fixedcurrenttotal"===s&&(l=parseFloat(l)+parseFloat(i),d=parseFloat(d)+parseFloat(o)),_.data("tm-quantity")&&(l*=parseFloat(_.data("tm-quantity")),d*=parseFloat(_.data("tm-quantity"))),1===p.data("isset")&&S(p)&&(_.is(".tmcp-field")?(b+=l,w+=d):_.is(".tmcp-fee-field")&&(x+=l,F+=d)),h=Rt(l,n,p),v=Rt(d,n,p),u=Qt(l,n,!1,!1,p),g=Qt(d,n,!1,!1,p),p.data("price",h),p.data("pricew",h),p.data("original_price",v),p.data("original_pricew",v),N(p.closest(".tmcp-field-wrap").find(".tc-price"),h,u,v,g),0===f.length&&_.before('<input type="hidden" id="'+m+y+'" name="'+m+y+'" value="'+$(l,n)+'">'),p.is(".tm-epo-field.tmcp-radio")&&!p.is(":checked")||f.val($(l,n))):void 0!==p.data("pricew")&&(u=Qt(p.data("pricew"),n,!0,!1,p),g="",void 0!==p.data("original_pricew")&&(g=Qt(p.data("original_pricew"),n,!0,!1,p)),N(p.closest(".tmcp-field-wrap").find(".tc-price"),p.data("pricew"),u,p.data("original_pricew"),g))}),{normal:[b,w],fees:[x,F]}}function nt(){var t;"yes"!==Ht.tm_epo_no_lazy_load&&((t=g?Bt(g).find("img.tmlazy"):Bt(".tc-extra-product-options img.tmlazy")).lazyLoadXT(),t.on("lazyshow",function(){Lt.trigger("lazyLoadXToncomplete")}))}function ct(t){var e,a;t&&(a=Bt(".cart"),t.find(".tm-owl-slider-section").each(function(){(e=Bt(this)).find(".tc-slider-content").addClass("tm-owl-slider"),(e=e.find(".tm-owl-slider")).addClass("tcowl-carousel-show").addClass("tcowl-carousel").on("changed.owl.carousel",function(){a.css("display","block").addClass("slider-setup")}).tmowlCarousel(Object.assign({rtl:"1"===Ht.isRTL,dots:!1,nav:!0,items:1,autoHeight:!0,mouseDrag:!1,touchDrag:!0,navText:[Ht.i18n_prev_text,Ht.i18n_next_text],navClass:["owl-prev button","owl-next button"],navElement:"a",loop:!1,navRewind:!1},I.tmowlCarouselSettings||{})),e.removeClass("tcowl-carousel-show")}),Bt.fn.tcTabs)&&t.find(".tc-tabs").tcTabs({headers:"tc-tab-headers",header:"tab-header",dataopenattribute:"data-tab",sortabletabs:!1})}function lt(a,t){var e=t.closest(".cpf-element").data("repeater-max-rows"),i=t.find(".tc-repeater-element"),o=i.length,r=i.last(),i=i.last().find(".tmcp-ul-wrap"),n=a.data("tc-repeater-id"),c=a.data("tc-repeater-init");return!(e&&e<=o)&&(e<=o+1&&a.is(".tc-repeater-add")&&a.closest(".tc-repeater-wrap").addClass("tc-hidden"),i.is(".tm-element-ul-date, .tm-element-ul-time")&&(i.find(".tm-epo-field").tm_datepicker("destroy"),i.find(".tmcp-date-select").off()),i.is(".tm-element-ul-color")&&i.find(".tm-epo-field").spectrum("destroy"),(e=r.tcClone(!0)).find(".tm-epo-field").attr("id",function(t,e){return e.replace(/\_\d+$/g,"")+"_"+c}),e.find("[data-for]").attr("data-for",function(t,e){return e.replace(/\_\d+$/g,"")+"_"+c}),e.find("[for]").attr("for",function(t,e){return e.replace(/\_\d+$/g,"")+"_"+c}),e.find("[data-field-id]").attr("data-field-id",function(t,e){return e.replace(/\_\d+$/g,"")+"_"+c}),e.find("[data-tm-date]").attr("data-tm-date",function(){return n+"_"+c}),e.find(".tm-epo-field").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+c+"]")}),e.find(".tm-qty").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+c+"]")}),e.find(".tmcp-date-select").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+c+"]")}),e.find(".tmcp-date-select").attr("id",function(t,e){return n+"_"+c+"_"+e.substring(e.lastIndexOf("_")+1)}),o=e.find(".tmcp-ul-wrap"),0<t.find(".tc-repeater-element").length&&(t.find(".tc-repeater-delete").removeClass("tc-hidden"),e.find(".tc-repeater-delete").removeClass("tc-hidden")),o.is(".tm-element-ul-checkbox")?(e.find("li.tmcp-field-wrap").removeClass("tc-active"),e.find(".tm-epo-field.tmcp-checkbox").prop("checked",!1),e.find(".tm-epo-field.tmcp-checkbox").filter(function(t,e){return-1!==Bt.inArray(Bt(e).val(),a.data("repeater-init-value"))}).prop("checked",!0).closest("li.tmcp-field-wrap").addClass("tc-active")):o.is(".tm-element-ul-radio")?(e.find("li.tmcp-field-wrap").removeClass("tc-active"),e.find(".tm-epo-field.tmcp-radio").filter(function(t,e){return Bt(e).val()===a.data("repeater-init-value")}).prop("checked",!0).closest("li.tmcp-field-wrap").addClass("tc-active")):e.find(".tm-epo-field").val(a.data("repeater-init-value")),o.is(".tm-element-ul-checkbox")||o.is(".tm-element-ul-radio")||e.find(".tm-epo-field").val(a.data("repeater-init-value")),a.data("tc-repeater-init",a.data("tc-repeater-init")+1),[e,r,i])}function dt(i,t,e,a,o){var r=t.find(".tmcp-ul-wrap");r.is(".tm-element-ul-range")&&(t.find(".tm-range-picker").removeData("tc-picker-init").attr("class","tm-range-picker").html(""),wt(t)),r.is(".tm-element-ul-date, .tm-element-ul-time")&&(kt(a),kt(r)),r.is(".tm-element-ul-color")&&(mt(a),mt(r)),t.find(".tm-tooltip").removeData("tctooltip").removeData("tm-has-tm-tip"),Bt.tcToolTip(t.find(".tm-tooltip")),t.find(".tm-epo-field").removeData("addedtcEpoBeforeOptionPriceCalculation").each(function(t,e){var a=Bt(e);S(a,!1,!0),a.is(".tcenabled")&&Xt(i,a),a.on("tc_element_epo_rules",function(){Xt(i,a)})}),o&&(r.is(".tm-element-ul-checkbox")?t.find(".tm-epo-field.tmcp-checkbox").filter(":checked"):r.is(".tm-element-ul-radio")?t.find(".tm-epo-field.tmcp-radio").filter(":checked"):t.find(".tm-epo-field")).trigger("change.cpf")}function st(t,e,a,i){var o=t.closest(".cpf-element").data("repeater-min-rows"),r=t.find(".tc-repeater-element").length,n=e.index();o&&r<=o?i&&(o='<div class="tm-error-repeater tm-error tc-cell tcwidth tcwidth-100">'+Bt.tc_validator.messages.repeaterminrows(o)+"</div>",i.tcToolTip({tip:o,onetime:!0,trigger:!0,tipclass:"tc-error"})):1!==r&&(2===r&&t.find(".tc-repeater-delete").addClass("tc-hidden"),a.is(".tc-repeater-add")&&a.closest(".tc-repeater-wrap").removeClass("tc-hidden"),e.remove(),a.data("tc-repeater-init",a.data("tc-repeater-init")-1),n+1!==r)&&t.find(".tc-repeater-element").toArray().forEach(function(t,a){(t=Bt(t)).find(".tm-epo-field").attr("id",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find("[data-for]").attr("data-for",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find("[for]").attr("for",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find("[data-field-id]").attr("data-field-id",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find("[data-tm-date]").attr("data-tm-date",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find(".tm-epo-field").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+a+"]")}),t.find(".tm-qty").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+a+"]")}),t.find(".tmcp-date-select").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+a+"]")})})}function pt(_,f){var u,g,h;_&&(_=Bt(_)).length&&(u=f.main_cart,g=Vt(u),g=Bt.epoAPI.applyFilter("qtyElementForRepeaterQuantity",g,{epo:f,currentCart:u,obj:_,qtyElement:g}),(h=_.find(".tc-repeater-quantity")).toArray().forEach(function(t,p){var e,m=Bt(t);m.data("tc-repeater-init")||(e=(t=m.find(".tc-repeater-element")).length,(t=t.first().find(".tm-epo-field")).is(":checkbox")?m.data("repeater-init-value",t.filter(":checked").toArray().map(function(t){return Bt(t).val()})):t.is(":radio")?m.data("repeater-init-value",t.filter(":checked").val()):m.data("repeater-init-value",t.val()),m.data("tc-repeater-init",e),m.data("tc-repeater-id",t.attr("id")),m.data("tc-repeater-name",t.attr("name")),g.length&&(g.off("change.r"+p+"cpf input.r"+p+"cpf").on("change.r"+p+"cpf input.r"+p+"cpf",function(t){var e,a,i,o,r,n,c=Bt(this),l=c.data("tm-prev-value"),d=Bt.epoAPI.applyFilter("qtyElementForRepeaterQuantityValue",c.val(),{epo:f,currentCart:u,obj:_,qtyElement:g,field:c}),s=d-l;if(void 0===l&&(s=d-(l=d-1)),0!==(s=void 0!==t.isTrigger?d-(l=m.find(".tc-element-inner-wrap").find(".tc-repeater-element").length):s)){if(e=m.find(".tc-element-inner-wrap"),(t=Bt.epoAPI.applyFilter("qtyElementForRepeaterQuantity_tm-prev-value",c.val(),{epo:f,currentCart:u,obj:_,qtyElement:g,field:c}))<=0&&(t=1),p===h.length&&c.data("tm-prev-value",t),0<s){if((a=e.find(".tc-repeater-element").eq(d-1)).length)return;for(i=0;i<s;i++)(r=lt(m,e))&&(o=o?o.add(r[0]):r[0],0===i)&&(r[1],n=r[2]);o&&(o.appendTo(e.find(".tc-element-container")),dt(f,o,0,n))}else for(i=d-s;d<i;--i)a=e.find(".tc-repeater-element").eq(i-1),st(e,a,m);u.trigger({type:"tm-epo-update",norules:2})}}),g.data("tm-prev-value",Bt.epoAPI.applyFilter("qtyElementForRepeaterQuantityValue",g.val(),{epo:f,currentCart:u,obj:_,qtyElement:g,field:g})).trigger("change")))}),_.find(".tc-repeater-add").toArray().forEach(function(t){var e,a,i=Bt(t);i.data("tc-repeater-init")||(a=(t=(e=i.closest(".tc-element-inner-wrap")).find(".tc-repeater-element")).length,t=t.first().find(".tm-epo-field"),1<e.find(".tc-repeater-element").length&&e.find(".tc-repeater-delete").removeClass("tc-hidden"),t.is(":checkbox")?i.data("repeater-init-value",t.filter(":checked").toArray().map(function(t){return Bt(t).val()})):t.is(":radio")?i.data("repeater-init-value",t.filter(":checked").val()):i.data("repeater-init-value",t.val()),i.data("tc-repeater-init",a),i.data("tc-repeater-id",t.attr("id")),i.data("tc-repeater-name",t.attr("name")),i.on("click.repeater",function(){var t=lt(i,e);t&&(t[0].appendTo(e.find(".tc-element-container")),dt(f,t[0],t[1],t[2],!0))}))}),_.find(".tc-repeater-delete .delete").on("click",function(){var t=Bt(this),e=t.closest(".tc-element-inner-wrap");st(e,t.closest(".tc-repeater-element"),e.find(".tc-repeater-add"),t)}))}function mt(t){t&&(t=Bt(t).find(".tm-color-picker")).length&&(t.spectrum({type:"color",theme:"epo",showButtons:!0,allowEmpty:!0,showInitial:!0,showInput:!0,clickoutFiresChange:!1,chooseText:Ht.closeText,cancelText:Ht.i18n_cancel}),t.spectrum("enable"))}function _t(t){t&&Bt(t).length&&Bt(function(){Bt(t).tclightbox()})}function ft(t){var e=t.closest(".tmcp-field-wrap").find("label img"),a=Bt(e).first().attr("data-original");return t.is("select.tm-product-image")&&(t=t.children("option:selected")),a=(a=a||Bt(e).first().attr("src"))||t.attr("data-image"),!(t.attr("data-imagep")?!t.attr("data-imagep"):!a)}function ut(t){var i,o,r,n,t=t.is_associated?t.this_epo_container.find(".tm-epo-field.tmcp-upload"):t.this_epo_container.find(".tm-epo-field.tmcp-upload").not(Nt.epoSelector+" "+Nt.associatedEpoSelector+" .tm-epo-field.tmcp-upload");try{t.not(Nt.epoSelector+" "+Nt.associatedEpoSelector+" .tm-epo-field.tmcp-upload").toArray().forEach(function(t){var e,a;return n=[],""!==(i=Bt(t)).attr("data-file")&&0!==(e=i.attr("data-file").split("|")).length&&((k||C)&&(o=new k("").clipboardData||new C),e.forEach(function(t){a=Bt.epoAPI.util.basename(t),(k||C)&&o.items.add(new File([t],a)),n.push(t)}),o&&(t.files=o.files),n=n.join("|"),r=i.attr("name"),i.trigger("tcupload"),i.after('<input type="hidden" class="tmcp-upload-hidden" name="'+r+'" value="'+n+'">'),void i.removeAttr("data-file"))})}catch(t){I.console.log(t),Bt(".tm-epo-field.tmcp-upload").not(".tm-multiple-file-upload").addClass("tc-nodt"),b=t}}function gt(t,e,a){var i=a.find(".flex-control-nav li:eq(0) img"),a=a.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),o=e,e=e.closest("a"),r=e.next(".zoomImg");t&&t.image_link&&t.image_link&&1<t.image_link.length?(null!==t.full_src&&""!==t.full_src||(t.full_src=t.image_link),null!==t.full_src_w&&""!==t.full_src_w||(t.full_src_w=o.attr("data-large_image_width")),null!==t.full_src_h&&""!==t.full_src_h||(t.full_src_h=o.attr("data-large_image_height")),o.length&&(t.image_srcset||(t.image_sizes=!1),t.image_sizes||(t.image_srcset=!1),o.tc_set_attr("src",t.image_link,0),o.tc_set_attr("srcset",t.image_srcset,0),o.tc_set_attr("sizes",t.image_sizes,0),o.tc_set_attr("title",t.image_title,0),o.tc_set_attr("alt",t.image_alt,0),o.tc_set_attr("data-src",t.full_src,0),o.tc_set_attr("data-large_image",t.full_src,0),o.tc_set_attr("data-large_image_width",t.full_src_w,0),o.tc_set_attr("data-large_image_height",t.full_src_h,0),a.tc_set_attr("data-thumb",t.image_link,1)),i.length&&i.tc_set_attr("src",t.image_link,2),e.length&&(e.tc_set_attr("href",t.full_src,3),e.tc_set_attr("title",t.image_caption,3)),r.length&&r.tc_set_attr("src",t.full_src,4)):(o.length&&(o.tc_reset_attr("src",0),o.tc_reset_attr("srcset",0),o.tc_reset_attr("sizes",0),o.tc_reset_attr("title",0),o.tc_reset_attr("alt",0),o.tc_reset_attr("data-src",0),o.tc_reset_attr("data-large_image",0),o.tc_reset_attr("data-large_image_width",0),o.tc_reset_attr("data-large_image_height",0),a.tc_reset_attr("data-thumb",1)),i.length&&i.tc_reset_attr("src",2),e.length&&(e.tc_reset_attr("href",3),e.tc_reset_attr("title",3)),r.length&&r.tc_reset_attr("src",4))}function O(t,e){var a;return t.is_associated?a=e.find(".tc-product-image .wp-post-image").first():""!==Ht.tm_epo_global_product_image_selector?a=Bt(Ht.tm_epo_global_product_image_selector):0===(a=0===(a=0===(a=0===(a=0===(a=e.find(".woocommerce-product-gallery__image:not(.clone), .woocommerce-product-gallery__image--placeholder:not(.clone)").eq(0).find(".wp-post-image").first()).length?e.find("a.woocommerce-main-image img, img.woocommerce-main-image,a img").not(".thumbnails img,.product_list_widget img").first():a).length?e.find("img.wp-post-image").not(".thumbnails img,.product_list_widget img").first():a).length?e.find(".elementor-widget-wd_single_product_gallery img.wp-post-image").first():a).length?e.find(".elementor-widget-ae-post-image .wp-post-image").first():a).length&&(a=Bt(".woocommerce div.product div.images").not(".thumbnails img,.product_list_widget img").first()),a=1<Bt(a).length?Bt(a).first():a}function ht(t){var e,a;return t.is_associated?t.main_product.closest(".tc-epo-element-product-container"):(e=t.main_product,t=t.product_id,(a=e.closest("#product-"+t)).length<=0?e.closest(".post-"+t):a)}function z(t,e,a,i,o,r,n){var c,l,d,s;for(c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&(c=t[c]).enabled)switch(c.type){case"yith":e?(e.attr("srcset",a).attr("src-orig",a),c.element.data("yith_magnifier")&&c.element.yith_magnifier("destroy"),l={elements:{zoom:Bt(".yith_magnifier_zoom"),zoomImage:e,gallery:Bt(".yith_magnifier_gallery li a")}},c.element.yith_magnifier(Bt.extend(!0,{},I.yith_magnifier_options,l))):(i?c.yith_wcmg_zoom.attr("href",c.yith_wcmg_default_zoom):c.yith_wcmg_zoom.attr("href",c._yith_wcmg_default_zoom),c.element.data("yith_magnifier")&&c.element.yith_magnifier("destroy"),c.element.yith_magnifier(I.yith_magnifier_options));break;case"iosslider":setTimeout(function(t){t.element.iosSlider("update")}.bind(null,c),150);break;case"flexslider":Lt.trigger("resize");break;case"elevatezoom":c.element.each(function(t,e){e=e(this).data("elevateZoom");void 0!==e&&e.swaptheimage(t,t)}.bind(null,a,Bt));break;case"easyzoom":c.element.swap(null,a);break;case"easyzoom-flatsome":c.element.swap(a,a);break;case"woocommerce":c.element.flexslider(0),l=c.element,I.setTimeout(function(t,e){t.trigger("woocommerce_gallery_init_zoom"),e.trigger("resize")}.bind(null,l,Lt),10);break;case"zoom":n&&(s=n.find(".woocommerce-product-gallery--with-images").width(),d=!1,(d=c.element.find("img.wp-post-image").attr("data-large_image_width")>s?!0:d)?(s={touch:!1},"ontouchstart"in I&&(s.on="click"),c.element.trigger("zoom.destroy"),c.element.zoom(s)):c.element.trigger("zoom.destroy"))}Lt.trigger("tm_gallery_compatibility_actions",{event_data:o,product_element:n,form:r})}function vt(t,e,a){var i,o,r,n,c,l,d,s,p,m,_,f,u,g,h,v,y,b,w;return t.is_associated?{}:(t=!1,i=Bt(".images"),o=Bt(".yith_magnifier_zoom"),r=i.find(".yith_magnifier_zoom").first().attr("href"),n=i.find(".yith_magnifier_zoom img").first().attr("src"),c=!1,l=Bt(".iosSlider.product-gallery-slider,.iosSlider.product-slider"),d=!1,s=a.find(".images .fusion-flexslider"),p=e.data("elevateZoom")||!1,m=a.find("div.product-images .woocommerce-main-image"),_=!1,f=a.find(".images .easyzoom"),u=!1,g=a.find(".images .easyzoom"),h=!1,v=a.find(".woocommerce-product-gallery"),y=I.wc_single_product_params,b="function"==typeof Bt.fn.zoom&&y&&y.zoom_enabled,w=!1,I.yith_magnifier_options&&i.data("yith_magnifier")&&(t=!0),l.length&&l.iosSlider&&(c=!0),s.length&&s.flexslider&&(d=!0),f.length&&f.filter(".images .easyzoom.first").data("easyZoom")&&(f=f.filter(".images .easyzoom.first").data("easyZoom"),_=!0),_||(g=a.find(".images .has-image-zoom .slide")).length&&g.filter(".images .has-image-zoom .slide.first").data("easyZoom")&&(g=g.filter(".images .has-image-zoom .slide.first").data("easyZoom"),u=!0),"complete"===F.readyState?setTimeout(function(){f.length&&f.data("easyZoom")&&(f=f.data("easyZoom"),_=!0),g.length&&g.data("easyZoom")&&(g=g.data("easyZoom"),u=!0)},150):Lt.on("load",function(){setTimeout(function(){f.length&&f.data("easyZoom")&&(f=f.data("easyZoom"),_=!0),g.length&&g.data("easyZoom")&&(g=g.data("easyZoom"),u=!0)},150)}),v.length&&v.data("flexslider")&&(h=!0,"function"==typeof Bt.fn.zoom)&&y&&y.zoom_enabled&&0<(y=e.closest(".woocommerce-product-gallery__image")).length&&e.width()>Bt(".woocommerce-product-gallery").width()&&(e.data.wc27_zoom_target=y),!h&&b&&(w=a.find(".woocommerce-product-gallery__image")),{is_yith_wcmg:{type:"yith",enabled:t,element:i,yith_wcmg_zoom:o,_yith_wcmg_default_zoom:r,yith_wcmg_default_image:n},is_iosSlider:{type:"iosslider",enabled:c,element:l},is_flexslider:{type:"flexslider",enabled:d,element:s},is_elevateZoom:{type:"elevatezoom",enabled:p,element:m},is_easyzoom:{type:"easyzoom",enabled:_,element:f},is_easyzoom_flatsome:{type:"easyzoom-flatsome",enabled:u,element:g},is_wc27_gallery:{type:"woocommerce",enabled:h,element:v},is_zoom_enabled:{type:"zoom",enabled:!h&&b,element:w}})}function yt(n){var c,a,i,o,r,t,l=n.is_associated?n.this_epo_container:n.this_epo_container.not(Nt.epoSelector+" "+Nt.associatedEpoSelector),d=n.variations_form,e=n.main_product,s=n.form,p=ht(n),m=[],_=n.is_associated?"tc_":"",f=O(n,p),u=vt(n,f,p);0<Bt(f).length&&(s.on(_+"reset_image.tcpi",function(){setTimeout(function(){"yes"===Ht.tm_epo_global_image_recalculate&&(f=O(n,p),Bt.tc_product_image_store=t),Bt.tc_product_image=Bt.tc_replace_object_values(Bt.tc_product_image,Bt.tc_product_image_store),m=[],Bt(l.find(".tm-product-image:checked,select.tm-product-image")).add(d.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){S(c=Bt(this))&&""!==c.val()&&m.push(c)}),m.length?m[m.length-1].trigger("tm_trigger_product_image"):Bt.tc_product_image_store=Bt.tc_populate_store(f,p)},I.tc_epo_product_image_change_delay||0)}),s.on(_+"found_variation.tcpi",function(){setTimeout(function(){var t,e,a,i,o,r;"yes"===Ht.tm_epo_global_image_recalculate&&(f=O(n,p)),a=f,t=(i=p).find(".flex-control-nav li:eq(0) img"),r=i.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),e=(o=a).closest("a"),Bt.isEmptyObject(Bt.tc_product_image)?Bt.tc_product_image_store=Bt.tc_populate_store(a,i):(Bt.tc_product_image_store=Bt.tc_pre_populate_store(),Bt.tc_product_image_store=Bt.tc_maybe_copy_object_values(Bt.tc_product_image_store,Bt.tc_product_image)),o.tc_update_attr("src",0),o.tc_update_attr("srcset",0),o.tc_update_attr("sizes",0),o.tc_update_attr("title",0),o.tc_update_attr("alt",0),o.tc_update_attr("data-src",0),o.tc_update_attr("data-large_image",0),o.tc_update_attr("data-large_image_width",0),o.tc_update_attr("data-large_image_height",0),r.tc_update_attr("data-thumb",1),t.tc_update_attr("src",2),e.tc_update_attr("href",3),e.tc_update_attr("title",3),m=[],Bt(l.find(".tm-product-image:checked,select.tm-product-image")).add(d.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){S(c=Bt(this))&&""!==c.val()&&m.push(c)}),m.length&&(a=f,o=(i=p).find(".flex-control-nav li:eq(0) img"),i=i.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),a=(r=a).closest("a"),r.attr("data-o_src",Bt.tc_product_image_store[0].src),r.attr("data-o_srcset",Bt.tc_product_image_store[0].srcset),r.attr("data-o_sizes",Bt.tc_product_image_store[0].sizes),r.attr("data-o_title",Bt.tc_product_image_store[0].title),r.attr("data-o_alt",Bt.tc_product_image_store[0].alt),r.attr("data-o_data-src",Bt.tc_product_image_store[0]["data-src"]),r.attr("data-o_data-large_image",Bt.tc_product_image_store[0]["data-large_image"]),r.attr("data-o_data-large_image_width",Bt.tc_product_image_store[0]["data-large_image_width"]),r.attr("data-o_data-large_image_height",Bt.tc_product_image_store[0]["data-large_image_height"]),i.attr("data-o_data-thumb",Bt.tc_product_image_store[1]["data-thumb"]),Bt.tc_product_image_store[2]&&o.attr("data-o_src",Bt.tc_product_image_store[2].src),a.attr("data-o_href",Bt.tc_product_image_store[3].href),a.attr("data-o_title",Bt.tc_product_image_store[3].title),m[m.length-1].trigger("tm_trigger_product_image"))},I.tc_epo_product_image_change_delay||0)}),Bt.tc_product_image_store=Bt.tc_maybe_copy_object_values_from_img(Bt.tc_product_image_store,f,p),t=Bt.epoAPI.util.deepCopyArray(Bt.tc_product_image_store),e.off("tm_change_product_image").on("tm_change_product_image",function(t,e){t.stopImmediatePropagation(),a=e.element,i=e.element_current,a&&i&&(i=a.data("imagep"),(o="")!==i?o="imagep":"images"===a.data("changes-product-image")&&(o="image"),void 0!==(r=(r=e.element_current.data("image-variations"))&&r[o]))&&(m=[],Bt(l.find(".tm-product-image:checked,select.tm-product-image")).add(d.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){S(c=(c=Bt(this)).is("option")?c.closest("select"):c)&&""!==c.val()&&m.push(c)}),!m.length||m[m.length-1].is(a))&&setTimeout(function(){"yes"===Ht.tm_epo_global_image_recalculate&&(f=O(n,p)),gt(r,f,p),z(u,f,r.image_link,!1,e,s,p)},I.tc_epo_product_image_change_delay||0)}),e.off("tm_restore_product_image").on("tm_restore_product_image",function(t,e){t.stopImmediatePropagation(),a=e.element,m=[],a&&(Bt(l.find(".tm-product-image:checked,select.tm-product-image")).add(d.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){S(c=Bt(this))&&""!==c.val()&&m.push(c)}),m.length)&&!m[m.length-1].is(a)?m[m.length-1].trigger("tm_trigger_product_image"):(gt(!1,f,p),z(u,!1,f.attr("src"),!1,e,s,p))}),m=[],Bt(l.find(".tm-product-image:checked,select.tm-product-image")).add(d.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){S(c=Bt(this))&&""!==c.val()&&m.push(c)}),m.length)&&m[m.length-1].trigger("tm_trigger_product_image"),Lt.trigger("tm_product_image_loaded")}function bt(r){setTimeout(function(){var t,u,g,f,h,v,e,a,y,b,i,o,w,x;"inline"===Ht.tm_epo_global_product_image_mode?(e=(t=r).is_associated?t.this_epo_container:t.this_epo_container.not(Nt.epoSelector+" "+Nt.associatedEpoSelector),a=t.main_product,y=t.product_id,b=t.form,i=ht(t),o=[],w=O(t,i),x=vt(t,w,i),0<Bt(w).length&&(w.data("tm-current-image",!1),u=w.closest("a"),g=w.attr("src"),f=w.width(),h=w.height(),a.off("tm_change_product_image").on("tm_change_product_image",function(t,e){var a,i,o,r=[],n=e.element.closest(".cpf-section"),c=n.is(".tm-epo-variation-section"),l=e.epo_holder,c=(l=c?n:l).find(".tm-product-image:checked,select.tm-product-image"),r=[],d=e.element.attr("id"),n=!0,l=e.main_product,s=l.closest("#product-"+y),p=f,m=h,_=Bt("<div class='blockUI blockOverlay tm-preloader-img'></div>");0===(l=(s=s.length<=0?l.closest(".post-"+y):s).find("#"+d+"_tmimage")).length&&(l=w),o=function(){_.remove(),b.tc_image_update(!1),w.data("tm-current-image",!1),s.find(".tm-clone-product-image").hide(),w.show()},e.src===l.attr("src")&&l.is(":visible")||(!1===e.src?o():(_.css({width:p,height:m}),c.each(function(){S(v=Bt(this))&&ft(v)&&U({element:v.closest(".cpf-element"),operator:"isnotempty",value:""})&&r.push(v)}),(c=r.length?r[r.length-1]:c).attr("id")!==e.element.attr("id")&&(n=!1),a=w.tcClone(),i=new Image,a.removeAttr("data-o_src").removeAttr("data-o_title").removeAttr("data-o_alt").removeAttr("data-o_srcset").removeAttr("data-o_sizes").removeAttr("srcset").removeAttr("sizes"),n&&w.before(_),x.is_yith_wcmg.yith_wcmg_default_zoom=x.is_yith_wcmg.element.find(".yith_magnifier_zoom").first().attr("href"),x.is_yith_wcmg.yith_wcmg_default_image=x.is_yith_wcmg.element.find(".yith_magnifier_zoom img").first().attr("src"),i.onerror=function(){o()},i.onload=function(){if("naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height===0)return void this.onerror();s.find("#"+d+"_tmimage").remove(),s.find(".tm-clone-product-image").hide(),a.prop("src",i.src).hide(),w.hide().after(a),a.css("opacity",0).show(),z(x,a,i.src),_.animate({opacity:0},750,"easeOutExpo",function(){_.remove()}),a.animate({opacity:1},I.tc_epo_image_animation_delay||1500,"easeOutExpo",function(){}),Lt.trigger("tm_change_product_image_loaded",{src:e.src,element:e.element,main_product:e.main_product,epo_holder:e.epo_holder})},a.attr("id",d+"_tmimage").addClass("tm-clone-product-image").hide(),a.attr("src-orig")&&a.attr("src-orig",e.src),n?(i.src=e.src,b.tc_image_update(e.element,a),w.data("tm-current-image",d),Lt.trigger("tm_change_product_image_show",{src:e.src,element:e.element,main_product:e.main_product,epo_holder:e.epo_holder})):(a.prop("src",e.src).hide(),w.after(a)),Lt.trigger("tm_change_product_image_end",{src:e.src,element:e.element,main_product:e.main_product,epo_holder:e.epo_holder})))}),a.off("tm_restore_product_image").on("tm_restore_product_image",function(t,e){var a,i,o,r,n,c,l,d,s,p,m,_;if(Lt.trigger("tm_restore_product_image_pre",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder}),a=e.element.attr("id"),o=(i=e.main_product).closest("#product-"+y),l=(d=e.element.closest(".cpf-section")).is(".tm-epo-variation-section"),c=!1,p=g,m=e.epo_holder,l&&(m=d),l=(o=o.length<=0?i.closest(".post-"+y):o).find("#"+a+"_tmimage").is(":visible"),o.find("#"+a+"_tmimage").remove(),0===o.find(".tm-clone-product-image").length)w.show(),w.data("tm-current-image",!1),b.tc_image_update(!1);else{if(!l)return void Lt.trigger("tm_restore_product_image_loaded_exit",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder});for(d=o.find(".tm-clone-product-image").length,a=w.data("tm-current-image"),_=d-1;0<=_;--_){if(r=(n=o.find(".tm-clone-product-image").eq(_)).attr("id").replace("_tmimage",""),(s=m.find("[id='"+r+"']")).is(":checked")&&s.closest(".cpf-element").is(":visible")){o.find(".tm-clone-product-image").eq(_).show(),u.attr("href",o.find(".tm-clone-product-image").eq(_).prop("src")),w.data("tm-current-image",r),c=!0;break}o.find(".tm-clone-product-image").eq(_).hide()}c?o.find("#"+a+"_tmimage").remove():(w.show(),w.data("tm-current-image",!1),b.tc_image_update(!1))}c&&(p=n.attr("src")),z(x,!1,p,o.find(".tm-clone-product-image").filter(":visible").length),Lt.trigger("tm_restore_product_image_loaded",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder})}),a.off("tm_attempt_product_image").on("tm_attempt_product_image",function(t,e){var a,i,o,r,n,c=e.main_product,l=c.closest("#product-"+y),d=e.element?e.element.closest(".cpf-section"):Bt(c.find(".tm-epo-variation-section").first(),e.epo_holder),s=d.is(".tm-epo-variation-section"),p=e.epo_holder,s=(p=s?d:p).find(".tm-product-image:checked,select.tm-product-image"),d="",m=!(a=[]),_=w.data("tm-current-image"),f=g;if(l.length<=0&&(l=c.closest(".post-"+y)),(s=(p=c.find(".tm-epo-variation-section").first().add(e.epo_holder)).find(".tm-product-image:checked,select.tm-product-image")).each(function(){S(v=Bt(this))&&ft(v)&&U({element:v.closest(".cpf-element"),operator:"isnotempty",value:""})&&a.push(v)}),a.length&&(d=(s=a[a.length-1]).attr("id")),!a.length||!s.length||_&&d===_){if(c=p.find("[id='"+_+"']").closest(".cpf-element"),_&&(!1===c.data("isactive")||!1===c.closest(".cpf-section").data("isactive"))){if(l.find("#"+_+"_tmimage").remove(),0===(e=l.find(".tm-clone-product-image").length))w.show(),w.data("tm-current-image",!1),b.tc_image_update(!1);else{for(n=e-1;0<=n;--n){if(o=(i=l.find(".tm-clone-product-image").eq(n)).attr("id").replace("_tmimage",""),(r=p.find("[id='"+o+"']")).is(":checked")&&r.closest(".cpf-element").is(":visible")){l.find(".tm-clone-product-image").eq(n).show(),u.attr("href",l.find(".tm-clone-product-image").eq(n).prop("src")),w.data("tm-current-image",o),m=!0;break}l.find(".tm-clone-product-image").eq(n).hide()}m||(w.show(),w.data("tm-current-image",!1),b.tc_image_update(!1))}m&&(f=i.attr("src")),z(x,!1,f,l.find(".tm-clone-product-image").filter(":visible").length)}}else s.last().trigger("tm_trigger_product_image")}),Bt(e.find(".tm-product-image:checked,select.tm-product-image")).add(a.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){S(v=Bt(this))&&""!==v.val()&&o.push(v)}),o.length)&&o[o.length-1].trigger("tm_trigger_product_image"),Lt.trigger("tm_product_image_loaded")):yt(r)},I.tc_epo_product_image_setup_delay||0)}function wt(m){_&&m.find(".tm-range-picker").toArray().forEach(function(t){var a,t=Bt(t),i=t.attr("data-step").split("."),o=m.find("#"+Bt.epoAPI.dom.id(t.attr("data-field-id"))),e=parseFloat(t.attr("data-min")),r=parseFloat(t.attr("data-max")),n=parseFloat(t.attr("data-start")),c=parseFloat(t.attr("data-step")),l=t.attr("data-show-picker-value"),d=t.closest("li").find(".tm-show-picker-value"),s=parseFloat(t.attr("data-noofpips")),p=null;t.data("tc-picker-init")||(t.data("tc-picker-init",1),i=1===i.length?0:i[1].length,Number.isFinite(e)||(e=0),(r=Number.isFinite(r)?r:0)<=e&&(r=parseFloat(r)+1),n=Bt.epoAPI.math.unformat(n,Nt.localDecimalSeparator),n=Ut(n=Number.isFinite(n)?n:0,{precision:i}),Number.isFinite(c)||(c=0),(s=Number.isFinite(s)?s:10)<2&&(s=2),"yes"===t.attr("data-pips")&&(p={mode:"count",values:s,filter:function(t,e){return t=parseFloat(Bt.epoAPI.math.toFixed(t,i)),c<=0?0:1!==e||Number.isInteger(t)?e:2},format:{from:function(t){return Bt.epoAPI.math.unformat(t,Nt.localInputDecimalSeparator)},to:function(t){return Ut(t,{precision:i})}},density:2}),_.create(t.get(0),{direction:Ht.text_direction,start:n,step:c,connect:"lower",behaviour:"tap",format:{from:function(t){return Bt.epoAPI.math.unformat(t,Nt.localDecimalSeparator)},to:function(t){return Ut(t,{precision:i})}},range:{min:[e],max:[r]},pips:p,tooltips:{from:function(t){return Bt.epoAPI.math.unformat(t,Nt.localInputDecimalSeparator)},to:function(t){return Ut(t,{precision:i})}}}),a=t.find(".noui-handle-lower"),t.get(0).noUiSlider.on("slide",function(){o.trigger("change.cpf")}),t.get(0).noUiSlider.on("update",function(t,e){t[e]=Bt.epoAPI.math.unformat(t[e],Nt.localDecimalSeparator),e=0,"left"!==l&&"right"!==l&&a.attr("title",Ut(t[e],{precision:i})),o.val(t[e]).trigger("change"),""!==l&&d.html(Ut(t[e],{precision:i}))}),""!==l&&d.html(n),"left"!==l&&"right"!==l&&(a.attr("title",n),t.addClass("noui-show-tooltip")))})}function xt(){_&&!E.data("setRangePickersEvents")&&(E.on("click",".tm-show-picker-value",function(){var t=Bt(this),e=t.closest(".tmcp-field-wrap"),a=e.find(".tmcp-range").val(),i=t.closest(".tmcp-field-wrap").find(".tm-range-picker");t.addClass("tc-hidden").after(Bt('<input type="number" class="tm-show-picker-value-edit">')),(t=e.find(".tm-show-picker-value-edit")).focus().val(a).wrap('<div class="tm-show-picker-value-edit-wrap"></div>'),t.attr("step",i.attr("data-step")),t.attr("min",i.attr("data-min")),t.attr("max",i.attr("data-max")),E.data("range-picker-edit",e.find(".tm-show-picker-value-edit"))}),E.on("change input",".tm-show-picker-value-edit",function(){var t=Bt(this),e=t.closest(".tmcp-field-wrap").find(".tm-range-picker"),a=e.attr("data-step").split("."),t=t.val(),a=1===a.length?0:a[1].length;e.get(0).noUiSlider.set([Ut(t,{precision:a}),null])}),E.on("keydown",".tm-show-picker-value-edit",function(t){13===t.which&&t.preventDefault()}),E.on("click",function(t){E.data("range-picker-edit")&&!Bt(t.target).is(".tm-show-picker-value")&&0===Bt(t.target).closest(".tm-show-picker-value-edit-wrap").length&&((t=E.data("range-picker-edit")).closest(".tmcp-field-wrap").find(".tm-show-picker-value").data("has-edit",0).removeClass("tc-hidden"),t.closest(".tm-show-picker-value-edit-wrap").remove(),E.removeData("range-picker-edit"))}),E.data("setRangePickersEvents",1))}function Ft(t){var e,a,i,o,r;if(t.toString().isNumeric()&&0!==(e=0===t?t:0<t?1:-1)){for(a=new Date,o=!(i=1),r=Math.abs(t);i<=r;)!1===o&&(o=0),a.setDate(a.getDate()+ +e),o++,0!==a.getDay()&&6!==a.getDay()&&i++;!1!==o&&(t=o*e)}return t}function kt(y){var h,t,e=".tm-epo-timepicker";Bt.tm_datepicker&&(h=Bt("input").map(function(){return this.id}).get().join(" "),(t=F.createElement("input")).setAttribute("type","date"),"text"===t.type&&(e=".tm-epo-system-timepicker"),y.find(e).toArray().forEach(function(t){var a=Bt(t),t=null,e=null,i=a.attr("data-time-format").trim(),o=a.attr("data-time-theme").trim(),r=a.attr("data-time-theme-size").trim(),n=a.attr("data-time-theme-position").trim(),c=a.attr("data-tranlation-hour").trim(),l=a.attr("data-tranlation-minute").trim(),d=a.attr("data-tranlation-second").trim();a.attr("type","text"),""!==a.attr("data-min-time").trim()&&(t=a.attr("data-min-time").trim()),""!==a.attr("data-max-time").trim()&&(e=a.attr("data-max-time").trim()),""!==a.attr("data-custom-time-format").trim()&&(i=a.attr("data-custom-time-format").trim()),c=c||Ht.hourText,l=l||Ht.minuteText,d=d||Ht.secondText,a.tm_timepicker(Object.assign({isRTL:Ht.isRTL,hourText:c,minuteText:l,secondText:d,timeFormat:i,minTime:t,maxTime:e,closeText:Ht.closeText,showOn:"both",buttonText:"",beforeShow:function(t,e){Bt(e.dpDiv).removeClass(h).removeClass("tm-ui-skin-epo tm-ui-skin-epo-black tm-datepicker-medium tm-datepicker-small tm-datepicker-large tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+o+" tm-timepicker tm-datepicker tm-datepicker-"+n+" tm-datepicker-"+r).appendTo("body"),E.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){a.tm_timepicker("hide")}),A.addClass("tm-static"),a.prop("readonly",!0),Lt.trigger({type:"tm-timepicker-beforeShow",input:t,inst:e})},onClose:function(){A.removeClass("tm-static"),a.prop("readonly",!1),a.trigger("change")}},I.tmTimepickerSettings||I.timepicker_settings||{})),Bt("#ui-tm-datepicker-div").hide()}),y.find(".tm-epo-datepicker").toArray().forEach(function(t){var e,l=Bt(t),t=parseInt(l.attr("data-start-year").trim(),10),a=parseInt(l.attr("data-end-year").trim(),10),i=l.attr("data-min-date").trim(),o=l.attr("data-max-date").trim(),d=l.attr("data-disabled-dates").trim(),s=l.attr("data-enabled-only-dates").trim(),r=l.attr("data-exlude-disabled").trim(),p=l.attr("data-disabled-weekdays").trim().split(","),m=l.attr("data-disabled-months").trim().split(","),_=l.attr("data-date-format").trim(),n=l.attr("data-date-showon").trim(),c=l.attr("data-date-defaultdate").trim(),f=l.attr("data-date-theme").trim(),u=l.attr("data-date-theme-size").trim(),g=l.attr("data-date-theme-position").trim();""!==d&&(e=d.split(","),-1!==d.indexOf(","))&&0<e.length&&(d=e),""!==s&&(e=s.split(","),-1!==s.indexOf(","))&&0<e.length&&(s=e),""===i?i=""===t?null:new Date(t,0,1):r&&(i=Ft(i)),""===o?o=""===a?null:new Date(a,11,31):r&&(o=Ft(o)),l.data("tc-enabled_only_dates",s),l.data("tc-disabled_weekdays",p),l.data("tc-disabled_months",m),l.data("tc-disabled_dates",d),l.data("tc-format",_),l.tm_datepicker(Object.assign({monthNames:Ht.monthNames,monthNamesShort:Ht.monthNamesShort,dayNames:Ht.dayNames,dayNamesShort:Ht.dayNamesShort,dayNamesMin:Ht.dayNamesMin,isRTL:Ht.isRTL,showOtherMonths:!0,selectOtherMonths:!0,showOn:n,defaultDate:c,buttonText:"",showButtonPanel:!0,firstDay:Ht.first_day,closeText:Ht.closeText,currentText:Ht.currentText,dateFormat:_,minDate:i,maxDate:o,onSelect:function(){var t,e=Bt(this),a="#"+Bt.epoAPI.dom.id(e.attr("id")),i=e.tm_datepicker("getDate"),o="",r="",n="",c=y.find(a+"_day"),l=y.find(a+"_month"),a=y.find(a+"_year");i&&(o=i.getDate(),r=i.getMonth()+1,n=i.getFullYear(),t=Bt.tm_datepicker.formatDate(_,i),-1!==m.indexOf(r.toString())||-1!==p.indexOf(i.getDay().toString())||-1!==d.indexOf(t)||""!==s&&-1===s.indexOf(t))&&(t=e.data("tm-last-date"),t=e.data("tm-last-date")?e.data("tm-last-date"):"",e.val(t),e.tm_datepicker("setDate",t),n=t?(o=(i=e.tm_datepicker("getDate")).getDate(),r=i.getMonth()+1,i.getFullYear()):r=o=""),c.val(o),l.val(r),a.val(n),e.data("tm-last-date",e.val())},beforeShow:function(t,c){Bt(c.dpDiv).removeClass(h).removeClass("tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+f+" tm-datepicker tm-datepicker-"+g+" tm-datepicker-"+u).appendTo("body"),E.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){l.tm_datepicker("hide")}),E.off("click",".ui-tm-datepicker-current").on("click",".ui-tm-datepicker-current",function(){var t,e=new Date,e=Bt.tm_datepicker._daylightSavingAdjust(new Date(e.getFullYear(),e.getMonth(),e.getDate())),a=e.getDay(),i=e.getMonth()+1,o="#"+c.id.replace(/\\\\/g,"\\"),r=!1,n=l.tm_datepicker("getDate");if(""!==s)t=Bt.tm_datepicker.formatDate(_,n),r=-1!==s.indexOf(t);else if(-1!==m.indexOf(i.toString())||-1!==p.indexOf(a.toString()))r=!1;else{if(""!==d)return t=Bt.tm_datepicker.formatDate(_,n),[-1===d.indexOf(t),""];r=!0}r&&(Bt.tm_datepicker._setDate(c,e),Bt.tm_datepicker._gotoToday(o))}),A.addClass("tm-static"),l.prop("readonly",!0),Lt.trigger({type:"tm-datepicker-beforeShow",input:t,inst:c})},onClose:function(){A.removeClass("tm-static"),l.prop("readonly",!1),l.trigger("change")},beforeShowDay:function(t){var e,a=t.getDay(),i=t.getMonth()+1;return""!==s?(e=Bt.tm_datepicker.formatDate(_,t),[-1!==s.indexOf(e),""]):-1!==m.indexOf(i.toString())||-1!==p.indexOf(a.toString())?[!1,""]:""!==d?(e=Bt.tm_datepicker.formatDate(_,t),[-1===d.indexOf(e),""]):[!0,""]}},I.tmDatepickerSettings||{})),Bt("#ui-tm-datepicker-div").hide()}),y.find(".tmcp-date-select").on("change.cpf",function(){var t="#"+Bt.epoAPI.dom.id(Bt(this).attr("data-tm-date")),e=y.find(t),a=e.attr("data-date-format"),i=y.find(t+"_day").val(),o=y.find(t+"_month").val(),t=y.find(t+"_year").val(),a=Bt.tm_datepicker.formatDate(a,new Date(t,parseInt(o,10)-1,i));0<i&&0<o&&0<t?(e.tm_datepicker("setDate",a),e.trigger("change")):(e.val(""),e.trigger("change.cpf"))}).on("focus.cpf",function(){var t="#"+Bt.epoAPI.dom.id(Bt(this).attr("data-tm-date")),f=y.find(t),e=y.find(t+"_day"),a=y.find(t+"_month"),t=y.find(t+"_year"),u=e.val(),g=a.val(),h=t.val(),v=Bt(this);""!==h&&""!==g&&""!==u||""!==h&&""!==g&&""===u||""!==u&&""!==h&&""===g||""!==u&&""!==g&&""===h?v.find("option").toArray().forEach(function(e){var t,a,i,o,r,n,c,l,d,s,p,e=Bt(e),m=e.val(),_=h+"-"+g+"-"+u;if(v.is(".tmcp-date-day")){if(""===h||""===g)return;_=h+"-"+g+"-"+m}else if(v.is(".tmcp-date-month")){if(""===h||""===u)return;_=h+"-"+m+"-"+u}else if(v.is(".tmcp-date-year")){if(""===u||""===g)return;_=m+"-"+g+"-"+u}if(""!==m)try{(t=Bt.tm_datepicker.parseDate("yy-mm-dd",_))&&(a=t,i=Bt(i=f),r=Bt.tm_datepicker._getInst(i[0]),n=i.data("tc-enabled_only_dates"),c=i.data("tc-disabled_weekdays"),l=i.data("tc-disabled_months"),d=i.data("tc-disabled_dates"),i=i.data("tc-format"),s=a.getDay(),p=a.getDay()+1,!Bt.tm_datepicker._isInRange(r,a)||(""!==n?(o=Bt.tm_datepicker.formatDate(i,a),-1===n.indexOf(o)):-1!==c.indexOf(s.toString())||-1!==l.indexOf(p.toString())||""!==d&&(o=Bt.tm_datepicker.formatDate(i,a),-1!==d.indexOf(o)))?e.prop("disabled",!0):e.prop("disabled",!1))}catch(t){I.console.log(t),e.prop("disabled",!0),b=t}}):(e.find("option").prop("disabled",!1),a.find("option").prop("disabled",!1),t.find("option").prop("disabled",!1))}),Lt.on("resizestart",function(){var t=Bt(F.activeElement);t.is(".hasDatepicker")&&(t.data("resizestarted",!0),Bt(I).width()<768?t.data("resizewidth",!0):t.tm_datepicker("hide"))}),Lt.on("resizestop",function(){var t=Bt(F.activeElement);t.is(".hasDatepicker")&&t.data("resizestarted")&&(t.data("resizewidth")&&t.tm_datepicker("hide"),t.tm_datepicker("show")),t.data("resizestarted",!1),t.data("resizewidth",!1)}))}function Ct(t){var e=t.epoEventId,a=t.main_product,i=!Bt.tcepo.formSubmitEvents[e].some(function(t){return typeof t&&"function"==typeof t.trigger&&!t.trigger()});return Bt.tcepo.formSubmitEvents[e].forEach(function(t){"object"==typeof t&&(i?t.on_true():t.on_false())}),i||setTimeout(function(){a.find(Nt.addToCartButtonSelector).first().removeClass("disabled").removeClass("loading").prop("disabled",!1).removeClass("fpd-disabled")},100),Lt.trigger("tm-apply-submit-events",{epo:{form_is_submit:i}}),i}function It(e){var c,l,a=e.form,t=e.this_epo_container,i=e.main_product,o=e.epoEventId;return"yes"===Ht.tm_epo_global_enable_validation&&(c={},t.find(".tmcp-ul-wrap").toArray().forEach(function(i){var o,t,a,r,n;i=Bt(i),(l=i.data("tm-validation"))&&"object"===Bt.tmType(l)&&(t=(o=i.find(".tm-epo-field")).first().attr("name"),i.is(".tm-extra-product-options-radio.tm-element-ul-radio")?(t=o.last().attr("name"),c[t]=l):i.is(".tm-extra-product-options-checkbox.tm-element-ul-checkbox")?o.each(function(t,e){"required"in l&&(l.required=function(t){var e=i.find("input.tm-epo-field.tmcp-checkbox:checked").length;return 0===e?o.last().attr("name")===Bt(t).attr("name"):e<=0}),c[Bt(e).attr("name")]=l}):i.is(".tm-extra-product-options-product.tm-element-ul-product")?o.is(":checkbox")?o.each(function(t,e){"required"in l&&(n=Bt(e)).is(":checkbox")&&(l.required=function(t){var e=i.find("input.tm-epo-field.tmcp-checkbox:checked"),a=e.length;return 0===a?o.last().attr("name")===Bt(t).attr("name"):(t=e.map(function(){return Bt(this)}).get().some(function(t){return t.closest(".tc-epo-element-product-holder").find(".tm-qty").first().val()<=0}),0<a?t:a<=0)},"variable"===n.attr("data-type"))&&(a=n.closest(".tc-epo-element-product-holder").find(".product-variation-id").first().attr("name"),r={required:function(t){t=Bt(t).closest(".tc-epo-element-product-holder").find(".tc-epo-field-product");return!(!S(t,!0)||!t.is(":checked"))}},c[a]=r),c[n.attr("name")]=l}):o.is(":radio")?(l.product_element_radio_qty=!0,c[o.attr("name")]=l,a=o.closest(".tc-element-container").find(".product-variation-id").first().attr("name"),r={required:function(t){t=Bt(t).closest(".tc-element-container").find(".tc-epo-field-product:checked");return!!(t.length&&"variable"===t.attr("data-type")&&S(t,!0)&&t.is(":checked"))}},c[a]=r):o.is("select")&&(l.product_element_select_qty=!0,c[o.attr("name")]=l,a=o.closest(".tc-element-container").find(".product-variation-id").first().attr("name"),r={required:function(t){t=Bt(t).closest(".tc-element-container").find(".tc-epo-field-product");return!(!t.length||"variable"!==t.children(":selected").attr("data-type")||!S(t,!0))}},c[a]=r):c[t]=l)}),a.removeData("tc_validator"),a.tc_validate({focusInvalid:!1,ignore:Nt.qtySelector+",.tcdisabled,.tmcp-upload-hidden,#wc_bookings_field_duration,input.tm-qty:hidden[type='number'],input.input-text.qty,.ignore,.variations select,.tc-epo-variable-product-selector,.tm-extra-product-options-variations input,.tm-extra-product-options-variations select,input:not(.tc-extra-product-options input),select:not(.tc-extra-product-options select)",rules:c,errorClass:"tm-error",validClass:"tm-valid",errorElement:"label",errorPlacement:function(t,e){return t.addClass("tc-cell tcwidth tcwidth-100"),"before"===Ht.tm_epo_global_error_label_placement?e.closest(".tc-element-container").before(t):e.closest(".tc-element-container").after(t),!1},invalidHandler:function(t,e){Lt.trigger("tm-invalidHandler",{epo:{validator:e}}),setTimeout(function(){i.find(Nt.addToCartButtonSelector).first().is(".disabled")||(i.find(Nt.addToCartButtonSelector).first().removeClass("loading").prop("disabled",!1).removeClass("fpd-disabled"),i.find(Nt.addToCartButtonSelector).first().removeClass("disabled").removeClass("loading").prop("disabled",!1).removeClass("fpd-disabled"))},100),e.errorList&&e.errorList[0]&&e.errorList[0].element&&Y(Bt(e.errorList[0].element),o)},submitHandler:function(){var t;return e.is_quickview||(i.find(Nt.addToCartButtonSelector).first().addClass("disabled"),t=function(){i.find(Nt.addToCartButtonSelector).first().removeClass("disabled"),E.off("ajaxSuccess",t)},E.on("ajaxSuccess",t)),Ct(e)}}),a.find(Nt.addToCartButtonSelector).on("click",function(t){a.tc_validate().form()||(t.preventDefault(),t.stopImmediatePropagation())}),!0)}function Gt(g,t,h,v,y,b,w,x,F,e,k,C){var I,P,A,E,q,S,T,a=t.attr("class")+t.attr("data-uniqid")+h+g.is_associated+F+x+F+e||"none",O=0;return"none"!==a&&!0!==j&&!1!==j&&void 0!==j[a]?j[a]:(I=e?"undiscounted_":"",e=t.find(h),!1===g.is_associated&&(e=e.not(Nt.associatedEpoSelector+" "+h)),x||(e=e.filter(".tcenabled")),P=T=S=v=v||0,A=y=y||0,b=b||[],E=g.this_epo_totals_container,e.length&&e.toArray().forEach(function(t){var e,a,i,o,r,n,c,l=Bt(t),d="",t=l.closest(".cpf-element"),s=l.closest(".tmcp-field-wrap"),p=t.attr("data-fblabelshow"),m=t.attr("data-fbvalueshow"),_="",s=s.find(".tm-qty").val(),f="",u=!1;".tc-epo-field-product"===h&&(t.is(".cpf-type-product-thumbnailmultiple")||t.is(".cpf-type-product-checkbox")?q=l.closest(".tc-epo-element-product-holder").find(".tc-extra-product-options-inline"):t.is(".cpf-type-product-thumbnail")||t.is(".cpf-type-product-radio")||t.is(".cpf-type-product-dropdown")?q=t.find('.tc-epo-element-product-container[data-product_id="'+l.val()+'"]').find(".tc-extra-product-options-inline"):t.is(".cpf-type-product-single")&&(q=t.find(".tc-extra-product-options-inline")),E=Bt(".tc-epo-totals.tm-product-id-"+q.attr("data-product-id")+'[data-epo-id="'+q.attr("data-epo-id")+'"]')),E.length&&(""===p&&(_=t.find(".tc-epo-element-label-text").html()),void 0===s&&(s=""),k&&Xt(g,l,void 0,void 0,void 0,void 0,S,T),l.is(":checkbox, :radio, :input"))&&(o=i=a=e=0,l.is(".tmcp-checkbox, .tmcp-radio")?x||l.is(":checked")?(e=l.data(I+"raw_price"),a=l.data(I+"price"),i=l.data(I+"raw_original_price"),o=l.data(I+"original_price"),w=!0,l.data("isset",1),t=l.closest("li.tmcp-field-wrap").find(".tc-image"),f=d="",(r=l.closest("li.tmcp-field-wrap").find(".tc-label-text")).length&&(d=r.html(),f=d),t.length&&((t=t.closest(".tc-label-wrap").clone().addClass("tc-img-floating")).find(".tc-label, .tc-epo-style-wrapper, .tc-input-wrap").remove(),d=t[0].outerHTML+'<span class="tc-label-text">'+d+"</span>"),u=!0):l.data("isset",0):l.is(".tmcp-select")?(c=l.find("option:selected"),e=c.data(I+"raw_price"),a=c.data(I+"price"),i=c.data(I+"raw_original_price"),o=c.data(I+"original_price"),""===(n=l.children("option:selected")).val()&&""===n.attr("data-rulestype")||(w=!0),l.find("option").data("isset",0),c.data("isset",1),""===c.val()&&""===c.attr("data-rulestype")||(d=c.attr("data-text"),u=!0,f=d)):l.is(".tmcp-selectmultiple")?(c=l.find("option:selected")).toArray().forEach(function(t){t=Bt(t),e+=Bt.epoAPI.math.toFloat(t.data(I+"raw_price")),a+=Bt.epoAPI.math.toFloat(t.data(I+"price")),i+=Bt.epoAPI.math.toFloat(t.data(I+"raw_original_price")),o+=Bt.epoAPI.math.toFloat(t.data(I+"original_price")),""===(n=l.children("option:selected")).val()&&""===n.attr("data-rulestype")||(w=!0),l.find("option").data("isset",0),t.data("isset",1),""===t.val()&&""===t.attr("data-rulestype")||(d=t.attr("data-text"),u=!0,f=d)}):(r=l.val(),!(r=l.is("[type='file']")?r.replace("C:\\fakepath\\",""):r)||l.is(".tmcp-range")&&"0"===r?l.data("isset",0):(e=l.data(I+"raw_price"),a=l.data(I+"price"),i=l.data(I+"raw_original_price"),o=l.data(I+"original_price"),w=!0,l.data("isset",1),d=r,l.is(".tmcp-range")&&(t=1===(t=l.closest(".tmcp-field-wrap").find(".tm-range-picker").attr("data-step").split(".")).length?0:t[1].length,d=Ut(d,{precision:t})),u=!0,f=r)),e=e||0,i=i||0,a=a||0,o=o||0,u&&b.push({title:_,value:d,valueText:f,price:a,original_price:o,quantity:s,label_show:p,value_show:m,input_type:l.attr("type")}),a=Rt(e,E,l,0,void 0,void 0,!0),o=Rt(i,E,l,0,void 0,void 0,!0),F&&(e=a,i=o),v=Bt.epoAPI.math.toFloat(v)+Bt.epoAPI.math.toFloat(e),v=Bt.epoAPI.math.toFloat(Bt.epoAPI.math.round(v,10)),y=Bt.epoAPI.math.toFloat(y)+Bt.epoAPI.math.toFloat(i),y=Bt.epoAPI.math.toFloat(Bt.epoAPI.math.round(y,10)),P=Bt.epoAPI.math.toFloat(P)+Bt.epoAPI.math.toFloat(a),P=Bt.epoAPI.math.toFloat(Bt.epoAPI.math.round(P,10)),O+=Bt.epoAPI.math.toFloat(Mt(a,E)),A=Bt.epoAPI.math.toFloat(A)+Bt.epoAPI.math.toFloat(o),A=Bt.epoAPI.math.toFloat(Bt.epoAPI.math.round(A,10)),C)&&(T=v)}),t={total:v,original_total:y,total_taxed:P,original_total_taxed:A,vat_total:O,floatingBoxData:b,showTotal:w,elementsLength:e.length},!0===j?(j={})[a]=t:!0!==j&&!1!==j&&(j[a]=t),t)}function re(t,e,a,i,o,r,n,c,l){var d,s=Bt.extend(!0,{},t),p=a.find(Nt.associatedEpoSelector),m=a,_=!0;m.closest(".cpf-element").is(".tc-hidden")||(n.addClass("tm-hidden"),n.length&&u(n,!0),"variable"===i?a.is(".tc-init-variations")?a.trigger("refresh.tc-variation-form"):(a.addClass("variations_form"),setTimeout(function(){d=h(m,!1,p.attr("data-product-id"),p.attr("data-epo-id"),o,s),a.addClass("tc-init-variations"),a.tc_product_variation_form(o,r,n,d)},40),_=!1):a.is(".tc-init-product")||(a.addClass("tc-init-product"),n.find(".tc-epo-element-variable-product").removeClass("variations_form"),n.find(".tc-epo-element-variations").removeClass("variations"),setTimeout(function(){h(m,!1,p.attr("data-product-id"),p.attr("data-epo-id"),o,s)},20),_=!1),setTimeout(function(){n.length&&u(a,!1)},200),setTimeout(function(){l.length&&l.trigger("change"),0===a.find(Nt.epoSelector).length&&a.addClass("no-epo"),a.removeClass("tm-hidden"),_&&(Lt.trigger("cpflogicdone"),a.find(".tm-quantity").trigger("showhide.cpfcustom")),void 0===c&&"yes"===Ht.tm_epo_global_product_element_scroll&&Lt.tcScrollTo(a,200,Bt.epoAPI.math.toFloat(Ht.tm_epo_global_product_element_scroll_offset))},210))}function Pt(xt,Ft,kt){var Ct,s,It,Pt,t,At,y,Et,qt,St,e,a,i,o,r,n,c,l,d,p,m=xt.product_id,Tt=xt.main_product,Ot=xt.main_cart,_=xt.this_epo_container,f=xt.this_totals_container,jt=xt.this_epo_totals_container,zt=xt.epoEventId,Dt=xt.main_epo_inside_form,u=xt.epo_id_selector,w=xt.epo_id,x=xt.product_id_selector,g="main",h=xt.is_associated?"tc-variation-form":"wc-variation-form",v=xt.is_associated?"tc_":"",b=kt&&Ft?(g=Bt.epoAPI.applyFilter("tc_get_item_id",Ft.attr("data-item_id"),Ft),Ct=Tt.find(".tm-extra-product-options.tm-cart-"+g),s=Tt.find(".tm-totals-form-"+g),It=Tt.find(".tm-epo-totals.tm-cart-"+g),Ft.find(".variations_form").first()):(Ot&&0!==Ot.length||(Ot=_.is(".tc-shortcode")?Tt:V(Tt,Tt,"form",m)),Ft=Ot.parent(),Ct=_,s=f,It=jt,xt.variations_form);xt.is_associated&&(g=Ct.attr("data-cart-id")),Pt=kt||Ot,It.data("tm_for_cart",Pt),t=Jt(Pt),y=Vt(Pt),It.data("variationIdElement",(l=".wceb_picker_wrap "+t,d=Jt(c=Pt),p=c.find(d),p=c.is(".tc-epo-element-product-container-cart")?c.closest(".tc-epo-element-product-li-container").find(d):c.find(d).not(".tc-epo-element-product-container-variation-id "+d),p=l?p.not(l):p)),It.data("qty_element",y),At=It.data("type"),b.data("tc_product_id",m),Et=It.attr("data-tm-epo-final-total-box"),qt=It.attr("data-tm-epo-show-final-total"),St=It.attr("data-tm-epo-show-options-total"),Lt.on("epoCalculateRules",function(t,e){t&&e&&e.currentCart&&ie(xt,e.currentCart)}),Pt.is("form")&&Pt.on("reset",function(){var t=Bt(this);setTimeout(function(){Bt(t.data("epo_id_selector")).find(".tm-epo-field").trigger("change")},1)}),ie(xt,Pt),c=Ct.find(".tm-epo-field"),xt.is_associated||(c=c.not(Nt.epoSelector+" "+Nt.associatedEpoSelector+" .tm-epo-field")),d=Ct.find(".tm-epo-field.tmcp-textarea,.tm-epo-field.tmcp-textfield"),xt.is_associated||(d=d.not(Nt.epoSelector+" "+Nt.associatedEpoSelector+" .tm-epo-field")),l=Ct.find(".tm-epo-reset-radio"),xt.is_associated||(l=l.not(Nt.epoSelector+" "+Nt.associatedEpoSelector+" .tm-epo-reset-radio")),p=Ct.find(".tm-epo-field.tmcp-upload"),xt.is_associated||(p=p.not(Nt.epoSelector+" "+Nt.associatedEpoSelector+" .tm-epo-field.tmcp-upload")),o=Ct.find(".tm-has-clearbutton .tm-epo-field"),xt.is_associated||(o=o.not(Nt.epoSelector+" "+Nt.associatedEpoSelector+" .tm-has-clearbutton .tm-epo-field")),r=Ct.find(".tm-quantity .tm-qty"),xt.is_associated||(r=r.not(Nt.epoSelector+" "+Nt.associatedEpoSelector+" .tm-quantity .tm-qty")),n=Ct.find(".tm-quantity"),xt.is_associated||(n=n.not(Nt.epoSelector+" "+Nt.associatedEpoSelector+" .tm-quantity")),i=Ct.find("select.tm-epo-field"),(i=xt.is_associated?i:i.not(Nt.epoSelector+" "+Nt.associatedEpoSelector+" select.tm-epo-field")).off("tm-select-change-html").on("tm-select-change-html",function(){var t,e,a,i,o=Bt(this);o.is(".tc-epo-field-product")||o.is(".tmcp-selectmultiple")||Ot&&void 0!==Ot.data("per_product_pricing")&&!Ot.data("per_product_pricing")||(t=Qt(o.find("option:selected").data("price"),It,!0,!1,o),e=Qt(o.find("option:selected").data("original_price"),It,!0,!1,o),a=o.closest(".tmcp-field-wrap").find(".tc-tooltip"),i=o.closest(".tmcp-field-wrap").find(".tc-inline-description"),N(o.closest(".tmcp-field-wrap").find(".tc-price"),o.find("option:selected").data("price"),t,o.find("option:selected").data("original_price"),e),0<a.length&&a.attr("data-tm-tooltip-html",o.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed"),0<i.length&&(o.find("option:selected").attr("data-tm-tooltip-html")?i.html(o.find("option:selected").attr("data-tm-tooltip-html")):i.html("")),("0"===o.find("option:selected").attr("data-hide-amount")||"yes"===Ht.tm_epo_show_price_inside_option_hidden_even)&&"yes"===Ht.tm_epo_show_price_inside_option&&o.find("option:selected").attr("data-text")&&o.find("option:selected").data("price")&&("yes"===Ht.tm_epo_auto_hide_price_if_zero&&!1===Bt.tmempty(o.find("option:selected").data("price"))||"yes"!==Ht.tm_epo_auto_hide_price_if_zero&&""!==o.find("option:selected").attr("data-price"))&&o.find("option:selected").html(o.find("option:selected").attr("data-text")+" ("+t+")"),""!==o.val()&&o.find("option:selected").attr("data-tm-tooltip-html")?a.removeClass("tm-hidden"):a.addClass("tm-hidden"))}).off("tm-math-select-change-html-all tm-select-change-html-all tm-select-change-html-all-math").on("tm-math-select-change-html-all tm-select-change-html-all tm-select-change-html-all-math",function(t){var e,a,i,o,r=Bt(this);r.is(".tc-epo-field-product")||(e=r.closest(".tmcp-field-wrap").find(".tc-tooltip"),a=r.closest(".tmcp-field-wrap").find(".tc-inline-description"),0<e.length&&e.attr("data-tm-tooltip-html",r.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed"),""!==r.val()&&r.find("option:selected").attr("data-tm-tooltip-html")?e.removeClass("tm-hidden"):e.addClass("tm-hidden"),0<a.length&&(r.find("option:selected").attr("data-tm-tooltip-html")?a.html(r.find("option:selected").attr("data-tm-tooltip-html")):a.html("")),Ot&&void 0!==Ot.data("per_product_pricing")&&!Ot.data("per_product_pricing"))||"yes"===Ht.tm_epo_show_price_inside_option&&r.find("option").each(function(){if(!(i=Bt(this)).val())return!0;"tm-select-change-html-all"===t.type?(i.removeClass("tm-epo-late-field").removeData("tm-price-for-late islate"),Xt(xt,r,void 0,i,1)):"tm-math-select-change-html-all"===t.type?Xt(xt,r,void 0,i,1,!0):"tm-select-change-html-all-math"===t.type&&(i.removeClass("tm-epo-late-field").removeData("tm-price-for-late islate"),Xt(xt,r,void 0,i,1,!0)),o=1,o=(o="yes"!==Ht.tm_epo_multiply_price_inside_option?r.data("tm-quantity"):o)||1,i.data("price")&&(o=Qt(i.data("price")/o,It,!0,!1,r),"0"!==i.attr("data-hide-amount")&&"yes"!==Ht.tm_epo_show_price_inside_option_hidden_even||!i.attr("data-text")||("yes"===Ht.tm_epo_auto_hide_price_if_zero&&!1===Bt.tmempty(i.data("price"))||"yes"!==Ht.tm_epo_auto_hide_price_if_zero&&""!==i.attr("data-price"))&&i.html(i.attr("data-text")+" ("+o+")"))})}).off("tm-select-change").on("tm-select-change",function(){var t=Bt(this),e=t.closest(".cpf-element").attr("data-uniqid");t.is(".tc-epo-field-product")||Ot&&void 0!==Ot.data("per_product_pricing")&&!Ot.data("per_product_pricing")||(t.removeData("addedtcEpoBeforeOptionPriceCalculation"),t.removeData("addedfieldtcEpoBeforeOptionPriceCalculation"),Lt.off("tcEpoBeforeOptionPriceCalculation.math"+e),Lt.off("tcEpoAfterOptionPriceCalculation.math"+e),t.trigger("tm-select-change-html"),t.trigger("tm-select-change-html-all"),Pt.trigger({type:"tm-epo-update",norules:1,element:t}))}).trigger("tm-select-change-html-all"),r.off("focus.cpf").on("focus.cpf",function(){var t=Bt(this),e=t.closest(".tmcp-field-wrap").find(".tm-epo-field"),a=parseFloat(t.val()),i=parseFloat(t.attr("max")),o=parseFloat(t.attr("min")),r=t.attr("step"),n=K(e,!1),e=tt(e,!1),c=!0;a&&""!==a&&"NaN"!==a||(a=0),""!==i&&"NaN"!==i||(i=""),""!==o&&"NaN"!==o||(o=0),"any"!==r&&""!==r&&void 0!==r&&parseFloat(r),(a<o||i<a)&&(c=!1),n&&e&&c?t.data("tm-prev-value",a):t.data("tm-prev-value",o)}).off("change.cpf").on("change.cpf",function(t,e){var a=Bt(this),i=a.closest(".tmcp-field-wrap").find(".tm-epo-field"),o=parseFloat(a.val()),r=parseFloat(a.attr("max")),n=parseFloat(a.attr("min")),c=a.attr("step"),l=K(i,!1),d=tt(i,!1),s=!0;o&&""!==o&&"NaN"!==o||(o=0),""!==r&&"NaN"!==r||(r=""),""!==n&&"NaN"!==n||(n=0),"any"!==c&&""!==c&&void 0!==c&&parseFloat(c),(o<n||r<o)&&(s=!1),l&&d&&s?(xt.noEpoUpdate?i.data("tm-quantity",a.val()).trigger("change.cpf",e).trigger("change.cpfproduct",e):i.data("tm-quantity",a.val()).trigger("change",e),i.trigger("tm-select-change-html-all")):a.data("tm-prev-value")?a.val(a.data("tm-prev-value")):a.val(n),a.trigger("cpf-changed")}).off("tmaddquantity").on("tmaddquantity",function(){var t=Bt(this);t.closest(".tmcp-field-wrap").find(".tm-epo-field").data("tm-quantity",t.val())}),a=Ct.find(".tmcp-textfield.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]"),(a=xt.is_associated?a:a.not(Nt.epoSelector+" "+Nt.associatedEpoSelector+" .tm-epo-field")).each(function(){var t=Bt(this),e=t.closest(".tmcp-field-wrap-inner"),t=Bt.epoAPI.template.html(Nt.templateEngine.tc_chars_remanining,{maxlength:t.attr("maxlength"),characters_remaining:Ht.i18n_characters_remaining});e.append(Bt(t))}),a.off("change.tc_maxlen input.tc_maxlen").on("change.tc_maxlen input.tc_maxlen",function(){var t=Bt(this);t.closest(".tmcp-field-wrap").find(".tc-chars-remanining").html(parseInt(t.attr("maxlength"),10)-parseInt(t.val().length,10))}),c.off("tm_trigger_product_image").on("tm_trigger_product_image",function(){var t,e,a,i,o=Bt(this);o.is(".tm-product-image:checkbox, .tm-product-image:radio, select.tm-product-image")?(e=o.closest(".tmcp-field-wrap").find("label img"),a=o.closest(".cpf-section").is(".tm-epo-variation-section"),(t=o).is("select.tm-product-image")&&(t=o.children("option:selected")),(0<Bt(e).length||a&&void 0!==t.attr("data-image")||void 0!==t.attr("data-image")&&""!==t.attr("data-image")||void 0!==t.attr("data-imagep")&&""!==t.attr("data-imagep"))&&(o.is(":checked")||o.is("select.tm-product-image")&&""!==o.val()&&(""!==o.find("option:selected").attr("data-rules")||o.is(".tm-epo-variation-element")))?(i=(i=(i=Bt(e).first().attr("data-original"))||a?i:Bt(e).first().attr("src"))||t.attr("data-image"),(i=t.attr("data-imagep")?t.attr("data-imagep"):i)?Tt.trigger("tm_change_product_image",{src:i,element:o,element_current:t,main_product:Tt,epo_holder:Ct}):Tt.trigger("tm_change_product_image",{src:!1,element:o,element_current:t,main_product:Tt,epo_holder:Ct})):Tt.trigger("tm_restore_product_image",{element:o,element_current:t,main_product:Tt,epo_holder:Ct})):Tt.trigger("tm_attempt_product_image",{element:o,element_current:t,main_product:Tt,epo_holder:Ct})}),n.off("showhide.cpfcustom").on("showhide.cpfcustom",function(){var t,e,a=Bt(this),i=a.closest(".tmcp-field-wrap").find(".tm-epo-field"),o=!1;i.is(".tm-epo-variation-element")||(i.is("select")?""!==i.val()&&(o=!0):i.is(":checkbox")?i.is(":checked")&&(o=!0):i.is(":radio")?i.is(":checked")&&(o=!0,"yes"===Ht.tm_epo_show_only_active_quantities)&&i.closest(".tc-element-inner-wrap").find(".tm-epo-field.tmcp-radio").each(function(){Bt(this).closest(".tmcp-field-wrap").find(".tm-quantity").hide()}):i.val()&&(o=!0),t=(i=a.find(".tm-qty")).val(),e=i.attr("min")||"",o?("yes"===Ht.tm_epo_show_only_active_quantities&&a.show(),i.removeClass("ignore").prop("disabled",!1)):("yes"===Ht.tm_epo_show_only_active_quantities&&(a.hide(),t||i.val(e)),i.addClass("ignore").prop("disabled",!0)),Ct.is(".tc-show")&&setTimeout(function(){a.closest(".tcowl-carousel").trigger("refresh.owl.carousel")},200))}),c.off("change.cpfcustom").on("change.cpfcustom",function(){Bt(this).closest(".tmcp-field-wrap").find(".tm-quantity").trigger("showhide.cpfcustom")}),c.off("change.cpf").on("change.cpf",function(t,e){var a=Bt(this),i=a.closest(".tmcp-field-wrap"),o=a.closest(".tmcp-ul-wrap"),r=o.attr("data-tm-connector");a.is(":checkbox, :radio")&&(a.is(":radio")&&(e||(void 0!==r?Bt('[data-tm-connector="'+r+'"]').find(".tmcp-field-wrap").removeClass("tc-active").find(".tm-epo-reset-radio").addClass("tm-hidden"):o.find(".tmcp-field-wrap").removeClass("tc-active")),void 0!==r)&&Bt('[data-tm-connector="'+r+'"]').find(".tmcp-field-wrap").removeClass("tc-active").find(".tm-epo-reset-radio").addClass("tm-hidden"),a.is(":checked")?i.addClass("tc-active"):i.removeClass("tc-active")),a.is(".tm-epo-variation-element")||(a.is(".use_images:checkbox, .use_images:radio")&&a.attr("data-imagec")&&0<(e=i.find(".radio-image,.checkbox-image").first()).length&&(a.is(":checked")?e.prop("src",a.attr("data-imagec")):e.prop("src",a.attr("data-image"))),a.is(".use_images:radio")&&a.closest(".cpf-type-radio").find(".use_images:radio").not(a).each(function(){var t=Bt(this);t.closest(".tmcp-field-wrap").find(".radio-image").first().prop("src",t.attr("data-image"))}),a.is(".tmcp-range")&&a.trigger("change.cpflogic"),a.is("select")?a.trigger("tm-select-change"):(a.is(".tmcp-radio")&&a.closest(".cpf-element").find(".tm-quantity .tm-qty").each(function(){Bt(this).closest("li.tmcp-field-wrap").find(".tmcp-radio").is(":checked")?Bt(this).prop("disabled",!1):Bt(this).attr("disabled","disabled")}),j=!0,Pt.trigger({type:"tm-epo-update",norules:1,element:a}),j=!1)),a.trigger("tm_trigger_product_image"),Ct.is(".tc-show")&&setTimeout(function(){Bt(".tm-owl-slider").each(function(){Bt(this).trigger("refresh.owl.carousel")})},200),Tt.trigger("tm_attempt_product_image",{element:a,main_product:Tt,epo_holder:Ct})}),c.filter(":checkbox:checked, :radio:checked").each(function(){Bt(this).closest(".tmcp-field-wrap").addClass("tc-active"),Bt(this).trigger("change.cpf")}),o.off("change.cpfclearbutton").on("change.cpfclearbutton cpfclearbutton",function(){var t,e=Bt(this),a=e.closest(".tmcp-field-wrap");e.is(":checked")&&((t=(t=(t=(t=e.closest(".tc-element-inner-wrap")).find(".tc-epo-element-product-li-container").length?t.find(".tmcp-ul-wrap").first().children(".tmcp-field-wrap").not(".tc-epo-element-product-li-container"):t).find(".tm-epo-reset-radio")).length?t:e.closest(".tc-element-inner-wrap").find(".tm-epo-reset-radio").first()).removeClass("tm-hidden"),a.append(t))}),l.off("click.cpf").on("click.cpf",function(){var t=Bt(this),e=t.closest(".tc-element-inner-wrap").find(".tm-epo-field.tmcp-radio:checked");e.length&&(e.prop("checked",!1),e.trigger("change",{forced:1})),t.addClass("tm-hidden")}),B&&B.debounce&&d.on("keyup",B.debounce(function(){var t=Bt(this);"yes"===Ht.tm_epo_global_enable_validation&&Bt.tc_validator&&t.closest(".tmcp-ul-wrap").data("tm-validation")&&t.tc_rules()&&Pt.tc_validate().element(t),t.trigger("change.cpf"),t.closest(".tmcp-field-wrap").find(".tm-quantity").trigger("showhide.cpfcustom")},10)),p.off("change.cpfv tcupload").on("change.cpfv tcupload",function(){var i,t,o,r,n,c=Bt(this),e=c.closest("label"),a=c.closest(".tmcp-field-wrap"),l=a.find(".cpf-upload-container"),d=a.find(".tm-filename"),s=c.val().replace("C:\\fakepath\\",""),p=[],m=I.URL||I.webkitURL,_=a.find(".tc-upload-preview");l.length&&d.length<=0&&(d=Bt('<span class="tm-filename"></span>'),e.after(d)),void 0!==s&&"undefined"!==s||(s=""),c.next(".tmcp-upload-hidden").remove(),p=(p=c.attr("data-file"))?p.split("|"):[],this.files?t=Array.from(this.files):0<p.length&&(t=p),1<t.length?d.html(t.length+" "+(1===t.length?Ht.i18n_file:Ht.i18n_files)):1===t.length?d.html(s):d.empty(),_.length||(_=Bt('<div class="tc-upload-preview tc-hidden"></div>'),a.append(_)),_.empty(),i=(i=Ct.data("num_uploads"))||[],n=c.closest(".cpf-element").attr("data-uniqid"),i[n]||(i[n]=[]),(s||0<t.length)&&m&&m.createObjectURL?("yes"===Ht.tm_epo_upload_inline_image_preview&&(1<t.length?_.addClass("multiple"):_.removeClass("multiple"),_.removeClass("tc-hidden")),r=function(t,e,a,i,o){var a=c[0].files&&c[0].files[a]&&c[0].files[a].size?c[0].files[a].size:0,r='<div class="tc-upload-image">';e?r=r+'<img src="'+e+'">':r+='<div class="tc-file-ext-overlay"></div>',r=r+'<div class="tc-file-name">'+t.name+"</div>",(k||C)&&(r+='<button type="button" class="tc-upload-remove"><svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg></button>'),r=(r=o?r+'<div class="tc-file-ext">'+o+"</div>":r)+'<div class="tc-file-size">'+(e=a,a=(o=(t=Math).log)(e)/o(1024)|0,(e/t.pow(1024,a)).toFixed(a?2:0))+" "+(a?"KMGTPEZY"[--a]+"B":"bytes")+"</div>",i.append(r+="</div>")},t.forEach(function(t,e){var a;"yes"===Ht.tm_epo_upload_inline_image_preview&&(a=Bt('<div class="tc-upload-file"></div>'),_.append(a),(o=new Image).onload=function(){r(t,this.src,e,a)},o.onerror=function(){r(t,!1,e,a,t.name.split(".").pop())},0<p.length?o.src=p[e]:(o.src=m.createObjectURL(t),m.revokeObjectURL(t))),i[n].push(t.name)}),Ct.data("num_uploads",i)):delete i[n],i[n]&&0===i[n].length&&delete i[n]}),E.on("click",".tc-upload-remove",function(){var t,e,a,i,o,r,n,c,l=Bt(this);(k||C)&&(e=(t=l.closest(".cpf-element")).find(".tm-epo-field"),n=l.closest(".tc-upload-file"),r=(l=l.closest(".tmcp-field-wrap")).find(".tc-upload-preview"),l=l.find(".tm-filename"),a=n.index(),void 0!==(c=e.val().replace("C:\\fakepath\\",""))&&"undefined"!==c||(c=""),(o=Array.from(e[0].files)).splice(a,1),i=new k("").clipboardData||new C,o.forEach(function(t){i.items.add(t)}),1<o.length?r.addClass("multiple"):r.removeClass("multiple"),e[0].files=i.files,n.remove(),1<i.files.length?l.html(i.files.length+" "+(1===i.files.length?Ht.i18n_file:Ht.i18n_files)):1===i.files.length?l.html(c):l.empty(),(o=(o=Ct.data("num_uploads"))||[])[r=t.closest(".cpf-element").attr("data-uniqid")]||(o[r]=[]),o[r].splice(a,1),0===o[r].length&&(delete o[r],e.val("")),(n=e.next(".tmcp-upload-hidden")).length&&(0<(c=n.val().split("|")).length&&c.splice(a,1),0===c.length?n.remove():n.val(c.join("|"))),Ct.data("num_uploads",o))}),y.off("change.cpf input.cpf").on("change.cpf input.cpf",function(){var t=Bt(this);Pt.trigger("tm-epo-check-dpd"),t.data("tm-prev-value",t.val()),Pt.trigger({type:"tm-epo-update",norules:2})}).data("tm-prev-value",y.val()),Ct.find(".cpf-type-product").off("tc-logic").on("tc-logic",function(){var t=Bt(this);t.find(".tc-init").length||t.data("isactive")&&!t.data("donetclogic")&&(t.data("donetclogic",!0),t.find(".tc-epo-field-product").trigger("change.cpfproduct",{forced:3}))}),Ct.find(".cpf-type-product .tc-epo-field-product.tc-epo-field-product-checkbox").off("change.cpfrequired").on("change.cpfrequired",function(){var t,e,a=Bt(this).closest(".cpf-element");a.is(".tc-is-required")&&(e=(t=a.find(".tmcp-field.tc-epo-field-product-checkbox")).not(":checked"),(0<(a=a.find(".tmcp-field.tc-epo-field-product-checkbox:checked")).length?(e.prop("required",!1),a):(t.attr("required",!0),t)).prop("required",!0))}),Ct.find(".cpf-type-product .tc-epo-field-product").off("change.cpfproduct").on("change.cpfproduct",function(t,e){var a,i,o,r,n,c,l=Bt(this),d=l.closest(".cpf-element"),s=d.find(".tc-epo-element-product-container-wrap"),p=l.closest(".tmcp-field-wrap").find(".tc-epo-element-product-container-wrap"),m=0<p.length,_=!1,f=1e3,u=l,g=d.find(".tm-epo-field").not(".tc-epo-element-product-li-container .tm-epo-field"),h=g.filter(":checked"),v=l.attr("data-counter");if(!1!==d.data("isactive")&&(!e||2!==e.forced)&&(void 0===t.isTrigger||!l.data("triggeredonce")||e&&e.forced)){if(l.data("triggeredonce",1),l.is(":checkbox")||(f=t.isTrigger),g.is(":radio")?0<h.length&&(c=h.closest(".tmcp-field-wrap").find("input.tm-qty")):g.is(":checkbox")?0<h.length&&(c=l.closest(".tmcp-field-wrap").find("input.tm-qty")):c=g.closest(".tmcp-field-wrap").find("input.tm-qty"),l.is(":checkbox"))if(l.is(".tc-epo-field-product-hidden"))l.is(":checked")?s.addClass("tc-active-product"):s.removeClass("tc-active-product"),a=l.val(),i=l.attr("data-type"),d.find(".tc-epo-element-product-li-container").removeClass("tm-hidden");else{if(l.is(":checked"))m&&p.removeClass("tm-hidden");else{if(m&&p.addClass("tm-hidden"),!e||!e.forced)return;_=!0}_||(a=l.val(),i=l.attr("data-type"),d.find(".tc-epo-element-product-li-container").removeClass("tm-hidden"))}else if(l.is(":radio")){if(l.is(":checked"))m&&(s.addClass("tm-hidden"),p.removeClass("tm-hidden"));else{if(m&&p.addClass("tm-hidden"),!e||!e.forced)return;_=!0}_||(a=l.val(),i=l.attr("data-type"),d.find(".tc-epo-element-product-li-container").removeClass("tm-hidden"))}else l.is("select")&&(v=(u=t=l.children(":selected")).index(),""===l.children(":first").val()&&v--,a=l.val(),i=t.attr("data-type"),d.find(".tc-epo-element-product-li-container").removeClass("tm-hidden"));if(o=(l.is(".tc-epo-field-product-checkbox")?p:d).find(".tc-epo-element-product-container"),r=o.filter('[data-product_id="'+a+'"]'),n=r.find(Nt.associateQtySelector),""!==s.html()&&c&&0<c.length&&0===n.length&&c.val(0),l.is(":checkbox"))l.is(".tc-epo-field-product-hidden")&&(l.is(":checked")?"0"===n.val()&&"0"!==n.attr("min")&&n.val(n.attr("min")).trigger("change"):(n.val(0),n.closest(".tm-quantity-alt").removeClass("tm-hidden"),1!==e.forced&&n.closest(".tm-quantity-alt").find(".single_add_to_cart_product").trigger("cpfqtybutton"),s.find(Nt.associatedEpoCart).trigger("tm-epo-update")));else{if(!l.is(":radio")&&!l.is("select"))return;l.val()&&!l.data("set_initial")&&"0"===n.val()&&("0"!==n.attr("min")&&n.val(n.attr("min")).trigger("change"),l.data("set_initial",1))}a?0===r.length?(h={action:"wc_epo_get_associated_product_html",product_id:a,parent_id:Ct.attr("data-product-id"),mode:d.attr("data-mode"),layout_mode:d.attr("data-product-layout-mode"),uniqid:d.attr("data-uniqid"),name:l.attr("name"),counter:v,quantity_min:d.attr("data-quantity-min"),quantity_max:d.attr("data-quantity-max"),priced_individually:d.attr("data-priced-individually"),discount:d.attr("data-discount"),discount_type:d.attr("data-discount-type"),discount_exclude_addons:d.attr("data-discount-exclude-addons"),show_image:d.attr("data-show-image"),show_title:d.attr("data-show-title"),show_price:d.attr("data-show-price"),show_description:d.attr("data-show-description"),show_meta:d.attr("data-show-meta"),disable_epo:d.attr("data-disable-epo")},d.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),Bt.ajax({url:Ht.ajax_url,type:"POST",data:h,dataType:"json",success:function(t){200===t.result&&(r=Bt(t.html),(m?l.closest(".tmcp-field-wrap").find(".tc-epo-element-product-container-wrap").empty():d.find(".tc-epo-element-product-container-wrap")).append(r),re(xt,0,r,i,l,Pt,o,f,n),r.find(Nt.associateQtySelector).trigger("change"))},complete:function(){d.unblock()}})):(re(xt,0,r,i,l,Pt,o,f,n),r.find(Nt.associateQtySelector).trigger("change")):(o.addClass("tm-hidden"),g=Bt.epoAPI.util.parseJSON(u.attr("data-rules"))[0]||0,_=Bt.epoAPI.util.parseJSON(u.attr("data-original-rules"))||0,u.is(".tcenabled")&&u.data("associated_price_set",1),u.data("price_set",1),u.data("raw_price",g),u.data("raw_original_price",_),u.data("price",g),u.data("original_price",_),t=!1,(p=(p=u).is("option")?u.closest("select"):p).is(".tc-epo-field-product")&&(!p.is("select")&&(p.is(":checkbox")||p.is(":radio"))?p.is(":checked")&&(t=!0):""!==p.val()&&(t=!0)),Yt(u.closest(".tmcp-field-wrap").find(".tc-price").not(Nt.associatedEpoSelector+" .tc-price"),g,t?$t(g):u.data("price-html"),_,t?$t(_):""),y.trigger("change.cpf"))}}),E.off("click.cpfqtybutton cpfqtybutton",".cpf-type-product .single_add_to_cart_product").on("click.cpfqtybutton cpfqtybutton",".cpf-type-product .single_add_to_cart_product",function(){var t,e,a=Bt(this),i=a.closest(".tm-quantity-alt").find(Nt.associateQtySelector),o=a.is(".alt"),r=a.closest(".cpf-element").find(".tc-epo-element-product-container-wrap");a.data("inittriggeredonce")&&(t=Bt.epoAPI.math.toInt(i.attr("data-min")),e=Bt.epoAPI.math.toInt(i.attr("data-max")),o?(r.addClass("tc-active-product"),i.attr("min",t),e&&i.attr("max",e),"0"===i.val()&&("0"===i.attr("min")?i.val(1):i.val(i.attr("min"))).trigger("change"),a.removeClass("alt").text(a.attr("data-remove"))):(r.removeClass("tc-active-product"),i.val(0).trigger("change"),i.closest(".tm-quantity-alt").removeClass("tm-hidden"),a.addClass("alt").text(a.attr("data-add")))),a.data("inittriggeredonce",1),r.find(Nt.associatedEpoCart).trigger("tm-epo-update")}),E.off("change.cpfqtyalt input.cpfqtyalt",".cpf-type-product "+Nt.associateQtySelector).on("change.cpfqtyalt input.cpfqtyalt",".cpf-type-product "+Nt.associateQtySelector,function(){var t,e=Bt(this),a=e.closest(".cpf-element").find(".tm-epo-field").not(".tc-epo-element-product-li-container .tm-epo-field"),i=e.closest(".tm-quantity-alt").find(".single_add_to_cart_product"),o=a.filter(":checked"),r=Bt.epoAPI.math.toInt(e.attr("min")),n=Bt.epoAPI.math.toInt(e.attr("max"));if(a.is(".tc-epo-field-product-hidden")&&a.is(":checkbox")&&(0===o.length&&"0"!==e.val()?(a.prop("checked",!0).trigger("change"),o=a.filter(":checked")):"0"===e.val()&&o.length&&a.prop("checked",!1).trigger("change")),a.is(":radio")){if(0===o.length)return;t=o.closest(".tmcp-field-wrap").find("input.tm-qty").not(".tc-element-qty")}else if(a.is(":checkbox")){if(0===o.length)return;t=e.closest(".tmcp-field-wrap").find("input.tm-qty").not(".tc-element-qty")}else t=a.closest(".tmcp-field-wrap").find("input.tm-qty").not(".tc-element-qty");0!==t.length&&(t.attr("min",r),n&&t.attr("max",n),(o=e.closest(".tc-epo-element-product-container").find(Nt.associatedEpoCart)).trigger("tm-epo-update"),t.val(e.val()),0<Bt.epoAPI.math.toFloat(e.val())?(o.find(".tm-epo-field.tcenabled").removeClass("ignore"),e.removeClass("ignore")):(o.find(".tm-epo-field.tcenabled").addClass("ignore"),e.addClass("ignore")),a.trigger("change.cpfproduct",{forced:2}),i.data("inittriggeredonce")&&("0"===e.val()?i.removeClass("alt"):i.addClass("alt")),i.trigger("cpfqtybutton"))}),Pt.off("tm-epo-update").on("tm-epo-update",function(t){var D,B,e,a,N,H,L,M,i,R,U,o,r,n,c,Q,l,J,$,Z,W,X,d,s,G,V,Y,K,tt,et,p,m,_,at,f,u,g,h,it,ot,rt,nt,ct,lt,v,dt,y,b,st,pt,w=Bt(this),x=!1,mt=0,F=0,k=0,C=!1,_t=!0,I=[],P=0,A=0,E={},q=0,ft=!1,ut=!1,gt=!1,ht="",vt=!1,yt=!1,bt="",wt="",S=0,T=0,O=0,j=0,z=t.epoObject?Bt.extend(!0,{},t.epoObject):Bt.extend(!0,{},xt);z&&!z.noEpoUpdate&&(Lt.trigger("tcEpoUpdateStart",{epo:z,alternativeCart:z,this_product_type:At,cart:w,totalsHolder:It,fetchOptionPrices:Gt,epoHolder:Ct}),D=Bt.epoAPI.applyFilter("tc_get_bundleid",w.attr("data-product_id"),w,z),B=It.attr("data-price-override"),y=w,y=Bt.epoAPI.applyFilter("tc_getCurrentQty",Bt.epoAPI.math.toFloat(Vt(y).val()),y),st=(b=(b=w).is(".tc-epo-element-product-container-cart")&&((st=b.closest(".cpf-element")).is(".cpf-type-product-thumbnailmultiple")||st.is(".cpf-type-product-checkbox")?pt=b.closest(".tc-epo-element-product-holder").find(".tc-epo-element-product-container-variation-id"):(st.is(".cpf-type-product-thumbnail")||st.is(".cpf-type-product-radio")||st.is(".cpf-type-product-dropdown")||st.is(".cpf-type-product-single"))&&(pt=st.find(".tc-epo-element-product-container-variation-id")),pt)&&pt.length?pt:b).find(Jt(b)).val()||0,z.associated_connect&&1===z.associated_connect.length&&(y=parseFloat(z.main_product.find(Nt.associateQtySelector).not(Nt.associatedEpoSelector+" "+Nt.qtySelector).last().val())),t.stopImmediatePropagation(),mt=x=Bt.epoAPI.applyFilter("tcGetCurrentProductPrice",ae(It,!0),Pt,It),b=pt=Bt.epoAPI.applyFilter("tcGetCurrentProductRegularPrice",ee(It,!0),Pt,It),x=Bt.epoAPI.applyFilter("tcCalculateCurrentProductPrice",x,{epo:z,alternativeCart:kt,cart:w,main_product:Tt}),Number.isFinite(y)||!It.attr("data-is-sold-individually")&&0!==Vt(w).length||(y=1),It.data("totalsHolder_tc_totals_ob",{qty:y,product_price:mt,original_product_price:b}),t.norules?t.norules&&(1===t.norules&&Xt(z,t.element),Bt.tcepo.lateFieldsPrices[zt]=[],Ct.find(".tm-epo-late-field").toArray().forEach(function(t){var e,a,i,o,r;(t=Bt(t)).data("price",0),Bt.tcepo.lateFieldsPrices[zt].push({setter:t,price:t.data("tm-price-for-late"),original_price:t.data("tm-original-price-for-late"),bundleid:D,pricetype:(e=z,o=t=Bt(t=t),e=e.main_cart,r="input[name^='variation_id']",0<e.find("input.variation_id").length&&(r="input.variation_id"),e=(e=e.find(r).val())||0,t.is("select")&&(o=t.find("option:selected")),r=Bt.epoAPI.util.parseJSON(o.attr("data-rules")),o=Bt.epoAPI.util.parseJSON(o.attr("data-rulestype")),i="","object"==typeof r?"object"==typeof o?i=e in o?o[e]:"object"==typeof(a=Bt.epoAPI.util.parseJSON(t.closest(".tmcp-ul-wrap").attr("data-rulestype")))&&e in a?a[e]:o[0]:"object"==typeof(o=Bt.epoAPI.util.parseJSON(t.closest(".tmcp-ul-wrap").attr("data-ulestype")))&&(i=e in o?o[e]:o[0]):(r=t.closest(".tmcp-ul-wrap"),"object"==typeof Bt.epoAPI.util.parseJSON(r.attr("data-rules"))&&("object"==typeof o?i=e in o?o[e]:"object"==typeof(a=Bt.epoAPI.util.parseJSON(r.attr("data-rulestype")))&&e in a?a[e]:o[0]:"object"==typeof(o=Bt.epoAPI.util.parseJSON(r.attr("data-rulestype")))&&(i=e in o?o[e]:o[0]))),"object"==typeof i&&(i=i[0]),i=t.is(".tmcp-fee-field")&&-1!==Bt.inArray(i,["fee","stepfee","currentstepfee"])?"":i)})})):ie(z,w),z.associated_connect&&1===z.associated_connect.length&&(s=z.associated_connect,z.associated_connect.is("select"))&&(s=z.associated_connect.find("option:selected")),!1===x?(It.data("tm-floating-box-data",[]),It.empty(),z.associated_connect&&1===z.associated_connect.length&&Yt(s.closest(".tmcp-field-wrap").find(".tc-price").not(Nt.associatedEpoSelector+" .tc-price"),0,"",0,""),Ot.trigger("tm-epo-short-update",{container:Ft})):(l=Bt.epoAPI.applyFilter("tcAlterElementQty",1,{epo:z,alternativeCart:kt,currentCart:Pt,main_product:Tt}),void 0!==Pt.data("per_product_pricing")&&(_t=Pt.data("per_product_pricing")),_t=Bt.epoAPI.applyFilter("tcCalculatePerProductPricing",_t,{epo:z,alternativeCart:kt,cart:w,main_product:Tt}),!Dt||"woocommerce_before_add_to_cart_button"!==Ht.tm_epo_totals_box_placement||"variable"!==At&&"variable-subscription"!==At||It.data("moved_inside")||It.data("moved_inside",1),Lt.trigger("tcEpoBeforeOptionPriceCalculation",{epo:z,alternativeCart:z,this_product_type:At,cart:w,totalsHolder:It,fetchOptionPrices:Gt,epoHolder:Ct,total:0,original_total:0,floatingBoxData:I,showTotal:C,cart_fee_options_total:0,cart_fee_options_original_total:0}),z.associated_connect||t.noassociated||"yes"!==Ht.tm_epo_global_product_element_quantity_sync||w.is(Bt.tcAPI().associatedEpoCart)||w.find(Bt.tcAPI().associatedEpoCart).filter(":visible").toArray().forEach(function(t){Bt(t).trigger({type:"tm-epo-update",noassociated:1})}),F=(d=Gt(z,Ct,".tmcp-field:not(.tc-epo-field-product, .tc-is-math-special, .tc-is-math-cumulative)",0,0,I,C)).total,k=d.original_total,I=d.floatingBoxData,C=d.showTotal,m=d.elementsLength,g=(d=Gt(z,Ct,".tc-epo-field-product",0,0,I,C)).total,_=d.original_total,at=d.total_taxed,f=d.original_total_taxed,v=d.vat_total,I=d.floatingBoxData,C=C&&d.showTotal,m+=d.elementsLength,It.data("tm-floating-box-data",I),P=(d=Gt(z,Ct,".tmcp-fee-field",0,0,I,C,!1,!0)).total,A=d.original_total,I=d.floatingBoxData,C=d.showTotal,m+=d.elementsLength,Lt.trigger("tcEpoAfterOptionPriceCalculation",{epo:z,alternativeCart:z,this_product_type:At,cart:w,totalsHolder:It,fetchOptionPrices:Gt,epoHolder:Ct,total:F,original_total:k,floatingBoxData:I,showTotal:C,cart_fee_options_total:P,cart_fee_options_original_total:A}),Bt.tcepo.oneOptionIsSelected[zt]=C,z=te(z,zt,m),Kt(Tt,z),e=F,a=k,u=oe(z,parseFloat(x),parseFloat(b),parseFloat(e+g),parseFloat(a+_),D,It),F=(d=Gt(z,Ct,".tmcp-field.tc-is-math-special",F,k,I,C,void 0,void 0,void 0,!0)).total,k=d.original_total,I=d.floatingBoxData,C=d.showTotal,m=d.elementsLength,e=F,a=k,e+=u.normal[0],a+=u.normal[1],P+=u.fees[0],A+=u.fees[1],F=(d=Gt(z,Ct,".tmcp-field.tc-is-math-cumulative",F=F=e,k=a,I,C,void 0,void 0,void 0,!0,!0)).total,k=d.original_total,d.floatingBoxData,C=d.showTotal,m=d.elementsLength,e=F,a=k,0<P&&(C=!0),kt&&!_t&&(C=!1),"enable"!==Et&&"hideifoptionsiszero"!==Et&&"hideiftotaliszero"!==Et||(C=!0),1<y&&(C=!0),"variable"!==At&&"variable-subscription"!==At||Bt.epoAPI.math.toFloat(st)||(C=!1),"disable"===Et&&(C=!1),"yes"!==Ht.tm_epo_change_variation_price&&"yes"!==Ht.tm_epo_change_original_price||(C=!0),z.is_associated&&!_t&&(C=!1),"yes"===Ht.tm_epo_total_price_as_unit_price&&(y=1),I=parseFloat(x*y),Ht.extraFee&&(q=parseFloat(Ht.extraFee),Number.isFinite(q)||(q=0)),!1!==(d=Bt.epoAPI.applyFilter("tcCalculateFinalProductPrice",!1,{alternativeCart:kt,product_price:x,product_total_price:I,v_product_price:mt,tm_set_tax_price:Rt,main_product:Tt,totalsHolder:It,cartQty:y}))&&"object"==typeof d&&Object.prototype.hasOwnProperty.call(d,"productPrice")&&Object.prototype.hasOwnProperty.call(d,"productTotalPrice")&&(x=d.productPrice,I=d.productTotalPrice),e=Bt.epoAPI.applyFilter("tc_adjust_options_price_per_unit",e,I),F=parseFloat(e*y*l),F=Bt.epoAPI.applyFilter("tc_adjust_options_total_price",F,y,l,e,It),O="no"===Ht.tm_epo_global_product_element_quantity_sync?(S=parseFloat(g),parseFloat(at)):(S=parseFloat(g*y*l),parseFloat(at*y*l)),S=Bt.epoAPI.applyFilter("tc_adjust_options_productfield_total_price",S,y,l,e,It),O=Bt.epoAPI.applyFilter("tc_adjust_options_productfield_total_price_taxed",O,y,l,e,It),a=Bt.epoAPI.applyFilter("tc_adjust_options_price_per_unit",a,I),k=parseFloat(a*y*l),k=Bt.epoAPI.applyFilter("tc_adjust_options_original_total_price",k,y,l,a,It),j="no"===Ht.tm_epo_global_product_element_quantity_sync?(T=parseFloat(_),parseFloat(f)):(T=parseFloat(_*y*l),parseFloat(f*y*l)),T=Bt.epoAPI.applyFilter("tc_adjust_options_productfield_original_total_price",T,y,l,a,It),j=Bt.epoAPI.applyFilter("tc_adjust_options_productfield_original_total_price_taxed",j,y,l,a,It),"1"===B&&0<parseFloat(F)&&(I=mt=x=0),I=Bt.epoAPI.applyFilter("tc_adjust_product_total_price_without_options",I),F=Bt.epoAPI.applyFilter("tcAdjustTotal",F,{epo:z,totalsHolder:It,cart:w,main_product:Tt}),S=Bt.epoAPI.applyFilter("tcAdjustProductFieldTotal",S,{epo:z,totalsHolder:It,cart:w,main_product:Tt}),O=Bt.epoAPI.applyFilter("tcAdjustProductFieldTotalTaxed",O,{epo:z,totalsHolder:It,cart:w,main_product:Tt}),k=Bt.epoAPI.applyFilter("tcAdjustOriginalTotal",k,{epo:z,totalsHolder:It,cart:w,main_product:Tt}),T=Bt.epoAPI.applyFilter("tcAdjustProductFieldOriginalTotal",T,{epo:z,totalsHolder:It,cart:w,main_product:Tt}),j=Bt.epoAPI.applyFilter("tcAdjustProductFieldOriginalTotalTaxed",j,{epo:z,totalsHolder:It,cart:w,main_product:Tt}),m=q,d=F=parseFloat(Bt.epoAPI.applyFilter("tc_adjust_total",F,It)),g=e,at=P=parseFloat(Bt.epoAPI.applyFilter("tc_adjust_totals_fee",P,It)),f=_=F+P,l=k=parseFloat(Bt.epoAPI.applyFilter("tc_adjust_original_total",k,It)),J=a,$=A=parseFloat(Bt.epoAPI.applyFilter("tc_adjust_original_total_fee",A,It)),Z=o=k+A,W=I,X=parseFloat(I+_+m),m=parseFloat(b+o+m),x=Rt(x,It,void 0,0,void 0,void 0,!0),pt=Rt(pt,It,void 0,0,void 0,void 0,!0),I=Rt(I,It,void 0,0,void 0,void 0,!0),F=Rt(F,It,void 0,0,void 0,void 0,!0),e=Rt(e,It,void 0,0,void 0,void 0,!0),P=Rt(P,It,void 0,0,void 0,void 0,!0),_=parseFloat(P)+parseFloat(F),k=Rt(k,It,void 0,0,void 0,void 0,!0),a=Rt(a,It,void 0,0,void 0,void 0,!0),A=Rt(A,It,void 0,0,void 0,void 0,!0),o=parseFloat(A)+parseFloat(k),q=Rt(q,It,void 0,0,void 0,void 0,!0),r=I,I=Bt.epoAPI.applyFilter("tc_adjust_product_total_price",parseFloat(I+_+q),r,_,q,F,P,It),U=Bt.epoAPI.applyFilter("tc_adjust_product_total_original_price",parseFloat(r+o+q),r,o,q,k,A,It),v="1"===(It.attr("data-prices-include-tax")||Ht.prices_include_tax)?(it=v+parseFloat(Mt(F,It)),ot=v+parseFloat(Mt(_,It)),ct=v+parseFloat(Mt(I,It)),parseFloat(Mt(r,It))):(it=v+parseFloat(F-d),ot=v+parseFloat(_-f),ct=v+parseFloat(I-X),parseFloat(r-W)),d+=S,g+=S,f+=S,l+=T,J+=T,Z+=T,X+=S,m+=T,F+=O,e+=O,_+=O,k+=j,a+=j,o+=j,I+=O,U+=j,S=parseFloat(x+parseFloat(e)),T=parseFloat(x+parseFloat(a)),"yes"===Ht.tm_epo_fees_on_unit_price&&(S=parseFloat(x+parseFloat(e)+parseFloat(parseFloat(P)/y)),T=parseFloat(x+parseFloat(a)+parseFloat(parseFloat(A)/y))),O=$t(parseFloat(x+parseFloat(e)+parseFloat(parseFloat(P)/y)),It,!0,!0),j=$t(parseFloat(x+parseFloat(a)+parseFloat(parseFloat(A)/y)),It,!0,!0),q&&(vt=!0,ht=$t(q,It,!0,!0)),i=$t(I,It,!0,!0),R=$t(U,It,!0,!0),N=$t(F,It,!0,!0),L=$t(P,It,!0,!0),H=$t(k,It,!0,!0),M=$t(A,It,!0,!0),rt=$t(it),nt=$t(ot),lt=$t(ct),dt=$t(v),O=Bt.epoAPI.applyFilter("tc_adjust_formatted_unit_price",O,x,e,P,y),N=Bt.epoAPI.applyFilter("tc_adjust_formatted_options_total",N,F,e,y),L=Bt.epoAPI.applyFilter("tc_adjust_formatted_fees_total",L,P),i=Bt.epoAPI.applyFilter("tc_adjust_formatted_final_total",i,I,r,_,q,y),O=Bt.epoAPI.applyFilter("tcAdjustFormattedUnitPrice",O,{epo:z,totalsHolder:It,event:t,unit_price:S,productPrice:x,_total:e,total_plcart_fee_options_totals_fee:P,cartQty:y}),j=Bt.epoAPI.applyFilter("tcAdjustFormattedUnitOriginalPrice",j,{epo:z,totalsHolder:It,event:t,unit_original_price:T,productPrice:x,_original_total:a,total_plcart_fee_options_totals_fee:P,cartQty:y}),N=Bt.epoAPI.applyFilter("tcAdjustFormattedOptionsTotal",N,{epo:z,totalsHolder:It,event:t,total:F,_total:e,total_plus_fee:_,extraFee:q,cartQty:y}),H=Bt.epoAPI.applyFilter("tcAdjustFormattedOptionsOriginalTotal",H,{epo:z,totalsHolder:It,event:t,original_total:k,_original_total:a,original_total_plus_fee:o,extraFee:q,cartQty:y}),L=Bt.epoAPI.applyFilter("tcAdjustFormattedFeesTotal",L,{epo:z,totalsHolder:It,event:t,cart_fee_options_total:P,extraFee:q,cartQty:y}),M=Bt.epoAPI.applyFilter("tcAdjustFormattedFeesOriginalTotal",M,{epo:z,totalsHolder:It,event:t,cart_fee_options_original_total:A,extraFee:q,cartQty:y}),i=Bt.epoAPI.applyFilter("tcAdjustFormattedFinalTotal",i,{epo:z,totalsHolder:It,event:t,product_total_price:I,product_total_price_without_options:r,total_plus_fee:_,extraFee:q,cartQty:y}),R=Bt.epoAPI.applyFilter("tcAdjustFormattedFinalOriginalTotal",R,{epo:z,totalsHolder:It,event:t,product_total_original_price:U,product_total_price_without_options:r,original_total_plus_fee:o,extraFee:q,cartQty:y}),(0<F&&"showtgz"===St||"show"===St)&&(ft=!0,"yes"===Ht.tm_epo_enable_vat_options_total)&&(ut=!0),0!==P&&(gt=!0),i&&"show"===qt&&(yt=!0),E={qty:y,product_price:x,raw_product_price:mt,product_regular_price:pt,raw_product_regular_price:b,formatted_product_price:$t(parseFloat(x)*y),late_total_prices:u,late_total_price:Rt(u[0],It),late_total_original_price:Rt(u[1],It),raw_options_price_per_unit:g,raw_options_total_price:d,raw_cart_fee_options_total_price:at,raw_total_plus_fee:f,raw_options_original_price_per_unit:J,raw_options_original_total_price:l,raw_cart_fee_options_original_total_price:$,raw_original_total_plus_fee:Z,raw_product_total_price:X,raw_product_total_original_price:m,raw_product_total_price_without_options:W,options_price_per_unit:e,options_total_price:F,cart_fee_options_total_price:P,total_plus_fee:_,options_original_price_per_unit:a,options_original_total_price:k,cart_fee_options_total_original_price:A,original_total_plus_fee:o,vat_options_total:it,vat_options_total_plus_fee:ot,formatted_vat_options_total:rt,formatted_vat_options_total_plus_fee:nt,vat_total:ct,formatted_vat_total:lt,vat_product_base:v,formatted_vat_product_base:dt,product_total_price:I,product_total_original_price:U,product_total_price_without_options:r,product_unit_price:S,product_unit_original_price:T,formatted_unit_price:O,formatted_options_total:N,formatted_fees_total:L,formatted_final_total:i,formatted_unit_original_price:j,formatted_options_original_total:H,formatted_fees_original_total:M,formatted_final_original_total:R,formatted_extra_fee:ht,show_options_total:ft,show_fees_total:gt,show_extra_fee:vt,show_final_total:yt,show_options_vat:ut,unit_price:Ht.i18n_unit_price,show_unit_price:"yes"===Ht.tm_epo_show_unit_price,options_total:Ht.i18n_options_total,fees_total:Ht.i18n_fees_total,extra_fee:Ht.i18n_extra_fee,final_total:Ht.i18n_final_total,options_vat_total:Ht.i18n_vat_options_total,totals_box_before_unit_price:Ht.totals_box_before_unit_price,totals_box_after_unit_price:Ht.totals_box_after_unit_price,totals_box_before_vat_options_totals_price:Ht.totals_box_before_vat_options_totals_price,totals_box_after_vat_options_totals_price:Ht.totals_box_after_vat_options_totals_price,totals_box_before_options_totals_price:Ht.totals_box_before_options_totals_price,totals_box_after_options_totals_price:Ht.totals_box_after_options_totals_price,totals_box_before_fee_totals_price:Ht.totals_box_before_fee_totals_price,totals_box_after_fee_totals_price:Ht.totals_box_after_fee_totals_price,totals_box_before_extra_fee_price:Ht.totals_box_before_extra_fee_price,totals_box_after_extra_fee_price:Ht.totals_box_after_extra_fee_price,totals_box_before_final_totals_price:Ht.totals_box_before_final_totals_price,totals_box_after_final_totals_price:Ht.totals_box_after_final_totals_price},Ht.customer_price_format&&(bt=Ht.customer_price_format_wrap_start,wt=Ht.customer_price_format_wrap_end,Q=Ht.customer_price_format),N&&0<F&&(u=Ut(F),g=Ut(k),Q&&(u=Q.replace("__PRICE__",u).replace("__CODE__",Ht.current_currency),It.data("is-on-sale")||(g=Q.replace("__PRICE__",g).replace("__CODE__",Ht.current_currency))),u=Bt.epoAPI.applyFilter("tcFilterFormattedFTotal",u,{epo:z,totalsHolder:It,event:t,total:F,_total:e,total_plus_fee:_,extraFee:q,cartQty:y}),g=Bt.epoAPI.applyFilter("tcFilterFormattedFOriginalTotal",g,{epo:z,totalsHolder:It,event:t,original_total:k,total:k,_total:e,total_plus_fee:_,extraFee:q,cartQty:y}),"yes"===Ht.tm_epo_enable_original_final_total&&F!==k?(E.formatted_options_total=Bt.epoAPI.util.decodeHTML(Bt.epoAPI.template.html(Nt.templateEngine.tc_formatted_sale_price,{price:g,sale_price:u,customer_price_format_wrap_start:bt,customer_price_format_wrap_end:wt})),E._foriginal_total=g,E._ftotal=u):E.formatted_options_total=Bt.epoAPI.util.decodeHTML(Bt.epoAPI.util.decodeHTML(Bt.epoAPI.template.html(Nt.templateEngine.tc_formatted_price,{price:u,customer_price_format_wrap_start:bt,customer_price_format_wrap_end:wt})))),i&&0<=I&&(n=Ut(I),c="1"===B&&0<parseFloat(F)?parseFloat(Z+q):parseFloat(parseFloat(b*y)+Z+q),Q&&(n=Q.replace("__PRICE__",n).replace("__CODE__",Ht.current_currency),It.data("is-on-sale")||(c=Q.replace("__PRICE__",c).replace("__CODE__",Ht.current_currency))),n=Bt.epoAPI.applyFilter("tc_adjust_native_price",n,I),c=Ut(c=Rt(c,It,void 0,0,void 0,void 0,!0)),c=Bt.epoAPI.applyFilter("tc_adjust_native_regular_price",c,I),"yes"===Ht.tm_epo_enable_original_final_total&&(It.data("is-on-sale")&&"1"!==B||c!==n)?E.formatted_final_total=Bt.epoAPI.util.decodeHTML(Bt.epoAPI.template.html(Nt.templateEngine.tc_formatted_sale_price,{price:c,sale_price:n,customer_price_format_wrap_start:bt,customer_price_format_wrap_end:wt})):E.formatted_final_total=Bt.epoAPI.util.decodeHTML(Bt.epoAPI.util.decodeHTML(Bt.epoAPI.template.html(Nt.templateEngine.tc_formatted_price,{price:n,customer_price_format_wrap_start:bt,customer_price_format_wrap_end:wt}))),E._f_regular_price=c,E._fprice=n),E=Zt("formatted_fees_original_total","cart_fee_options_total_original_price",E,It),E=Zt("formatted_fees_total","cart_fee_options_total_price",E,It),E=Zt("formatted_final_original_total","product_total_original_price",E,It),E=Zt("formatted_final_total","product_total_price",E,It),E=Zt("formatted_options_original_total","options_original_total_price",E,It),E=Zt("formatted_options_total","options_total_price",E,It),E=Zt("formatted_unit_original_price","product_unit_original_price",E,It),E=Zt("formatted_unit_price","product_unit_price",E,It),void 0!==Bt.tcepo.showHideTotal&&void 0!==Bt.tcepo.showHideTotal[zt]&&(C=Bt.tcepo.showHideTotal[zt]),void 0!==(E=Bt.epoAPI.applyFilter("tc_adjust_tc_totals_ob",E,{epo_object:z,showTotal:C,epoHolder:Ct,totalsHolder:It,tm_set_price:Qt,tm_set_price_totals:$t,product_total_price:I,product_price:x,qty:y})).showTotal&&(C=E.showTotal),z.tc_totals_ob=E,C=Bt.epoAPI.applyFilter("tcFinalTotalsBoxVisibility",C,{epo:z,alternativeCart:kt,cart:w,main_product:Tt,totalsHolder:It,this_epo_totals_container:jt}),d=Bt.epoAPI.template.html(Nt.templateEngine.tc_final_totals,E),It.data("tm-html",d),It.data("tc_totals_ob",E),z.associated_connect&&1===z.associated_connect.length&&("1"===z.associated_connect.attr("data-no-price")?(K=Y=V=G=0,et=tt="",Yt(s.closest(".tmcp-field-wrap").find(".tc-price").not(Nt.associatedEpoSelector+" .tc-price"),G,tt,Y,et)):(G=E.product_price+E.options_price_per_unit+E.cart_fee_options_total_price/E.qty,V=E.raw_product_price+E.raw_options_price_per_unit+E.raw_cart_fee_options_total_price/E.qty,Y=E.product_regular_price+E.options_original_price_per_unit+E.cart_fee_options_total_original_price/E.qty,K=E.raw_product_regular_price+E.raw_options_original_price_per_unit+E.raw_cart_fee_options_original_total_price/E.qty,tt=Qt(G,z.this_epo_totals_containe,!1,!1,s),et=Qt(Y,z.this_epo_totals_containe,!1,!1,s),Yt(s.closest(".tmcp-field-wrap").find(".tc-price").not(Nt.associatedEpoSelector+" .tc-price"),G,tt,Y,et),z.associated_connect.data("tm-quantity",E.qty),z.associated_connect.data("tm-quantity")&&(G*=parseFloat(z.associated_connect.data("tm-quantity")),V*=parseFloat(z.associated_connect.data("tm-quantity")),Y*=parseFloat(z.associated_connect.data("tm-quantity")),K*=parseFloat(z.associated_connect.data("tm-quantity"))),tt=Qt(G,z.this_epo_totals_containe,!1,!1,s),et=Qt(Y,z.this_epo_totals_containe,!1,!1,s)),z.associated_connect.data("price_set",1),s.is(".tcenabled")&&s.data("associated_price_set",1),s.data("price_set",1),s.data("raw_price",V),s.data("raw_original_price",K),s.data("price",Rt(G,z.this_epo_totals_containe,s)),s.data("original_price",Rt(Y,z.this_epo_totals_containe,s)),z.associated_connect.data("price-changed",1),setTimeout(function(){z.associated_connect&&t.noassociated||z.mainEpoObject.main_cart.trigger({type:"tm-epo-update",norules:2})},20)),Lt.trigger("tcEpoAfterCalculateTotals",{epo:z,alternativeCart:kt,this_product_type:At,cart:w,bundleid:D,totalsObject:E,main_product:Tt,per_product_pricing:_t}),at=Bt.epoAPI.applyFilter("hide_native_price",!0),0<y?("yes"===Ht.tm_epo_change_variation_price&&(!0===at&&"disable"!==Et?Wt(w).hide():Wt(w).show()),!C||"disable"===Et||"hideiftotaliszero"===Et&&0===I||"hideifoptionsiszero"===Et&&0===_?(It.html(d=""),It.data("tm-floating-box-data",[])):(It.html(d),Lt.trigger("tc-totals-container",{epo:E,totals_holder:It,data:{epo_object:z,tm_set_price:Qt,tm_set_price_totals:$t,product_total_price:I,product_price:x,qty:y},tm_epo_js:Ht})),i&&0<=I&&(f=Wt(w),"yes"===Ht.tm_epo_change_variation_price&&(h=(h=It.data("is-on-sale")?Zt("formatted","raw",h={formatted:h=Bt.epoAPI.util.decodeHTML(Bt.epoAPI.template.html(Nt.templateEngine.tc_formatted_sale_price,{price:c,sale_price:n,customer_price_format_wrap_start:bt,customer_price_format_wrap_end:wt,before_price_text:Ht.variation_price_before_price_text,after_price_text:Ht.variation_price_after_price_text})),raw:E.product_total_price},It):Zt("formatted","raw",h={formatted:h=Bt.epoAPI.util.decodeHTML(Bt.epoAPI.template.html(Nt.templateEngine.tc_formatted_price,{price:n,customer_price_format_wrap_start:bt,customer_price_format_wrap_end:wt,before_price_text:Ht.variation_price_before_price_text,after_price_text:Ht.variation_price_after_price_text})),raw:E.product_total_price},It)).formatted,f.html(h).show()),"yes"===Ht.tm_epo_change_original_price)&&(kt&&0!==Tt.find(".cpf-bto-price").length||(void 0===(p=0===(p=z.associated_connect?z.main_product.find(Nt.associatedNativeProductPriceSelector):Bt(Nt.nativeProductPriceSelector)).length&&Tt.is(".tc-after-shop-loop")?Tt.closest(".product").find(".price"):p).data("tc-original-html")&&p.data("tc-original-html",p.html()),0<I?(h=(h=It.data("is-on-sale")?Zt("formatted","raw",h={formatted:h=Bt.epoAPI.util.decodeHTML(Bt.epoAPI.template.html(Nt.templateEngine.tc_formatted_sale_price,{price:c,sale_price:n,customer_price_format_wrap_start:bt,customer_price_format_wrap_end:wt,before_price_text:Ht.product_price_before_price_text,after_price_text:Ht.product_price_after_price_text})),raw:E.product_total_price},It):Zt("formatted","raw",h={formatted:h=Bt.epoAPI.util.decodeHTML(Bt.epoAPI.template.html(Nt.templateEngine.tc_formatted_price,{price:n,customer_price_format_wrap_start:bt,customer_price_format_wrap_end:wt,before_price_text:Ht.product_price_before_price_text,after_price_text:Ht.product_price_after_price_text})),raw:E.product_total_price},It)).formatted,p.html(h).show()):At&&"composite"!==At&&(z.associated_connect?(!z.variations_form.length||0<(h=z.this_epo_totals_container.data("variationIdElement")).length&&(h=parseFloat(h.val()))&&0!==h)&&p.html(Bt.epoAPI.util.decodeHTML(Ht.assoc_current_free_text)):p.html(Bt.epoAPI.util.decodeHTML(Ht.current_free_text)))),Lt.trigger("tcEpoMaybeChangePriceHtml",{epo:z,alternativeCart:kt,this_product_type:At,cart:w,bundleid:D,totalsObject:E,main_product:Tt,nativePrice:n})),kt?Ot.trigger({type:"tm-epo-update",norules:1}):jt.data("is_active",!0)):(z.associated_connect&&(p=z.main_product.find(Nt.associatedNativeProductPriceSelector)).html(p.data("tc-original-html")),Wt(w).each(function(){var t=Bt(this);t.data("tm-original-html")?t.html(t.data("tm-original-html")):t.data("tm-original-html",t.html())}),0===mt&&"yes"===Ht.tm_epo_remove_free_price_label?Wt(w).hide():"yes"!==Ht.tm_epo_change_variation_price||!0===at&&"disable"!==Et||Wt(w).show(),It.empty(),kt&&Ot.trigger({type:"tm-epo-update",norules:1})),Ot.trigger("tm-epo-after-update",{container:Ft}),Lt.trigger("tc-epo-after-update",{epo:E,totals_holder:It,data:{epo_object:z,add_late_fields_prices:oe,tm_set_price:Qt,tm_set_price_totals:$t,product_total_price:I,product_price:x,qty:y,bundleid:D,currentCart:Pt},tm_epo_js:Ht})))}),"variable"!==At&&"variable-subscription"!==At||((e=Ct.find(".tm-epo-variation-section").first()).find(".tm-epo-reset-variation").off("click.cpfv").on("click.cpfv",function(){var t=Bt(this),e=Bt.epoAPI.dom.id(t.attr("data-tm-for-variation")),a=t.closest(".cpf-type-variations"),i=t.closest(".cpf-element").find(".tm-epo-variation-element"),o=t.closest(".cpf-element").find(".tmcp-field-wrap");i.prop("checked",!1),o.removeClass("tc-active"),b.find("[data-attribute_name='attribute_"+e+"']").val("").trigger("change"),b.find("[data-attribute_name='attribute_"+e+"']").trigger("focusin"),Tt.find(".cpf-type-variations").not(a).each(function(t,e){b.find("[data-attribute_name='attribute_"+Bt.epoAPI.dom.id(Bt(e).find(".tm-epo-variation-element").first().attr("data-tm-for-variation"))+"']").trigger("focusin")}),t.trigger("blur"),b.trigger("woocommerce_update_variation_values_tmlogic")}),e.find("input.tm-epo-variation-element,input.tm-epo-variation-element + span").off("mouseup.cpfv").on("mouseup.cpfv",function(){var t=Bt(this);(t=t.is("span")?t.prev("input"):t).attr("disabled")&&b.find(".reset_variations").trigger("click"),t=Bt.epoAPI.dom.id(t.attr("data-tm-for-variation")),b.find("[data-attribute_name='attribute_"+t+"']").trigger("focusin")}),e.off("click."+h+".tmepo",".reset_variations, .tc-epo-element-variable-reset-variations").on("click."+h+".tmepo",".reset_variations, .tc-epo-element-variable-reset-variations",{_epoObject:xt},function(t){"yes"!==Ht.tm_epo_change_original_price||kt&&0!==Tt.find(".cpf-bto-price").length||(t=t.data._epoObject.associated_connect?t.data._epoObject.main_product.find(Nt.associatedNativeProductPriceSelector):Bt(Nt.nativeProductPriceSelector)).data("tc-original-html")&&t.html(t.data("tc-original-html")),b.find(".variations .reset_variations, .tc-epo-element-variable-reset-variations").first().trigger("click")}),e.find(".tm-epo-variation-element").off("change.cpfv tm_epo_variation_element_change").on("change.cpfv tm_epo_variation_element_change",function(t){var e,a=Bt(this),i=Bt.epoAPI.dom.id(a.attr("data-tm-for-variation")),o=a.val(),r=a.closest(".cpf-type-variations"),i=b.find("[data-attribute_name='attribute_"+i+"']");a.closest(".tm-epo-variation-section").is(".tm-hidden")||(t&&t.type&&"tm_epo_variation_element_change"===t.type||(e=!1,i.each(function(){if(this.value===o)return!(e=!0)}),e||i.trigger("focusin"),i.val(o).trigger("change")),o||i.trigger("focusin"),Tt.find(".cpf-type-variations").not(r).each(function(){b.find("#"+Bt.epoAPI.dom.id(Bt(this).find(".tm-epo-variation-element").first().attr("data-tm-for-variation"))).trigger("focusin")}),a.trigger("blur"),b.trigger("woocommerce_update_variation_values_tmlogic"))}).off("focusin.cpfv").on("focusin.cpfv",function(){var t=Bt(this);t.is("select")&&(t=Bt.epoAPI.dom.id(t.attr("data-tm-for-variation")),b.find("[data-attribute_name='attribute_"+t+"']").trigger("focusin"),b.trigger("woocommerce_update_variation_values_tmlogic"))}),b.off(v+"found_variation.tmepo tm_fix_stock",".single_variation_wrap").on(v+"found_variation.tmepo tm_fix_stock",".single_variation_wrap",function(){X(Bt(this),Ft)}),b.off(v+"found_variation.tmepo").on(v+"found_variation.tmepo",function(t,e){var a,i,o,r,n,c,l,d=Bt(this);It.data("is-on-sale",e.tc_is_on_sale),It.data("regular-price",Z(e.display_regular_price,It,e)),Lt.trigger("tm-epo-found-variation",{epo:xt,totalsHolder:It,totalsHolderContainer:s,currentCart:Pt,variationForm:d,variation:e}),i=(e={epoHolder:Ct,totalsHolder:It,totalsHolderContainer:s,currentCart:Pt,variationForm:d,variation:e}).epoHolder,o=e.totalsHolder,r=e.totalsHolderContainer,n=e.currentCart,c=e.variationForm,e=e.variation,l=o.data("variations"),o.data("current_variation",e),e&&"display_price"in e&&!o.data("tm-epo-is-woocs")?(a=e.display_price,o.data("priceIsWithDiscount","1"),o.removeData("tcprice")):l&&e&&e.variation_id&&void 0!==l[e.variation_id]?(a=l[e.variation_id],o.removeData("tcprice")):e&&Bt(e.price_html).find(".amount:last").length&&(a=(a=(a=(a=Bt(e.price_html).find(".amount:last").text()).replace(Ht.currency_format_thousand_sep,"")).replace(Ht.currency_format_decimal_sep,".")).replace(/[^0-9.]/g,""),a=parseFloat(a),o.removeData("tcprice")),a=Z(a,o,e),o.data("price",a),r.find(".cpf-product-price").val(a),setTimeout(function(){i.find("select.tm-epo-field").trigger("tm-select-change-html-all-math")},100),c.data("tm-styled-variations")||n.trigger({type:"tm-epo-update"}),X(d,Ft)}).off(v+"hide_variation.tmepo").on(v+"hide_variation.tmepo",{_epoObject:xt},function(t){"yes"!==Ht.tm_epo_change_original_price||kt&&0!==Tt.find(".cpf-bto-price").length||(t=t.data._epoObject.associated_connect?t.data._epoObject.main_product.find(Nt.associatedNativeProductPriceSelector):Bt(Nt.nativeProductPriceSelector)).data("tc-original-html")&&t.html(t.data("tc-original-html")),It.data("price",!1),It.removeData("tcprice"),Pt.trigger({type:"tm-epo-update",norules:2})}).off(v+"check_variations.tmepo").on(v+"check_variations.tmepo",function(){var a=0,t=e.find(".reset_variations");b.find(".variations select, .tc-epo-variable-product-selector").each(function(){var t=Bt(this).data("attribute_name")||Bt(this).attr("name"),e=Bt(this).val()||"";0<e.length&&a++,t,0}),0<a?"hidden"===t.css("visibility")&&t.css("visibility","visible").hide().fadeIn():t.css("visibility","hidden")}).trigger(v+"check_variations"),function(t,e,a,i){var o,r,n,c,l,d,s,p,m=t.epoEventId,_="input[name^='variation_id']",f=t.is_associated?"tc_variation_form.tmlogic":"wc_variation_form.tmlogic",u=t.is_associated?"tc_":"",g=t.variations_form,h=t.is_associated?g.find(".tc-epo-element-variations"):g.find(".variations"),v=t.is_associated?".tc-epo-element-variable-reset-variations":".reset_variations";if(g.attr("data-epo_id",t.epo_id),0<e.find("input.variation_id").length&&(_="input.variation_id"),i.find(".tm-epo-variation-element").length||i.data("tm-epo-variation-element")){if((o=i.find(".tm-epo-variation-section").first()).find(".cpf-type-variations").attr("data-epo_id",t.epo_id).attr("data-product_id",g.attr("data-product_id")),i.data("tm-epo-variation-element",o.find(".tm-epo-variation-element")),a&&"main"!==a&&!t.is_associated){if(h=(g=t.form).find('.composite_component[data-item_id="'+a+'"]').find(".variations"),g.attr("data-epo_id",t.epo_id),0===h.length)return;r=o.closest("li.tm-extra-product-options-field"),o.is(".tm-hidden")||h.hide(),h.after(o.addClass("tm-extra-product-options nopadding")),r.is(":empty")&&r.hide(),o.is(".section_popup")?o.wrap("<div class='tc-styled-variations tc-row'></div>"):(o.removeClass("tc-cell"),o.wrap("<div class='tc-styled-variations'></div>")),n=!1,e.off(f).on(f,function(){for(n=!0,g.on("click.tmlogic",".reset_variations",function(){o.find("select.tm-epo-variation-element").val("").children("option").prop("disabled",!1).show(),o.find(".tm-epo-variation-element").prop("disabled",!1).removeClass("tm-disabled").prop("checked",!1).closest("li").show(),Lt.trigger("tmlazy"),o.find(".tm-epo-variation-element").trigger("tm_trigger_product_image"),o.find("li").removeClass("tc-active tm-attribute-disabled").css("opacity","")}),e.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(){W(e,t)}),p=0;p<P.length;p+=1)c=P[p],"object"===typeof c&&(l="string"==typeof c.name||!1,d="string"==typeof c.selector||!1,s="function"==typeof c.func||!1,l)&&s&&("input[name='variation_id']"===d&&(d=_),c.selector?e.data("tm-styled-variations",1).off(u+c.name+p,d).on(u+c.name+p,d,c.func):e.data("tm-styled-variations",1).off(u+c.name+p).on(u+c.name+p,c.func));P=[],o.find(".tm-epo-variation-element:not(.tm-hidden .tm-epo-variation-element)").last().trigger("tm_epo_variation_element_change")}),Bt(function(){!1===n&&e.trigger(f)})}else{for(o.length&&(o.is(".tm-hidden")||h.hide(),r=o.closest("li.tm-extra-product-options-field"),h.after(o.addClass("tm-extra-product-options nopadding")),r.is(":empty")&&r.hide(),o.is(".section_popup")?o.wrap("<div class='tc-styled-variations tc-row'></div>"):(o.removeClass("tc-cell"),o.wrap("<div class='tc-styled-variations'></div>")),g.off("click.tmlogic",v).on("click.tmlogic",v,function(){o.find("select.tm-epo-variation-element").val("").children("option").prop("disabled",!1).show(),o.find(".tm-epo-variation-element").prop("disabled",!1).removeClass("tm-disabled").prop("checked",!1).closest("li").show(),Lt.trigger("tmlazy"),o.find(".tm-epo-variation-element").trigger("tm_trigger_product_image"),o.find("li").removeClass("tc-active tm-attribute-disabled").css("opacity","")})),g.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(){W(g,t)}),p=0;p<P.length;p+=1)c=P[p],"object"===typeof c&&(l="string"==typeof c.name||!1,d="string"==typeof c.selector||!1,s="function"==typeof c.func||!1,l)&&s&&("input[name='variation_id']"===d&&(d=_),c.selector?g.data("tm-styled-variations",1).off(u+c.name+p,d).on(u+c.name+p,d,c.func):g.data("tm-styled-variations",1).off(u+c.name+p).on(u+c.name+p,c.func));P=[],o.find(".tm-epo-variation-element:not(.tm-hidden .tm-epo-variation-element)").last().trigger("tm_epo_variation_element_change")}Bt.tcepo.formSubmitEvents[m][Bt.tcepo.formSubmitEvents[m].length]={trigger:function(){return!0},on_true:function(){return o.find(".tm-epo-variation-element").attr("disabled","disabled"),!0},on_false:function(){o.find(".tm-epo-variation-element").prop("disabled",!1)}},Bt(F.body).on("added_to_cart",function(){o.find(".tm-epo-variation-element").prop("disabled",!1)})}}(xt,Ft,g,Ct)),i.trigger("tm-select-change-html"),r.trigger("change.cpf",{init:1}),n.trigger("showhide.cpfcustom"),o.filter(":checked").trigger("cpfclearbutton"),Lt.on("tm-do-epo-update",function(){Pt.trigger({type:"tm-epo-update"})}),Lt.trigger("tm-epo-init-events",{epo:{epo_id:w,form:xt.form,currentCart:Pt,cart_container:Ft,epo_holder:Ct,totals_holder_container:s,totals_holder:It,main_cart:Ot,main_epo_inside_form:Dt,product_id_selector:x,epo_id_selector:u,product_id:m,this_epo_container:_,this_totals_container:f,this_epo_totals_container:jt}}),Lt.trigger("epoEventHandlers",{epo:xt,currentCart:Pt,cartContainer:Ft,qtyElement:y,epoHolder:Ct,totalsHolderContainer:s,totalsHolder:It,variationForm:b,variation_id_selector:t,main_epo_inside_form:Dt,this_product_type:At,get_price_excluding_tax:R,get_price_including_tax:M}),"disable"!==Et&&s.addClass("tc-show"),Lt.trigger("epo_options_before_visible"),"yes"===Ht.tm_epo_progressive_display?setTimeout(function(){Ct.css("opacity",0).addClass("tc-show").animate({opacity:1},Nt.epoAnimationDelay,"easeOutExpo",function(){Lt.trigger("epo_options_visible"),Lt.trigger("tmlazy")})},Nt.epoDelay):(Ct.addClass("tc-show"),Lt.trigger("epo_options_visible"),Lt.trigger("tmlazy")),Tt.addClass("tc-init")}function At(t){var e=t.variations_form,a=t.main_cart,i=t.this_epo_container,o=t.is_associated?"tc_variation_form.cpf":"wc_variation_form.cpf";e.off(o).on(o,function(){e.data("epo_loaded")||(Q(i),J(i),Bt.tcepo.lateFieldsPrices[t.epoEventId]=[],Pt(t),ut(t),bt(t),t.noEpoUpdate=!1,setTimeout(function(){T(i),a.trigger({type:"tm-epo-update",rules:"init"})},10),e.data("epo_loaded",!0))}),v&&e.trigger(o),Lt.trigger("epo-after-init",{epo:t})}function Et(t,e,a,i,o){var r=Bt.extend(!0,{},t),n=i.attr("data-product-id"),c=i.attr("data-epo-id"),l=".tm-product-id-"+n,d="[data-epo-id='"+c+"']",s="p"+n+"e"+c,p=Bt(".tc-extra-product-options"+l+d),m=Bt(".tc-totals-form"+l+d),_=Bt(".tc-epo-totals"+l+d);t.isManual=!0,Bt.tcepo.formSubmitEvents[s]=[],Bt.tcepo.errorObject[s]=!1,Bt.tcepo.initialActivation[s]=!1,t.product_id=n,t.product_id_selector=l,t.epo_id=c,t.epo_id_selector=d,t.epoEventId=s,t.noEpoUpdate=!0,t.thisForm=e,t.this_epo_container=p,t.this_totals_container=m,t.this_epo_totals_container=_,nt(),o.find(".tm-collapse").tmtoggle(),o.find(".tm-section-link").tmsectionpoplink(),kt(e),wt(e),xt(),pt(e,t),ct(e),mt(i),_t(i.find(".tc-lightbox-image").not(".tm-extra-product-options-variations .radio-image")),Q(i),J(i),T(i),Bt.tcToolTip(e.find(".tm-tooltip")),Pt(t,e,a),t.noEpoUpdate=!1,a.trigger({type:"tm-epo-update",norules:2}),setTimeout(function(){t.main_cart.trigger({type:"tm-epo-update",epoObject:r,norules:1})},200),X(a,e)}function h(t,e,a,i,o,r,n){var c,l,d,s,p,m=!1,_=!1,f=!1,u=void 0!==a,g=!1,h=0<Bt(".variation_form_section .variations-table").length,v=!1;if((t=Bt(t)).is(".tc-init")&&!n)return!0;if(q=e?t:Bt(I),Lt.trigger("tm-epo-init-start"),u||t.is(".product")&&(g=!0,u=A.find(Nt.epoSelector).length),u||"no"!==Ht.tm_epo_enable_final_total_box_all||t.is(".tm-no-options-composite")){g&&(Lt.trigger("tm-epo-init-no-options"),!t.is(".product")||t.is(".tm-no-options-pxq")||t.is(".tm-no-options-composite")||(t=A)),a||(g=t.find(Nt.addToCartSelector).last(),a=(a=0<g.length?g.val():(g=Bt(".tc-totals-form.tm-totals-form-main")).attr("data-product-id"))||""),i||(i=parseInt(t.find("input.tm-epo-counter").last().val(),10),Number.isFinite(i))||(i=""),l=Bt(".tc-extra-product-options"+(g=".tm-product-id-"+a)+(y="[data-epo-id='"+i+"']")),x=Bt(".tc-totals-form"+g+y),d=Bt(".tc-epo-totals"+g+y),p=t.find(".variations_form").not(".composite_component .variations_form").first(),c="p"+a+"e"+i,p&&p.attr("data-product_id")&&p.attr("data-product_id")!==a&&(p=t.find(".variations_form[data-product_id='"+a+"']")),0===(m=V(t,t,"form",a)).length&&(t.is(".tc-shortcode-wrap")?m=V(x,x,".tc-totals-form",a):t.is(".tc-epo-element-product-container")&&(0===(m=t.find(Nt.associatedEpoCart)).length&&0===(m=l.parent(Nt.associatedEpoSelector)).length&&(m=t.find(".tc-epo-element-product-container-right")),v=!0)),v&&0===p.length&&t.is(".variations_form")&&(p=t),Bt.tcepo.formSubmitEvents[c]=[],Bt.tcepo.errorObject[c]=!1,Bt.tcepo.initialActivation[c]=!1,0<m.find(Nt.epoSelector).length&&(_=!0),(f=0<m.find(".tc-totals-form").length?!0:f)||(Bt.tcepo.formSubmitEvents[c][Bt.tcepo.formSubmitEvents[c].length]={trigger:function(){return!0},on_true:function(){var t=Bt(".tc-totals-form.tm-product-id-"+a+"[data-epo-id='"+i+"']").tcClone(),e=Bt('<div class="tm-hidden tm-formepo-normal"></div>');return m.find(".tm-formepo-normal").remove(),e.append(t),m.append(e),!0},on_false:function(){setTimeout(function(){Bt(".tm-formepo-normal").remove()},100)}}),_||(Bt.tcepo.formSubmitEvents[c][Bt.tcepo.formSubmitEvents[c].length]={trigger:function(){return!0},on_true:function(){var t=Bt(Nt.epoSelector+".tm-product-id-"+a+"[data-epo-id='"+i+"']").tcClone().addClass("formepo"),e=Bt('<div class="tm-hidden tm-formepo"></div>');return m.find(".tm-formepo").remove(),e.append(t),m.append(e),!0},on_false:function(){setTimeout(function(){Bt(".tm-formepo").remove()},100)}}),s={main_product:t,main_cart:m,epo_id:i,form:G(t),main_epo_inside_form:_,product_id_selector:g,epo_id_selector:y,product_id:a,this_epo_container:l,this_totals_container:x,this_epo_totals_container:d,qtySelector:Nt.qtySelector,manualInitEPO:Et,epoEventId:c,variations_form:p,has_epo:u,is_quickview:e,is_associated:v,is_epo_shortcode:l.is(".tc-shortcode"),mainEpoObject:r,associated_connect:o,noEpoUpdate:!0},Bt(s.form).data("epo_object",s),m.data("product_id",a).data("epo_id",i).data("product_id_selector",g).data("epo_id_selector",y),_=(f=s).this_epo_container,x=f.main_product,f=f.epoEventId,u=_.find(".tm-limit"),r=_.find(".tm-exactlimit"),o=_.find(".tm-minimumlimit"),_.on("change.cpflimit","input.tm-epo-field.tmcp-checkbox",function(){var t=Bt(this);K(t,!0),tt(t,!0)}),u.length&&et(u,x,f),r.length&&at(r,x,f),o.length&&it(o,f),y=(g=s).epoEventId,b=g.this_epo_container,"yes"===Ht.tm_epo_upload_popup&&(Bt.tcepo.formSubmitEvents[y][Bt.tcepo.formSubmitEvents[y].length]={trigger:function(){return!0},on_true:function(){var t,e,a=b.data("num_uploads");return a&&Object.keys(a).length&&(t=Bt.tcFloatBox({fps:1,ismodal:!0,refresh:"fixed",width:"50%",height:"300px",classname:"flasho tc-wrapper",data:Bt.epoAPI.template.html(Nt.templateEngine.tc_upload_messages,{files:a,title:Ht.i18n_uploading_files,message:Ht.i18n_uploading_message})}),e=function(){t.destroy(),E.off("ajaxSuccess",e)},E.on("ajaxSuccess",e)),!0},on_false:function(){return!0}}),kt(l),wt(l),xt(),pt(l,s),E.on("click.cpfurl change.cpfurl tmredirect",".tc-url-container .tmcp-radio, .tc-url-container .tmcp-radio+label",function(t){var e=Bt(this).attr("data-url");e&&I.location!==e&&(t.preventDefault(),I.location=e)}),E.on("change.cpfurl tmredirect",".tc-url-container .tmcp-select",function(t){var e=Bt(this).children("option:selected").attr("data-url");e&&I.location!==e&&(t.preventDefault(),I.location=e)}),Bt.tcToolTip(l.find(".tm-tooltip")),l.find(".tm-collapse").tmtoggle(),l.find(".tm-section-link").tmsectionpoplink(),n&&l.addClass("reactivate"),0<p.length?(n&&p.data("epo_loaded",!1),d.data("price",!1),(h?function t(e){var a=requestAnimationFrame(function(){t(e)}),i=e.variations_form,o=i.data("bound"),r=e.is_associated?"tc_variation_form.cpf":"wc_variation_form.cpf";o&&(cancelAnimationFrame(a),At(e),i.trigger(r))}:At)(s)):(setTimeout(function(){Q(l),J(l),T(l),Bt.tcepo.lateFieldsPrices[c]=[],Pt(s),ut(s),bt(s),Lt.trigger("epo-after-init-in-timeout",{epo:s}),m.trigger("tm-epo-check-dpd"),s.noEpoUpdate=!1,m.trigger({type:"tm-epo-update",rules:"init"})},20),Lt.trigger("epo-after-init",{epo:s})),nt(),ct(l),mt(l),_t(l.find(".tc-lightbox-image").not(".tm-extra-product-options-variations .radio-image"));var y,b,w,x,F,k,_=s,C=_.this_epo_container;if(_=Ht.theme_name){switch(_=_.toLowerCase(),F=C.find("select"),_){case"flatsome":case"flatsome-child":case"flatsome child":F.wrap('<div class="custom select-wrapper"/>');break;case"avada":case"avada-child":case"avada child":F.wrap('<div class="avada-select-parent tm-select-parent"></div>'),Bt('<div class="select-arrow">&#xe61f;</div>').appendTo(C.find(".tm-select-parent")),I.calc_select_arrow_dimensions?(I.calc_select_arrow_dimensions(),Lt.on("tmsectionpoplink cpflogicdone",function(){I.calc_select_arrow_dimensions()})):I.calcSelectArrowDimensions&&(I.calcSelectArrowDimensions(),Lt.on("tmsectionpoplink cpflogicdone",function(){I.calcSelectArrowDimensions()}));break;case"bazar":case"bazar-child":case"bazar child":F.wrap('<div class="tm-select-wrapper select-wrapper"/>');break;case"blaszok":case"blaszok-child":case"blaszok child":k=function(){setTimeout(function(){Bt(".tm-extra-product-options select").not(".hasCustomSelect").filter(":visible").each(function(){Bt(this).is(".mpcthSelect")||(Bt(this).width(Bt(this).outerWidth()),Bt(this).customSelect({customClass:"mpcthSelect"}))})},100)},Lt.on("cpflogicrun",function(){k()}),Lt.on("epo_options_visible",function(){k()});break;case"handmade":case"handmade child theme":Bt(".tm-owl-slider.tcowl-carousel").addClass("manual")}Lt.trigger("tm-theme-specific-actions",{epo:{theme_name:_,all_epo_selects:F}})}return E.off("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus").on("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus",function(){Bt(this).closest(".quantity").find(Nt.qtySelector).trigger("change.cpf")}),u=s,Lt.trigger("tm-epo-compatibility",{epo:u}),v||(r=d,x=m,Bt.tcFloatingTotalsBox(r,e,x),o=(w=s).form,f=w.epoEventId,Lt.trigger("tm-from-submit",{epo:w,functions:{tm_apply_validation:It,apply_submit_events:Ct}}),!It(w)&&Bt.tcepo.formSubmitEvents[f].length&&o.on("submit",function(){Ct(w)}),Lt.on("tc_apply_validation",function(){return It(w)}),Kt(t,s=te(s,c,s))),Lt.trigger("tm-epo-init-end",{epo:s}),s}Lt.trigger("tm-epo-init-end-no-options")}function qt(){var i,t;"no"===Ht.tm_epo_no_lazy_load&&Bt.extend(Bt.lazyLoadXT,{autoInit:!1,selector:"img.tmlazy",srcAttr:"data-original",visibleOnly:!1,updateEvent:Bt.lazyLoadXT.updateEvent+" tmlazy"}),0<(i=Bt(".tm-no-options-pxq, .tm-no-options-composite")).length&&(i.addClass("initializing"),i.each(function(t,e){var a;1<(a=(e=Bt(e)).find("input.tm-epo-counter")).length?a.each(function(){var t=Bt(this),e=t.closest(".cart").parent();(e=e.is("form")?e.parent():e).is(".initializing")||h(e,!1,void 0,parseInt(t.val(),10))}):h(e,!1),i.removeClass("initializing")})),setTimeout(function(){try{0<(t=Bt(Nt.epoSelector).not(Nt.associatedEpoSelector+" "+Nt.epoSelector+", .tm-no-options-pxq, .tm-no-options-composite, .wc-product-table "+Nt.epoSelector)).length&&(i.addClass("initializing"),t.each(function(){var t=Bt(this),a=t.attr("data-product-id"),e=t.attr("data-epo-id"),i=!1,o=!1,r=t.closest(".tc-after-shop-loop.tm-has-options");(0!==r.length||0===(r=Bt(Nt.tcAddToCartSelector+"[data-epo-id='"+e+"'][value='"+a+"']").closest("form,.cart").first().parent()).length&&0===(r=Bt(Nt.addToCartSelector+"[value='"+a+"']").closest("form,.cart").first().parent()).length&&0===(r=t.closest("form,.cart").first().parent(".tm-has-options")).length&&(t.is(".tc-shortcode")&&(r=t.wrap('<div class="tc-shortcode-wrap tc-wrap-'+e+'"></div>'),r=t.parent()),0<r.length))&&(o=!0),0<r.length&&(o&&(i=!0,t.closest("form,.cart").first().append(Bt('<input name="add-to-cart" value="'+a+'" type="hidden">')),t.closest("form,.cart").first().append(Bt('<input type="hidden" value="" class="variation_id" name="variation_id">'))),1<(o=(r=r.is("form")?r.parent():r).find("input.tm-epo-counter")).length?o.each(function(){var t=Bt(this),e=t.closest(".cart").parent();(e=e.is("form")?e.parent():e).is(".initializing")||h(e,i,a,parseInt(t.val(),10))}):h(r,i,a,e))}),i.removeClass("initializing"))}catch(t){I.console.log(t),b=t}},1)}function t(){Bt(".tc-associated-table-product td.product-name").each(function(){var t=Bt(this);0===t.find(".product-name").length&&t.wrapInner(Bt('<div class="tc-associated-table-product-indent"></div>'))})}Ht&&e&&(Bt.fn.val=function(){var t=r.apply(this,arguments);return 0<arguments.length&&Bt(this).is(".input-text.qty")&&Bt(this).trigger("change.cpf"),t},"no"===Ht.tm_epo_no_lazy_load&&Bt.lazyLoadXT&&Bt.extend(Bt.lazyLoadXT,{autoInit:!1,updateEvent:Bt.lazyLoadXT.updateEvent+" tmlazy"}),Nt.localInputDecimalSeparator=""===Ht.tm_epo_global_input_decimal_separator?Ht.currency_format_decimal_sep:Bt.epoAPI.locale.getSystemDecimalSeparator(),Nt.localDecimalSeparator=""===Ht.tm_epo_global_displayed_decimal_separator?Ht.currency_format_decimal_sep:Bt.epoAPI.locale.getSystemDecimalSeparator(),Nt.localThousandSeparator=""===Ht.tm_epo_global_displayed_decimal_separator?Ht.currency_format_thousand_sep:Bt.epoAPI.locale.getSystemDecimalSeparator(),Nt.epoDelay=Ht.tm_epo_start_animation_delay||I.tc_epo_delay||500,Nt.epoAnimationDelay=Ht.tm_epo_animation_delay?Ht.tm_epo_start_animation_delay:I.tc_epo_animation_delay||500,Nt.getElementFromFieldCache=[],Nt.epoSelector=".tc-extra-product-options",Nt.associatedEpoSelector=".tc-extra-product-options-inline",Nt.associatedEpoCart=".tc-epo-element-product-container-cart",Nt.addToCartSelector="input[name='add-to-cart']",Nt.tcAddToCartSelector="input.tc-add-to-cart",Nt.qtySelector="input.qty,input[name='quantity'],select.qty,.drop-down-button #qty,.plus-minus-button #qty,.slider-input #amount",Nt.associateQtySelector="input.tm-qty-alt",Nt.addToCartButtonSelector=".add_to_cart_button, .single_add_to_cart_button",Nt.compositeSelector=".bto_item,.component",Nt.nativeProductPriceSelector=".woocommerce .product p.price",Nt.associatedNativeProductPriceSelector=".product-price .associated-price",Nt.templateEngine=Bt.epoAPI.applyFilter("tc_adjust_templateEngine",{price:e.template("tc-price"),sale_price:e.template("tc-sale-price"),tc_chars_remanining:e.template("tc-chars-remanining"),tc_final_totals:e.template("tc-final-totals"),tc_floating_box:e.template("tc-floating-box"),tc_floating_box_nks:e.template("tc-floating-box-nks"),tc_formatted_price:e.template("tc-formatted-price"),tc_formatted_sale_price:e.template("tc-formatted-sale-price"),tc_lightbox:e.template("tc-lightbox"),tc_lightbox_zoom:e.template("tc-lightbox-zoom"),tc_section_pop_link:e.template("tc-section-pop-link"),tc_upload_messages:e.template("tc-upload-messages")}),Bt.tcAPI=function(){return Nt},Bt.tcAPIGet=function(t){return Nt[t]},Bt.tcAPISet=function(t,e){Nt[t]=e},Bt.tc_validator&&(Bt.extend(Bt.tc_validator.messages,{required:Ht.tm_epo_global_validator_messages.required,email:Ht.tm_epo_global_validator_messages.email,url:Ht.tm_epo_global_validator_messages.url,number:Ht.tm_epo_global_validator_messages.number,digits:Ht.tm_epo_global_validator_messages.digits,maxlengthsingle:Bt.tc_validator.format(Ht.tm_epo_global_validator_messages.maxlengthsingle),maxlength:Bt.tc_validator.format(Ht.tm_epo_global_validator_messages.maxlength),minlengthsingle:Bt.tc_validator.format(Ht.tm_epo_global_validator_messages.minlengthsingle),minlength:Bt.tc_validator.format(Ht.tm_epo_global_validator_messages.minlength),max:Bt.tc_validator.format(Ht.tm_epo_global_validator_messages.max),min:Bt.tc_validator.format(Ht.tm_epo_global_validator_messages.min),step:Bt.tc_validator.format(Ht.tm_epo_global_validator_messages.step),lettersonly:Bt.tc_validator.format(Ht.tm_epo_global_validator_messages.lettersonly),lettersspaceonly:Bt.tc_validator.format(Ht.tm_epo_global_validator_messages.lettersspaceonly),alphanumeric:Bt.tc_validator.format(Ht.tm_epo_global_validator_messages.alphanumeric),alphanumericunicode:Bt.tc_validator.format(Ht.tm_epo_global_validator_messages.alphanumericunicode),alphanumericunicodespace:Bt.tc_validator.format(Ht.tm_epo_global_validator_messages.alphanumericunicodespace),repeaterminrows:Bt.tc_validator.format(Ht.tm_epo_global_validator_messages.repeaterminrows),repeatermaxrows:Bt.tc_validator.format(Ht.tm_epo_global_validator_messages.repeatermaxrows)}),Bt.tc_validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^[a-zA-Z0-9.-]+$/i.test(t)},Bt.tc_validator.messages.alphanumeric),Bt.tc_validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},Bt.tc_validator.messages.lettersonly),Bt.tc_validator.addMethod("lettersspaceonly",function(t,e){return this.optional(e)||/^[a-z,\u0020]+$/i.test(t)},Bt.tc_validator.messages.lettersspaceonly),Bt.tc_validator.addMethod("alphanumericunicode",function(t,e){return this.optional(e)||/^[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0148\u014A-\u017F\u0180-\u01BF\u01C4-\u024F\u1E02-\u1EF3\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u3040-\u309f\u30a0-\u30ff\u4e00-\u9faf\u3400-\u4dbf\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF\u10E60-\u10E7F\u1EC70-\u1ECBF\u1ED00-\u1ED4F\u1EE00-\u1EEFF\u0530-\u1058F]+$/i.test(t)},Bt.tc_validator.messages.alphanumericunicode),Bt.tc_validator.addMethod("alphanumericunicodespace",function(t,e){return this.optional(e)||/^[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0148\u014A-\u017F\u0180-\u01BF\u01C4-\u024F\u1E02-\u1EF3\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u3040-\u309f\u30a0-\u30ff\u4e00-\u9faf\u3400-\u4dbf\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF\u10E60-\u10E7F\u1EC70-\u1ECBF\u1ED00-\u1ED4F\u1EE00-\u1EEFF\u0530-\u1058F,\u0020]+$/i.test(t)},Bt.tc_validator.messages.alphanumericunicodespace),Bt.tc_validator.addMethod("repeaterminrows",function(t,e,a){return Bt.epoAPI.math.toInt(Bt(e).closest(".tc-element-inner-wrap").find(".tc-repeater-element").length)>=Bt.epoAPI.math.toInt(a)},Bt.tc_validator.messages.repeaterminrows),Bt.tc_validator.addMethod("repeatermaxrows",function(t,e,a){return Bt.epoAPI.math.toInt(Bt(e).closest(".tc-element-inner-wrap").find(".tc-repeater-element").length)<=Bt.epoAPI.math.toInt(a)},Bt.tc_validator.messages.repeatermaxrows),Bt.tc_validator.addMethod("product_element_radio_qty",function(t,e){return 0<Bt(e).closest(".tm-element-ul-product").find("input.tc-epo-field-product.tmcp-radio:checked").closest(".tc-epo-element-product-holder").find(".tm-qty").first().val()},Bt.tc_validator.messages.required),Bt.tc_validator.addMethod("product_element_select_qty",function(t,e){return 0<Bt(e).closest(".tm-element-ul-product").find("select.tc-epo-field-product.tmcp-select").closest(".tc-epo-element-product-holder").find(".tm-qty").first().val()},Bt.tc_validator.messages.required)),Bt.epoAPI.util.escapeSelector=(a=/([!"$%&'()*+,/:;<=>?@[\]^`{|}~])/g,function(t){return t.replace(a,"\\$1")}),Bt.epoAPI.util.unformat=function(t){var t=Bt.epoAPI.math.unformat(t,Nt.localInputDecimalSeparator),e=parseFloat(t);return Number.isFinite(e)?e:t},Bt.epoAPI.util.parseParams=function(t,a){return"string"!=typeof t||void 0===t.split?[]:t.split("&").map(function(t){var e={};return 1<(t=(t=!0===a?decodeURIComponent(t.replace(/\+/g,"%20")):t).split("=").map(function(t){var e=t.split("?");return 1<e.length?e[1]:t})).length&&(e[t[0]]=t[1]),e}).filter(function(t){return null!==t}).reduce(function(t,e){return Object.assign({},t,e)},{})},Bt.tmempty||(Bt.tmempty=function(e){var t=1===[void 0,null,!1,0,"","0"].filter(function(t){return e===t}).length,a=!1;return"object"==typeof e?0===Object.keys(e).filter(function(t){return Object.prototype.hasOwnProperty.call(e,t)}).length:t||a}),Bt.tmType||(Bt.tmType=function(t){return Object.prototype.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}),Bt.is_on_screen||(Bt.fn.is_on_screen=function(){var t=Bt(I),e=Bt.epoAPI.dom.scroll(),a=this.offset(),e={top:e.top,left:e.left};return e.right=e.left+t.width(),e.bottom=e.top+t.height(),a.right=a.left+this.outerWidth(),a.bottom=a.top+this.outerHeight(),!(e.right<a.left||e.left>a.right||e.bottom<a.top||e.top>a.bottom)}),Bt().tmtoggle||(Bt.fn.tmtoggle=function(){var t=this,e=!1,n=0;if(0!==t.length)return void 0===I.tc_accordion_offset&&(I.tc_accordion_offset=-100),t.each(function(){var t,i,o,r=Bt(this);r.data("tm-toggle-init")||(r.data("tm-toggle-init",1),t=r.find(".tm-toggle"),i=r.find(".tm-collapse-wrap"),o=Bt(".tm-collapse.tmaccordion").find(".tm-toggle"),0!==t.length&&0!==i.length&&(i.is(".closed")?(Bt(i).removeClass("closed open").addClass("closed").hide(),Bt(t).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-down"),Bt(t).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-closed")):(Bt(i).removeClass("closed open").addClass("open").show(),Bt(t).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-up"),Bt(t).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-open"),e=!0),t.each(function(t,a){Bt(a).on("closewrap.tmtoggle",function(){r.is(".tmaccordion")&&Bt(i).is(".closed")||(Bt(i).removeClass("closed open").addClass("closed"),Bt(this).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-down"),Bt(this).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-closed"),Bt(i).removeClass("tm-animated fadein"),r.is(".tmaccordion"),Bt(i).animate({height:"toggle"},100,function(){Bt(i).hide()}),Lt.trigger("tmlazy"))}),Bt(a).on("openwrap.tmtoggle",function(t,e){r.is(".tmaccordion")&&Bt(o).not(Bt(this)).trigger("closewrap.tmtoggle"),Bt(i).removeClass("closed open").addClass("open"),Bt(this).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-up"),Bt(this).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-open"),Bt(i).show().removeClass("tm-animated fadein").addClass("tm-animated fadein"),setTimeout(function(){Lt.trigger("tmlazy")},200),setTimeout(function(){void 0===e&&n&&r.is(".tmaccordion")&&!r.is_on_screen()&&Lt.tcScrollTo(Bt(a),10,I.tc_accordion_offset)},110)}),Bt(a).on("click.tmtoggle",function(t){t.preventDefault(),Bt(i).is(".closed")?Bt(this).trigger("openwrap.tmtoggle"):Bt(this).trigger("closewrap.tmtoggle")}),Bt(a).find(".tm-qty").closest(".cpf-element").find(".tm-epo-field").on("change.cpf",function(){Bt(a).trigger("openwrap.tmtoggle")})})))}),void 0===I.tc_accordion_closed_on_page_load&&!e&&0<t.filter(".tmaccordion").length&&t.filter(".tmaccordion").first().find(".tm-toggle").trigger("openwrap.tmtoggle",{nomove:1}),n=1,t}),Bt().tmpoplink||(Bt.fn.tmpoplink=function(t){var o,r={classname:"flasho tc-wrapper cart-popup"};if(0!==this.length)return t&&(r=Bt.extend({},r,t)),o=function(t){return Bt.epoAPI.template.html(e.template("tc-cart-options-popup"),{title:t.title,id:t.id,html:t.html,close:Ht.i18n_close})},this.each(function(){var t,e,a,i=Bt(this);i.is(".tc-poplink")||(i.addClass("tc-poplink"),e=Bt(this).attr("href"),t=Bt(this).attr("data-title"),e=Bt(e).html(),t=t||Ht.i18n_addition_options,a=o({id:"tc-floatbox-content",html:e,title:t}),i.on("click.tmpoplink",function(t){Bt.tcFloatBox({fps:1,ismodal:!1,refresh:100,width:"80%",height:"80%",classname:r.classname,data:a}),t.preventDefault()}))})}),(o=function(t,e,a){return this.this_epo_totals_container=t,this.is_quickview=e,this.main_cart=a,!(e||!Ht.floating_totals_box||"disable"===Ht.floating_totals_box||!a||!t.length)&&(this.init(),this)}).prototype={constructor:o,onUpdate:function(){var t,e=this.this_epo_totals_container.data("tm-html"),a=this.this_epo_totals_container.data("tm-floating-box-data"),i=[];a&&a.length&&Bt.each(a,function(t,e){""===e.title&&(e.title="&nbsp;"),""===e.value&&(e.value="&nbsp;"),e.title?(e.title=Bt("<div>"+e.title+"</div>"),e.title.find("span").remove(),e.title=e.title.html()):e.title="&nbsp;",this.is_nks&&(""!==e.label_show&&(e.title=""),""!==e.value_show)&&(e.value=""),"yes"===Ht.tm_epo_auto_hide_price_if_zero&&!0===Bt.tmempty(e.price)?e.price="":e.price=Qt(e.price,this.this_epo_totals_container,!0,!1),i.push({label_show:e.label_show,value_show:e.value_show,title:e.title,value:e.value,quantity:e.quantity,price:e.price})}),(!e||""!==e||a&&a.length)&&(e&&""!==e||this.is_nks)||(e="",this.floatingBox.hide()),a=Bt.epoAPI.template.html(this.engineTemplate,{html_before:Ht.floating_totals_box_html_before,html_after:Ht.floating_totals_box_html_after,option_label:Ht.i18n_option_label,option_value:Ht.i18n_option_value,option_qty:Ht.i18n_option_qty,option_price:Ht.i18n_option_price,values:i,totals:e}),this.floatingBox.html(a),this.onUpdateScroll(),"yes"===Ht.floating_totals_box_add_button&&(t=this.main_cart.find(Nt.addToCartButtonSelector).first()).tcClone().addClass("tc-add-to-cart-button").on("click",function(){t.trigger("click")}).appendTo(this.floatingBox)},onUpdateScroll:function(){"always"===Ht.floating_totals_box_visibility?this.floatingBox.is(":empty")&&!this.is_nks_alt?this.floatingBox.hide():this.floatingBox.show():("hideafterscroll"===Ht.floating_totals_box_visibility&&(Lt.scrollTop()>Bt.epoAPI.math.toFloat(Ht.floating_totals_box_pixels)&&!this.is_nks_alt?this.floatingBox.is(":hidden")||(!1===this.is_nks?this.floatingBox.fadeOut():this.floatingBox.hide()):!this.floatingBox.is(":hidden")&&!this.is_nks_alt||this.floatingBox.is(":empty")&&!this.is_nks_alt||(!1===this.is_nks?this.floatingBox.fadeIn():this.floatingBox.show())),"afterscroll"===Ht.floating_totals_box_visibility&&(Lt.scrollTop()>Bt.epoAPI.math.toFloat(Ht.floating_totals_box_pixels)||this.is_nks_alt?this.floatingBox.is(":hidden")&&!this.floatingBox.is(":empty")||this.is_nks_alt?!1===this.is_nks?this.floatingBox.fadeIn():this.floatingBox.show():!this.floatingBox.is(":hidden")&&this.floatingBox.is(":empty")&&(!1===this.is_nks?this.floatingBox.fadeOut():this.floatingBox.hide()):this.floatingBox.is(":hidden")||(!1===this.is_nks?this.floatingBox.fadeOut():this.floatingBox.hide())))},addEvents:function(){this.onUpdate(),this.main_cart.on("tm-epo-after-update",this.onUpdate.bind(this)),this.main_cart.on("tm-epo-short-update",this.onUpdate.bind(this)),!1===this.is_nks&&Lt.on("scroll",this.onUpdateScroll.bind(this))},init:function(){this.floatingBox=Bt('<div class="tm-floating-box '+Ht.floating_totals_box+'"></div>'),this.nks_selector=Bt(".tm-floating-box-nks").first(),this.alt_selector=Bt(".tm-floating-box-alt").first(),this.engineTemplate=Nt.templateEngine.tc_floating_box,this.is_nks=!1,this.is_nks_alt=!1,0<this.nks_selector.length?(this.is_nks=!0,this.floatingBox.removeClass("top left right bottom").appendTo(this.nks_selector).show()):(0<this.alt_selector.length?this.floatingBox.removeClass("top left right bottom").appendTo(this.alt_selector):this.floatingBox.appendTo("body")).hide(),(0<this.nks_selector.length||0<this.alt_selector.length)&&(this.is_nks_alt=!0,this.engineTemplate=Nt.templateEngine.tc_floating_box_nks),this.addEvents()}},Bt.tcFloatingTotalsBox=function(t,e,a){var i=!1;return t&&t.length&&void 0===t.data("tcfloatingtotalsbox")&&(i=new o(t,e,a),t.data("tcfloatingtotalsbox",i)),i},Bt.tc_product_image={},Bt.tc_product_image_store={},Bt.tc_replace_object_values=function(a,i){return Object.keys(a).forEach(function(e){Object.keys(a[e]).forEach(function(t){void 0!==i[e]&&void 0!==i[e][t]&&Object.prototype.hasOwnProperty.call(i[e],t)&&(a[e][t]=i[e][t])})}),a},Bt.tc_maybe_copy_object_values=function(a,i){return Object.keys(i).forEach(function(e){Object.keys(i[e]).forEach(function(t){void 0===i[e]||!Object.prototype.hasOwnProperty.call(i[e],t)||void 0===i[e][t]||void 0!==a[e]&&void 0!==a[e][t]||(void 0===a[e]&&(a[e]={}),a[e][t]=i[e][t])})}),a},Bt.tc_pre_populate_store=function(){var t={0:{},1:{},2:{},3:{}};return t[0].src="",t[0].srcset="",t[0].sizes="",t[0].title="",t[0].alt="",t[0]["data-src"]="",t[0]["data-large_image"]="",t[0]["data-large_image_width"]="",t[0]["data-large_image_height"]="",t[1]["data-thumb"]="",t[2].src="",t[3].href="",t[3].title="",t},Bt.tc_populate_store=function(t,e){var a=e.find(".flex-control-nav li:eq(0) img"),e=e.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),i=t,t=t.closest("a"),o={0:{},1:{},2:{},3:{}};return o[0].src=i.attr("src"),o[0].srcset=i.attr("srcset"),o[0].sizes=i.attr("sizes"),o[0].title=i.attr("title"),o[0].alt=i.attr("alt"),o[0]["data-src"]=i.attr("data-src"),o[0]["data-large_image"]=i.attr("data-large_image"),o[0]["data-large_image_width"]=i.attr("data-large_image_width"),o[0]["data-large_image_height"]=i.attr("data-large_image_height"),o[1]["data-thumb"]=e.attr("data-thumb"),o[2].src=a.attr("src"),o[3].href=t.attr("href"),o[3].title=t.attr("title"),o},Bt.tc_maybe_copy_object_values_from_img=function(a,t,e){var i,o,r=e.find(".flex-control-nav li:eq(0) img"),e=e.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),n=t,t=t.closest("a"),c=[["src","srcset","sizes","title","alt","data-src","data-large_image","data-large_image_width","data-large_image_height","large-image"],["data-thumb"],["src"],["href","title"]];return[n,e,r,t].forEach(function(t,e){void 0!==t&&void 0!==t[0]&&(i=t[0].attributes,Bt.each(i,function(){this.specified&&(o=this.name,-1!==Bt.inArray(o,c[e]))&&(void 0===a[e]||void 0!==a[e]&&void 0===a[e][o])&&(void 0===a[e]&&(a[e]={}),a[e][o]=this.value)}))}),a},Bt.fn.tc_set_attr=function(t,e,a){(void 0===Bt.tc_product_image[a=void 0===a?0:a]||void 0!==Bt.tc_product_image[a]&&void 0===Bt.tc_product_image[a][t])&&(void 0===Bt.tc_product_image[a]&&(Bt.tc_product_image[a]={}),Bt.tc_product_image[a][t]="",this.attr(t))&&(Bt.tc_product_image[a][t]=this.attr(t)),!1===e?this.removeAttr(t):this.attr(t,e)},Bt.fn.tc_reset_attr=function(t,e){void 0!==Bt.tc_product_image[e=void 0===e?0:e]&&(void 0!==Bt.tc_product_image[e][t]&&this.attr(t,Bt.tc_product_image[e][t]),delete Bt.tc_product_image[e][t])},Bt.fn.tc_update_attr=function(t,e){void 0!==Bt.tc_product_image[e=void 0===e?0:e]&&(Bt.tc_product_image[e][t]=this.attr(t))},Bt.fn.tc_image_update=function(t,e){var a,t=Bt(t),e=Bt(e),i=this.data("epo_object"),o=i.main_product.closest("#product-"+i.product_id),r=o;o.length<=0&&(r=i.main_product.closest(".post-"+i.product_id)),o=(t=t.is("select")?t.children("option:selected"):t).data("image-variations"),a=(i=""!==Ht.tm_epo_global_product_image_selector?Bt(Ht.tm_epo_global_product_image_selector):r.find("a.woocommerce-main-image img, img.woocommerce-main-image,a img").not(".thumbnails img,.product_list_widget img,img.emoji,a.woocommerce-product-gallery__trigger img").first()).closest("a"),1<i.length&&(i=i.first()),t&&o&&0<e.length?(e.removeAttr("data-o_src").removeAttr("data-o_title").removeAttr("data-o_alt").removeAttr("data-o_srcset").removeAttr("data-o_sizes").removeAttr("srcset").removeAttr("sizes"),t=o.imagep,o.imagep.image_link||(t=o.image),e.attr("title",t.image_title),e.attr("alt",t.image_alt),t.image_srcset&&e.attr("srcset",t.image_srcset),t.image_sizes&&e.attr("sizes",t.image_sizes),i.tc_set_attr("title",t.image_title),i.tc_set_attr("alt",t.image_alt),i.tc_set_attr("data-large-image",t.image_link),i.data.wc27_zoom_target&&(i.data.wc27_zoom_target.tc_set_attr("data-thumb",t.image_link),r.find(".flex-control-nav li:eq(0) img").tc_set_attr("src",t.image_link)),a.tc_set_attr("href",t.image_link),a.tc_set_attr("title",t.image_caption)):(i.tc_reset_attr("title"),i.tc_reset_attr("alt"),i.tc_reset_attr("data-large-image"),i.data.wc27_zoom_target&&(i.data.wc27_zoom_target.tc_reset_attr("data-thumb"),r.find(".flex-control-nav li:eq(0) img").tc_reset_attr("src")),a.tc_reset_attr("href"),a.tc_reset_attr("title"))},Bt.fn.tm_find_matching_variations=function(t,e){var a,i,o=[];if(t)for(a=0;a<t.length;a+=1)i=t[a],Bt.fn.tm_variations_match(i.attributes,e)&&o.push(i);return o},Bt.fn.tm_variations_match=function(e,a){var i,o,r=!0;return Object.keys(e).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(i=e[t],o=a[t],void 0!==i)&&void 0!==o&&0!==i.length&&0!==o.length&&i!==o&&(r=!1)}),r},Bt().tclightbox||(Bt.fn.tclightbox=function(){if(0!==this.length)return this.each(function(){var a,t,e,i,o=Bt(this);!o.is(".tcinit")&&(a=o.attr("src")||o.attr("data-original"),t=(t=o.closest("label")).closest(".tmcp-field-wrap").find(".tm-epo-field[id='"+t.attr("for")+"']"),a=t.attr("data-imagel")||t.attr("data-imagep")||t.attr("data-image")||a)&&(o.addClass("tcinit").before(Bt.epoAPI.template.html(Nt.templateEngine.tc_lightbox,{})),t=o.prev(),o.wrap("<div class='tc-lightbox-image-wrap'/>"),o.after(t),e=t.find(".tc-lightbox-button"),i=function(){e.addClass("tcinit").on("click.tclightbox",function(t){var e;0<Bt(".tc-closing.tc-lightbox").length||(e=Bt.epoAPI.dom.size(),e=Bt("<img>").addClass("tc-lightbox-img").attr("src",a).css("maxHeight",e.visibleHeight+"px").css("maxWidth",e.visibleWidth+"px"),Bt.tcFloatBox({fps:1,ismodal:!1,refresh:"fixed",width:"auto",height:"auto",top:"0%",left:"0%",classname:"flasho tc-lightbox",animateIn:"tc-lightbox-zoomin",animateOut:"tc-lightbox-zoomout",data:Bt.epoAPI.template.html(Nt.templateEngine.tc_lightbox_zoom,{img:e[0].outerHTML}),zIndex:102001,cancelClass:".tc-lightbox-img, .tc-lightbox-button-close",unique:!0}),t.preventDefault())})},"yes"===Ht.tm_epo_preload_lightbox_image?((o=new Image).src=a,o.onload=function(){i()}):i())})}),Bt().tmsectionpoplink||(Bt.fn.tmsectionpoplink=function(){if(0!==this.length)return this.each(function(){var t,e,a,i,o,r,n=Bt(this);n.data("tmsectionpoplink")||(n.data("tmsectionpoplink",!0),t=n.attr("data-sectionid"),e=Ht.i18n_addition_options,a=n.closest(".cpf-section[data-uniqid='"+t+"']"),i=!1,o=Bt('<div class="fl-overlay"></div>').css({zIndex:parseInt(n.zIndex,10)-1,opacity:.8}),r=function(){var t=Bt("#tm-section-pop-up");t.parents().removeClass("noanimated"),o.unbind().remove(),t.after(a),t.remove(),a.find(".tm-section-link").show(),a.find(".tm-section-pop").hide()},n.attr("data-title")&&(e=n.attr("data-title")),n.on("click.tmsectionpoplink",function(t){t.preventDefault(),i=!1,o.appendTo("body").on("click",r),a.before(Bt.epoAPI.template.html(Nt.templateEngine.tc_section_pop_link,{title:e,close:Ht.i18n_close})),(t=Bt("#tm-section-pop-up")).find(".float-editbox").prepend(a),a.find(".tm-section-link").hide(),a.find(".tm-section-pop").show(),t.parents().addClass("noanimated"),t.find(".floatbox-cancel").on("click",function(){i||(i=!0,r())}),Lt.trigger("tmlazy"),Lt.trigger("tmsectionpoplink")}))})}),Bt().cpfdependson||(Bt.fn.cpfdependson=function(a,i,c){var o=[];if(0!==this.length&&"object"==typeof a)return i=i||"show",Bt.each(a,function(a,t){var i,n;o[a]=0,Array.isArray(t)&&Bt.each(t,function(t,e){if("object"!=typeof e)return!0;(i=function(t){var e,a,i=Bt(t);if(0!==i.length){if(i.is(".cpf-section"))return t.find(".tm-epo-field");if(e=i.attr("data-uniqid"),a=(t=i.closest(".tc-extra-product-options")).attr("data-epo-id"),!t.is(".reactivate")&&Nt.getElementFromFieldCache&&Nt.getElementFromFieldCache[a]&&Nt.getElementFromFieldCache[a][e])return Nt.getElementFromFieldCache[a][e];if(0<(t=i.attr("class").split(" ").map(function(t){return-1!==t.indexOf("cpf-type-",0)?t:null}).filter(function(t){return null!=t?t:null})).length)switch(t="cpf-type-product"===(t=t[0])?i.is(".cpf-type-product-mode-product")||i.is(".cpf-type-product-checkbox")||i.is(".cpf-type-product-thumbnailmultiple")?"cpf-type-checkbox":i.is(".cpf-type-product-dropdown")?"cpf-type-select":"cpf-type-radio":t){case"cpf-type-radio":return Nt.getElementFromFieldCache[a]=[],Nt.getElementFromFieldCache[a][e]=i.find(".tm-epo-field.tmcp-radio"),Nt.getElementFromFieldCache[a][e];case"cpf-type-checkbox":return Nt.getElementFromFieldCache[a]=[],Nt.getElementFromFieldCache[a][e]=i.find(".tm-epo-field.tmcp-checkbox"),Nt.getElementFromFieldCache[a][e];case"cpf-type-select":return Nt.getElementFromFieldCache[a]=[],Nt.getElementFromFieldCache[a][e]=i.find(".tm-epo-field.tmcp-select"),Nt.getElementFromFieldCache[a][e];case"cpf-type-selectmultiple":return Nt.getElementFromFieldCache[a]=[],Nt.getElementFromFieldCache[a][e]=i.find(".tm-epo-field.tmcp-selectmultiple"),Nt.getElementFromFieldCache[a][e];case"cpf-type-textarea":return Nt.getElementFromFieldCache[a]=[],Nt.getElementFromFieldCache[a][e]=i.find(".tm-epo-field.tmcp-textarea"),Nt.getElementFromFieldCache[a][e];case"cpf-type-textfield":return Nt.getElementFromFieldCache[a]=[],Nt.getElementFromFieldCache[a][e]=i.find(".tm-epo-field.tmcp-textfield"),Nt.getElementFromFieldCache[a][e];case"cpf-type-color":return Nt.getElementFromFieldCache[a]=[],Nt.getElementFromFieldCache[a][e]=i.find(".tm-epo-field.tm-color-picker"),Nt.getElementFromFieldCache[a][e];case"cpf-type-range":return Nt.getElementFromFieldCache[a]=[],Nt.getElementFromFieldCache[a][e]=i.find(".tm-epo-field.tmcp-range"),Nt.getElementFromFieldCache[a][e];case"cpf-type-date":return Nt.getElementFromFieldCache[a]=[],Nt.getElementFromFieldCache[a][e]=i.find(".tm-epo-field.tmcp-date"),Nt.getElementFromFieldCache[a][e];case"cpf-type-time":return Nt.getElementFromFieldCache[a]=[],Nt.getElementFromFieldCache[a][e]=i.find(".tm-epo-field.tmcp-time"),Nt.getElementFromFieldCache[a][e];case"cpf-type-variations":return Nt.getElementFromFieldCache[a]=[],Nt.getElementFromFieldCache[a][e]=i.closest(".cpf-section").find(".tm-epo-field.tm-epo-variation-element"),Nt.getElementFromFieldCache[a][e]}}}(e.element))&&0<i.length&&(i.each(function(t,e){var a,i,o=Bt(e),r="change.cpflogic";n&&!n.closest(".tc-extra-product-options-inline").length||(a=".tm-product-id-"+o.closest(".tc-extra-product-options").attr("data-product-id"),i="[data-epo-id='"+o.closest(".tc-extra-product-options").attr("data-epo-id")+"']",n=Bt(".tc-extra-product-options"+a+i)),e&&0<o.length&&(!o.data("tmhaslogicevents")||c)&&(o.is(".tm-epo-variation-element")?(d("found_variation.tmlogic",!1,function(){T(n),Lt.trigger("tm-do-epo-update")}),d("hide_variation.tmlogic",!1,function(){T(n),Lt.trigger("tm-do-epo-update")})):((o.is(":text")||o.is("textarea"))&&(r="change.cpflogic input.cpflogic"),o.off(r).on(r,function(){T(n)})),o.data("tmhaslogicevents",1))}),o[a]=parseInt(o[a],10)+1)})}),this.each(function(){var t=Bt(this),e=!1;switch(t.data("matches",o).data("toggle",i).data("fields",a),i){case"show":e=!1;break;case"hide":e=!0}e?t.removeClass("tc-hidden"):t.addClass("tc-hidden"),t.data("isactive",e)}),this.addClass("iscpfdependson is-epo-depend").data("iscpfdependson",1),this},Bt.fn.run_cpfdependson=function(){T()}),Bt.tcepo={formSubmitEvents:{},oneOptionIsSelected:{},initialActivation:{},lateFieldsPrices:{},errorObject:{},showHideTotal:{}},Bt.tcepo.tm_init_epo=function(t,e,a,i){h(t,e,a,i)},Bt.tcepo.tmLazyloadContainer=function(t){g=t},Lt.on("tc_manual_init",function(t,e){var a,i,o,r;"container"in e&&"reactivate"in e&&(a=e.reactivate,e=e.container),a=a,i=(e=Bt(e=e)).attr("data-product-id"),o=e.attr("data-epo-id"),h(r=(r=(r=e.parent()).is("form")||(r=e.closest("form")).is("form")?r:e.parent()).parent(),!1,i,o,void 0,void 0,a)}),Bt(function(){Nt=Bt.epoAPI.applyFilter("tc_api",Nt),Lt.on("lazyLoadXToncomplete",function(){Bt(".tm-owl-slider").each(function(){Bt(this).trigger("refresh.owl.carousel")})}),Lt.on("tc_init_epo_plugin",function(t){qt()}),Lt.on("tcShowLastError",function(){I.console.log(b)}),A.on("click.tcajax",".ajax_add_to_cart",function(){var t,e,a,i,o;void 0===(f=Bt(this)).attr("data-product_id")||!(a=(a=f.closest(".cart").find(".tm-epo-counter").val())||f.attr("data-epo-id"))||1!==f.closest(".tm-has-options").length&&void 0===f.attr("data-epo-id")||(o=f.attr("data-product_id"),i={},1===(t=1<(t=Bt(".tc-extra-product-options.tm-product-id-"+o+'[data-epo-id="'+a+'"]')).length?t.filter(".formepo")?t.filter(".formepo"):t.first():t).length&&(e=Bt(".tc-totals-form.tm-product-id-"+o+'[data-epo-id="'+a+'"]').find(".cpf-product-price").val(),a=Bt(".tc-totals-form.tm-product-id-"+o+'[data-epo-id="'+a+'"]').find(".tc_form_prefix").val(),i=Bt.extend(i,{tcajax:1,tcaddtocart:o,cpf_product_price:e}),a)&&(i.tc_form_prefix=a),o=f.data(),o=Bt.extend(o,t.tcSerializeObject(),i),f.removeData(),f.data(o))}),Bt.ajaxPrefilter(function(e,a){var t,i,o,r,n,c,l,d,s,p=!1,m=!1,_={};if("yes"===Ht.tm_epo_enable_in_shop&&(l=e.url.split("?"))&&1<=l.length&&(l=l[1])){for(t=l.split("&"),i=0;i<t.length;i+=1)1<=(o=t[i].split("=")).length&&o[0]&&o[1]&&"wc-ajax"===o[0]&&"add_to_cart"===o[1]&&(p=!0);p&&(e.originalsuccess=e.success,e.success=function(t){t&&t.error&&t.product_url?(f&&1===f.length&&(r=f),(r=Bt(".ajax_add_to_cart[data-product_id='"+a.data.product_id+"']")).removeClass("added"),r.removeClass("loading")):e.originalsuccess.call(null,t)})}FormData&&a.data&&(l=a.data,"object"==typeof(l="string"==typeof a.data?Bt.epoAPI.util.parseParams(a.data):l)[0]&&(l.forEach(function(t){_[t.name]=t.value}),l=_),c=[],a.url&&a.url.indexOf&&(c=Bt.epoAPI.util.parseParams(a.url.slice(a.url.indexOf("?")+1))),"quantity"in l&&l.tcaddtocart&&(l.product_id||l["add-to-cart"]||c.product_id||c["add-to-cart"])?(m=!0,n=l.tcaddtocart):Array.isArray(l)&&(m=l.some(function(t){return"quantity"===t.name})&&l.some(function(t){return"add-to-cart"===t.name})&&l.some(function(t){return"tcaddtocart"===t.name}),n=!!(n=l.find(function(t){return"tcaddtocart"===t.name}))&&n.value),m)&&1===(c=1<(c=f&&1===f.length&&1===f.closest(".tm-has-options").length?f.closest(".tm-has-options").find(".tc-extra-product-options.tm-product-id-"+n):Bt(".tc-extra-product-options.tm-product-id-"+n)).length?c.filter(".formepo")?c.filter(".formepo"):c.first():c).length&&(l={tcajax:1,tcaddtocart:n,cpf_product_price:Bt(".tc-totals-form.tm-product-id-"+n).find(".cpf-product-price").val()},(m=Bt(".tc-totals-form.tm-product-id-"+n).find(".tc_form_prefix").val())&&(l.tc_form_prefix=m),d=Bt.epoAPI.util.parseParams(e.data,!0),d=Bt.extend(d,c.tcSerializeObject(),l),s=new FormData,Object.keys(d).forEach(function(t){t&&s.append(t,d[t])}),c.find(":file").toArray().forEach(function(t){for(i=0;i<Bt(t)[0].files.length;i++)s.delete(Bt(t).attr("name")),s.append(Bt(t).attr("name"),Bt(t)[0].files[i])}),e.data=s,e.contentType=!1,e.cache=!1,e.processData=!1)}),E.ajaxSuccess(function(t,e,o){var a,r,n,c,l,d,s,p,m=Ht.quickview_array||"null",i=Ht.quickview_container||"null",_={},f=1,u=Bt.epoAPI.util.parseParams(o.data);if("wc_epo_get_associated_product_html"!==u.action){for(a in Bt(".tm-formepo-normal").remove(),Bt(".tm-formepo").remove(),Bt(".tm-cart-link").tmpoplink(),m=Bt.epoAPI.util.parseJSON(m),i=Bt.epoAPI.util.parseJSON(i))Object.prototype.hasOwnProperty.call(i,a)&&(_[i[a][0]]=Bt(i[a][1]));Bt.extend(m,_),s=function(){var e=!1;return Object.keys(m).forEach(function(t){Bt(m[t]).length&&(e=t)}),e},(p=function(t){var e,a=requestAnimationFrame(function(){setTimeout(function(){p(t-1)},200)}),i=s();if((i||0===t)&&(cancelAnimationFrame(a),i)){if(l=!1,r=Bt(m[i]),"woothemes_quick_view"===i&&r.is(".fusion-woocommerce-quick-view-container"))return!0;if("fusion_quick_view_load"===i&&0===r.find(Nt.epoSelector).length)return!0;if("woodmart_quick_shop"===i&&"woodmart_quick_shop"===(u=Bt.epoAPI.util.parseParams(o.url)).action&&(d=Bt(Bt.epoAPI.util.escapeSelector(m[i]+".post-"+u.id))).length&&(r=d,l=!0),"woodmart_quick_view"===i&&"woodmart_quick_view"===(u=Bt.epoAPI.util.parseParams(o.url)).action&&(d=Bt(Bt.epoAPI.util.escapeSelector(m[i]+".post-"+u.id))).length&&(r=d,l=!0),"quickview_pro"===i&&(u=o.url.split("/")).length&&(d=Bt(Bt.epoAPI.util.escapeSelector(m[i]+" .post-"+u[u.length-1]))).length&&(r=d,l=!0),"exwoofood_booking_info"!==i&&"wqv_popup_content"!==i&&"wp_food"!==i&&"jet_popup_get_content"!==i||(l=!0),"woofood"===i&&o.data&&"woofood_quickview_ajax"===(u=Bt.epoAPI.util.parseParams(o.data)).action&&(d=r.find("form").parent()).length&&(r=d,l=!0),0===r.find(".product").length&&r.is(".product")&&(l=!0),0<r.find(".product").length||l){if(r.removeClass("tc-init"),"fusion_quick_view_load"!==i&&"jet_popup_get_content"!==i&&"wp_food"!==i&&"woodmart_quick_shop"!==i&&"woodmart_quick_view"!==i&&"lightboxpro"!==i&&"jckqv_quick_view"!==i&&"yith_quick_view"!==i&&"theme_flatsome"!==i||(v=!0),0===(e=(g=r).find(Nt.epoSelector)).length)return delete m[i],p(10),!0;"fusion_quick_view_load"===i&&(f=1400),setTimeout(function(){n=e.attr("data-product-id"),c=e.attr("data-epo-id"),"woodmart_quick_shop"===i&&r.addClass("has-options"),Nt.getElementFromFieldCache=[],h(g,!0,n,c),Lt.trigger("tmlazy"),Lt.trigger("tm_epo_loaded_quickview"),Bt.jMaskGlobals&&g.find(Bt.jMaskGlobals.maskElements).each(function(){var t=Bt(this);t.attr("data-mask")&&t.mask(t.attr("data-mask"))})},f)}}})(10)}}),qt(),Bt(".tm-cart-link").tmpoplink(),A.on("updated_checkout wc_fragments_loaded wc_fragments_refreshed wc_fragment_refresh",function(){Bt(".tm-cart-link").tmpoplink()}),Lt.trigger("tmlazy"),Lt.trigger("tm_epo_loaded")}),A.on("updated_checkout updated_cart_totals",function(){t()}),t(),Bt(function(){var t=navigator.userAgent||navigator.vendor||I.opera;(t=-1<t.indexOf("FBAN")||-1<t.indexOf("FBAV")||-1<t.indexOf("Instagram"))&&Bt(".tmcp-upload").removeAttr("accept"),E.on("click",".quantity .jckqv-qty-spinner, .quantity .ui-spinner-button",function(){Bt(this).closest(".quantity").find(Nt.qtySelector).trigger("change")}),Bt("#wholesale_form").on("submit",function(){var t=Bt("form.cart").find(Nt.addToCartSelector).val(),e=Bt(Nt.epoSelector+".tm-cart-main[data-product-id='"+t+"']").tcClone(),t=Bt(".tm-totals-form-main[data-product-id='"+t+"']").tcClone(),a=Bt("<div class='tm-hidden tm-formepo'></div>");return a.append(e),a.append(t),Bt(this).append(a),!0}),E.on("click","#add_to_quote",function(t){var e,a;Ht&&"yes"===Ht.tm_epo_global_enable_validation&&(e=Bt(this).parents("form"),a=parseInt(e.find(".tm-epo-counter").val(),10),a=Bt(Nt.epoSelector+"[data-epo-id='"+a+"']"),"yes"===Ht.tm_epo_global_enable_validation)&&Bt.tc_validator&&0<e.length&&0<a.length&&!e.tc_validate().form()&&t.stopImmediatePropagation()}),Bt(".single_add_to_cart_button.paypal_checkout_button").on("click",function(t){var e=Bt(".cart");e.data("tc_validator")&&e.data("tc_validator").errorList&&t.stopImmediatePropagation()}),Bt(".wc-product-table").on("init.wcpt",function(t,e){e.$table.find(Nt.epoSelector).addClass("hidden"),e.$table.find("thead tr").append("<th>&nbsp;</th>"),setTimeout(function(){e.$table.find(".cart:not(.cart_group)").each(function(){var t=Bt(this).find(Nt.epoSelector),e=t.closest("tr");Bt("<td class='wc-product-table-epo'></td>").appendTo(e).append(t),Bt(I).trigger("tc_manual_init",t),t.removeClass("hidden")})},500)})}))}(window,document,window.jQuery);