/*! WooCommerce Free Gift Coupons 3.6.0 2024-01-26 17:20 */
jQuery(function(m){let i=function(t){var a;(a=t).is(".processing")||a.parents(".processing").length||t.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},o=function(t){t.removeClass("processing").unblock()},g=function(t){return window.matchMedia(t).matches},t=function(){m(".woocommerce-cart-form .wc-fgc-auto-open-edit").first().trigger("click")},r=function(t){t=t.find(".product-thumbnail img");t.length&&(t.wc_reset_variation_attr("src"),t.wc_reset_variation_attr("width"),t.wc_reset_variation_attr("height"),t.wc_reset_variation_attr("srcset"),t.wc_reset_variation_attr("sizes"),t.wc_reset_variation_attr("title"),t.wc_reset_variation_attr("data-caption"),t.wc_reset_variation_attr("alt"))};m(document).on("reset_data",function(t){t=m(t.target).data("fgc_current_item_row");void 0!==t&&t.length&&(t.find(".wc-fgc-stock-error").html(""),t.find(".wc-fgc-stock-error").hide(),r(t))}),m(document.body).on("updated_wc_div",function(){t()}),m(document).on("click",".wc-fgc-edit-in-cart",function(t){t.preventDefault();let f=m(this),l=m(this).data("cart_item_key");var t=m("tr#wc-fgc-new-row_"+l);let w=(f=f.is(":button")?f:m(".woocommerce-cart-form").find('.wc-fgc-edit-in-cart[data-cart_item_key="'+l+'"]')).closest("tr.wc-fgc-cart-item");if((w=void 0!==w&&w.length?w:t.prevAll("tr.wc-fgc-cart-item:first")).addClass("wc-fgc-has-open-panel"),f.is(":button")&&f.fadeOut(),t.length)t.fadeIn(),t=m("#wc_fgc_"+l+" .variations_form"),a=g("(max-width:767.9px)")?t:w,m("body,html").animate({scrollTop:a.offset().top-50},1e3),t.find(".variations").find(":input:enabled:visible:first").trigger("focus");else{i(m(".woocommerce-cart-form"));var a=m(this).data("product_id");let d=m(this).data("variation_id");m.ajax({url:wc_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","fgc_get_product"),method:"GET",cache:!1,headers:{"cache-control":"no-cache"},data:{product_id:a,variation_id:d,cart_item_key:l}}).done(function(t){if(t.success){if(!m("#wc_fgc_"+l).length){var a=w;var i=l;var o=t;let e=0,r=0,c=0;a.children().each(function(t,a){m(a).hasClass("product-name")&&(r=t,c=m(a).width()),++e});var n=e-r,_=wp.template("wc-fgc-edit");a.after(_({cart_item_key:i,colsBeforeProductName:r,colSpan:n,content:o.data})),m("#wc-fgc-new-row_"+i+" td.label").css("width",c)}var e,n=m("#wc_fgc_"+l),o=n.find(".variations_form"),_=(o&&o.data("fgc_current_item_row",w).wc_variation_form(),n.data("product_title")),a=n.data("single_add_to_cart_text"),i=wc_fgc_var_cart_params.i18_update_button_label.replace("%button_text%",a).replace("%product_title%",_),r=(o.find(".single_add_to_cart_button").data("cart_item_key",l).attr("aria-label",i),o.find(".wc-fgc-close-link").data("variation_id",d).toggle(!f.hasClass("wc-fgc-auto-open-edit")),f.data("pre_selected_attributes"));if("object"==typeof r){for(const s in r)r.hasOwnProperty(s)&&((e=m('select[name="'+s+'"]')).find('option:not([value="'+r[s]+'"])').remove(),e.closest("tr").hide());m(".variations_form.cart .reset_variations").hide()}var c=m("#wc_fgc_"+l+" .variations_form"),c=g("(max-width:767.9px)")?c:w;m("body,html").animate({scrollTop:c.offset().top-50},1e3),m("body").trigger("wc-fgc-cart-edit-initialized",[l])}else{c=undefined===t.data?wc_fgc_var_cart_params.i18n_server_error:t.data;window.alert(c)}}).fail(function(){window.alert(wc_fgc_var_cart_params.i18n_server_error),f.fadeIn()}).always(function(){o(m(".woocommerce-cart-form"))})}}),m(document).on("found_variation",function(t,a){var e,t=m(t.target).data("fgc_current_item_row");void 0!==t&&t.length&&(t=t,(a=a)&&a.image&&a.image.thumb_src&&1<a.image.thumb_src.length?(e=t.find(".product-thumbnail img")).length&&(e.wc_set_variation_attr("src",a.image.thumb_src),e.wc_set_variation_attr("height",a.image.thumb_src_h),e.wc_set_variation_attr("width",a.image.thumb_src_w),e.wc_set_variation_attr("srcset",a.image.srcset),e.wc_set_variation_attr("sizes",a.image.sizes),e.wc_set_variation_attr("title",a.image.title),e.wc_set_variation_attr("data-caption",a.image.caption),e.wc_set_variation_attr("alt",a.image.alt)):r(t))}),m(document).on("reset_data",function(t){t=m(t.target).data("fgc_current_item_row");void 0!==t&&t.length&&(t.find(".wc-fgc-stock-error").html(""),t.find(".wc-fgc-stock-error").hide(),r(t))}),m(document).on("click",".wc-fgc-new-row .single_add_to_cart_button",function(t){if(t.preventDefault(),!m(this).is(".disabled")){i(m(".wc-fgc-new-row"));var t=m(this).closest(".wc_fgc_cart").attr("id"),a=m("#"+t+" form"),c=m(this).data("cart_item_key");let e={},r=function(t){t=new FormData(t[0]);return t["delete"]("add-to-cart"),t}(a);r.append("cart_item_key",c),m("#"+t).find("select[name^=attribute]").each(function(){var t=m(this).attr("name"),a=m(this).val();e[t]=a,r.append("variation["+t+"]",a)}),m.ajax({url:wc_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","fgc_update_variation_in_cart"),type:"POST",processData:!1,contentType:!1,cache:!1,headers:{"cache-control":"no-cache"},data:r}).done(function(t){t.success?m('.woocommerce-cart-form [name="update_cart"]').prop("disabled",!1).trigger("click"):(m(".wc-fgc-stock-error").html(t.data),m(".wc-fgc-stock-error").show(),m("form.variations_form").find("div .woocommerce-variation-add-to-cart .input-text").show(),m.scroll_to_notices(m(".wc-fgc-stock-error")))}).fail(function(){window.alert(wc_fgc_var_cart_params.i18n_variation_update_error)}).always(function(){o(m(".wc-fgc-new-row"))})}}),m(document).on("click",".wc-fgc-new-row .wc-fgc-close-link",function(t){t.preventDefault();!m(this).data("variation_id")&&m(this).closest(".wc_fgc_cart").find(".single_add_to_cart_button").is(".disabled")&&window.alert(wc_add_to_cart_variation_params.i18n_make_a_selection_text);t=m(this).closest(".wc-fgc-new-row");let a=t.attr("id").split("_")[1];t.fadeOut(function(){m(".wc-fgc-edit-in-cart[data-cart_item_key="+a+"]").show()})}),t()});