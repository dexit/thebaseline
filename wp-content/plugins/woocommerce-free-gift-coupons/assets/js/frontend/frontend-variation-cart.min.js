/*! WooCommerce Free Gift Coupons 3.5.0 2023-12-11 18:16 */
jQuery(function(w){let i=function(t){var a;(a=t).is(".processing")||a.parents(".processing").length||t.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},o=function(t){t.removeClass("processing").unblock()},m=function(t){return window.matchMedia(t).matches},t=function(){w(".woocommerce-cart-form .wc-fgc-auto-open-edit").first().trigger("click")},r=function(t){t=t.find(".product-thumbnail img");t.length&&(t.wc_reset_variation_attr("src"),t.wc_reset_variation_attr("width"),t.wc_reset_variation_attr("height"),t.wc_reset_variation_attr("srcset"),t.wc_reset_variation_attr("sizes"),t.wc_reset_variation_attr("title"),t.wc_reset_variation_attr("data-caption"),t.wc_reset_variation_attr("alt"))};w(document).on("reset_data",function(t){t=w(t.target).data("fgc_current_item_row");void 0!==t&&t.length&&(t.find(".wc-fgc-stock-error").html(""),t.find(".wc-fgc-stock-error").hide(),r(t))}),w(document.body).on("updated_wc_div",function(){t()}),w(document).on("click",".wc-fgc-edit-in-cart",function(t){t.preventDefault();let d=w(this),f=w(this).data("cart_item_key");var t=w("tr#wc-fgc-new-row_"+f);let l=(d=d.is(":button")?d:w(".woocommerce-cart-form").find('.wc-fgc-edit-in-cart[data-cart_item_key="'+f+'"]')).closest("tr.wc-fgc-cart-item");if((l=void 0!==l&&l.length?l:t.prevAll("tr.wc-fgc-cart-item:first")).addClass("wc-fgc-has-open-panel"),d.is(":button")&&d.fadeOut(),t.length)t.fadeIn(),t=w("#wc_fgc_"+f+" .variations_form"),a=m("(max-width:767.9px)")?t:l,w("body,html").animate({scrollTop:a.offset().top-50},1e3),t.find(".variations").find(":input:enabled:visible:first").trigger("focus");else{i(w(".woocommerce-cart-form"));var a=w(this).data("product_id");let s=w(this).data("variation_id");w.ajax({url:wc_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","fgc_get_product"),method:"GET",cache:!1,headers:{"cache-control":"no-cache"},data:{product_id:a,variation_id:s,cart_item_key:f}}).done(function(t){if(t.success){if(!w("#wc_fgc_"+f).length){var a=l;var i=f;var o=t;let e=0,r=0,c=0;a.children().each(function(t,a){w(a).hasClass("product-name")&&(r=t,c=w(a).width()),++e});var n=e-r,_=wp.template("wc-fgc-edit");a.after(_({cart_item_key:i,colsBeforeProductName:r,colSpan:n,content:o.data})),w("#wc-fgc-new-row_"+i+" td.label").css("width",c)}var n=w("#wc_fgc_"+f),o=n.find(".variations_form"),_=(o&&o.data("fgc_current_item_row",l).wc_variation_form(),n.data("product_title")),a=n.data("single_add_to_cart_text"),i=wc_fgc_var_cart_params.i18_update_button_label.replace("%button_text%",a).replace("%product_title%",_),e=(o.find(".single_add_to_cart_button").data("cart_item_key",f).attr("aria-label",i),o.find(".wc-fgc-close-link").data("variation_id",s).toggle(!d.hasClass("wc-fgc-auto-open-edit")),d.data("pre_selected_attributes"));if(undefined!==e&&Array.isArray(e)){for(var r in e)w('select[name="'+e[r]+'"]').closest("tr").hide();w(".variations_form.cart .reset_variations").hide()}var c=w("#wc_fgc_"+f+" .variations_form"),c=m("(max-width:767.9px)")?c:l;w("body,html").animate({scrollTop:c.offset().top-50},1e3),w("body").trigger("wc-fgc-cart-edit-initialized",[f])}else{c=undefined===t.data?wc_fgc_var_cart_params.i18n_server_error:t.data;window.alert(c)}}).fail(function(){window.alert(wc_fgc_var_cart_params.i18n_server_error),d.fadeIn()}).always(function(){o(w(".woocommerce-cart-form"))})}}),w(document).on("found_variation",function(t,a){var e,t=w(t.target).data("fgc_current_item_row");void 0!==t&&t.length&&(t=t,(a=a)&&a.image&&a.image.thumb_src&&1<a.image.thumb_src.length?(e=t.find(".product-thumbnail img")).length&&(e.wc_set_variation_attr("src",a.image.thumb_src),e.wc_set_variation_attr("height",a.image.thumb_src_h),e.wc_set_variation_attr("width",a.image.thumb_src_w),e.wc_set_variation_attr("srcset",a.image.srcset),e.wc_set_variation_attr("sizes",a.image.sizes),e.wc_set_variation_attr("title",a.image.title),e.wc_set_variation_attr("data-caption",a.image.caption),e.wc_set_variation_attr("alt",a.image.alt)):r(t))}),w(document).on("reset_data",function(t){t=w(t.target).data("fgc_current_item_row");void 0!==t&&t.length&&(t.find(".wc-fgc-stock-error").html(""),t.find(".wc-fgc-stock-error").hide(),r(t))}),w(document).on("click",".wc-fgc-new-row .single_add_to_cart_button",function(t){if(t.preventDefault(),!w(this).is(".disabled")){i(w(".wc-fgc-new-row"));var t=w(this).closest(".wc_fgc_cart").attr("id"),a=w("#"+t+" form"),c=w(this).data("cart_item_key");let e={},r=function(t){t=new FormData(t[0]);return t["delete"]("add-to-cart"),t}(a);r.append("cart_item_key",c),w("#"+t).find("select[name^=attribute]").each(function(){var t=w(this).attr("name"),a=w(this).val();e[t]=a,r.append("variation["+t+"]",a)}),w.ajax({url:wc_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","fgc_update_variation_in_cart"),type:"POST",processData:!1,contentType:!1,cache:!1,headers:{"cache-control":"no-cache"},data:r}).done(function(t){t.success?w('.woocommerce-cart-form [name="update_cart"]').prop("disabled",!1).trigger("click"):(w(".wc-fgc-stock-error").html(t.data),w(".wc-fgc-stock-error").show(),w("form.variations_form").find("div .woocommerce-variation-add-to-cart .input-text").show(),w.scroll_to_notices(w(".wc-fgc-stock-error")))}).fail(function(){window.alert(wc_fgc_var_cart_params.i18n_variation_update_error)}).always(function(){o(w(".wc-fgc-new-row"))})}}),w(document).on("click",".wc-fgc-new-row .wc-fgc-close-link",function(t){t.preventDefault();!w(this).data("variation_id")&&w(this).closest(".wc_fgc_cart").find(".single_add_to_cart_button").is(".disabled")&&window.alert(wc_add_to_cart_variation_params.i18n_make_a_selection_text);t=w(this).closest(".wc-fgc-new-row");let a=t.attr("id").split("_")[1];t.fadeOut(function(){w(".wc-fgc-edit-in-cart[data-cart_item_key="+a+"]").show()})}),t()});